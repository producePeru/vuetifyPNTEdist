import{_ as he,r as m,f as R,g as $e,l as we,h as L,b,a as s,c as y,w as n,q as Ve,F as _e,s as Ce,v as Ee,o as v,x as I,n as ke,u as r,y as j,V as H,e as V,z as Y,j as f,k as Me}from"./index-DhJf1yqi.js";import{F as Re,_ as Ie,a as xe,M as Se}from"./Footer-D9C2UWeF.js";import{u as Te}from"./usePageMeta-BzCTwrIp.js";import{c as i,r as u,e as Ue,m as Ne,a as W,u as qe,V as Ae,h as p,E as De,b as X,d as J,f as x}from"./VTooltip-8D5kgDEB.js";import{V as S}from"./VContainer-Dhb-63UB.js";import{V as _,a as c,b as w}from"./VSelect-DY1Lc4FC.js";const ze={class:"pp03-background"},Fe={class:"container-sm"},Ge={__name:"[slug]",setup(Be){Te("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const T="6LdKGzorAAAAADqxi2yn8x9mHfTchbXYK1y6KRUb",U=Ce(),N=Ee(),C=m(!1),q=m(null),$=m(!1),Q=m(!1),A=m(!1),d=m("#8dbe26"),E=m(!1),k=m(!1),Z=R({ruc:null,comercialName:null,socialReason:null,economicsector_id:null,comercialactivity_id:null,category_id:null,city_id:null,howKnowEvent_id:null,slug:null,typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,gender_id:null,sick:null,phone:null,email:null}),a=R({...Z}),ee=[{label:"Si",value:"yes"},{label:"No",value:"no"}];function h(l,...o){let e=a[l]||"";o.forEach(g=>{switch(g){case"trim":e=e.trim();break;case"capitalize":e=e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e;break;case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break}}),a[l]=e}m(null);const ae=["facebook","instagram","web"],oe=m([]);R({}),$e(()=>ae.filter(l=>!oe.value.includes(l)));const M=new Date;new Date(M.getFullYear()-18,M.getMonth(),M.getDate()).toISOString().split("T")[0];const D=m([]),z=m([]),F=m([]),G=m([]),B=m([]),P=m([]),K=m([]),le=async()=>{try{const l=await p({url:"select/economic-sectors",method:"GET"});D.value=l.data}catch(l){console.error("Error de red:",l)}},te=async()=>{try{const l=await p({url:"select/type-documents",method:"GET"});F.value=l.data}catch(l){console.error("Error de red:",l)}},re=async()=>{try{const l=await p({url:"select/genders",method:"GET"});G.value=l.data}catch(l){console.error("Error de red:",l)}},se=async()=>{try{const l=await p({url:"select/comercial-activities",method:"GET"});z.value=l.data}catch(l){console.error("Error de red:",l)}},ne=async()=>{try{const l=await p({url:"select/cities",method:"GET"});B.value=l.data}catch(l){console.error("Error de red:",l)}},ie=async()=>{try{const l=await p({url:"select/rubros",method:"GET"});P.value=l.data}catch(l){console.error("Error de red:",l)}},de=async()=>{try{const l=await p({url:"select/propaganda-media",method:"GET"});K.value=l.data}catch(l){console.error("Error de red:",l)}},ce=()=>{a.documentnumber=null},me=async()=>{E.value=!0;try{const l=await p({url:`public/search-api-ruc/${a.ruc}`,method:"GET"});l.status==200&&(a.comercialName=l.data.comercialName,a.socialReason=l.data.socialReason,a.economicsector_id=l.data.economicsector_id,a.category_id=l.data.category_id,a.comercialactivity_id=l.data.comercialactivity_id,a.city_id=l.data.city_id)}catch(l){console.error("Error de red:",l)}finally{E.value=!1}},ue=async()=>{k.value=!0;try{const l=await p({url:`public/search-api-dni/${a.documentnumber}`,method:"GET"});l.status==200&&(a.name=l.data.name,a.lastname=l.data.lastname,a.middlename=l.data.middlename,a.gender_id=l.data.gender_id,a.phone=l.data.phone?+l.data.phone:null,a.email=l.data.email)}catch(l){console.error("Error de red:",l)}finally{k.value=!1}},pe=async()=>{try{if(await t.value.$validate(),t.value.$invalid){C.value=!0;return}const o={recaptcha_token:await window.grecaptcha.execute(T,{action:"form_submit"})};if((await p({url:"verify-captcha",method:"POST",data:o})).status==200){const g={typedocument_id:a.typedocument_id,documentnumber:a.documentnumber,name:a.name,lastname:a.lastname,middlename:a.middlename,gender_id:a.gender_id,sick:a.sick=="yes"?"si":"no",email:a.email,phone:a.phone,ruc:a.ruc,comercialName:a.comercialName,socialReason:a.socialReason,economicsector_id:a.economicsector_id,comercialactivity_id:a.comercialactivity_id,category_id:a.category_id,city_id:a.city_id,slug:a.slug,howKnowEvent_id:a.howKnowEvent_id};(await p({url:"public/attendance-present",method:"POST",data:g})).status==200&&N.push(`/registrado/${U.params.slug}`)}}catch(l){console.error("Error ejecutando reCAPTCHA:",l)}},ge=async()=>{try{$.value=!0;const l=U.params.slug,o=2,e=await p({url:`public/data-attendance/${l}`,method:"GET"});if(e.status==400)return N.replace("/pagina-no-encontrada");if(e.status==500)return A.value=!0;const g=e.data,O={subTitle:g.title,place:g.address,fecha:g.fecha,schedule:g.hora};q.value=O,e.status==200&&(a.slug=g.slug,await ne(),$.value=!1,await le(),await te(),await re(),await se(),await ie(),await de())}catch(l){console.error("Error de red:",l)}finally{$.value=!1}};we(async()=>{if(await ge(),!window.grecaptcha){const l=document.createElement("script");l.src=`https://www.google.com/recaptcha/api.js?render=${T}`,l.async=!0,document.head.appendChild(l)}});const ve=i.withMessage("El número de RUC es incorrecto",i.regex(/^(10|15|20)\d{9}$/)),be=i.withMessage("El número es incorrecto",i.regex(/^(9)\d{8}$/)),ye=i.withMessage("Corrige el número de documento",i.regex(/^\d+$/)),fe={ruc:{required:i.withMessage("El RUC es obligatorio",u),validRUC:ve},comercialName:{required:i.withMessage("Escribir el Nombre Comercial",u),maxLength:i.withMessage("Número máximo de caracteres permitidos: 120",W(120))},socialReason:{required:i.withMessage("Escribir la Razón Social",u),maxLength:i.withMessage("Número máximo de caracteres permitidos: 120",W(120))},economicsector_id:{required:i.withMessage("Seleccionar un tipo",u)},category_id:{required:i.withMessage("Seleccionar un tipo",u)},comercialactivity_id:{required:i.withMessage("Seleccionar un tipo",u)},city_id:{required:i.withMessage("Selecciona una región",u)},typedocument_id:{required:i.withMessage("Seleccionar un tipo",u)},documentnumber:{required:i.withMessage("Ingresar número de documento",u),minLength:i.withMessage("Completa el número de identidad",Ne(8)),validDni:ye},lastname:{required:i.withMessage("Ingresar apellido paterno",u)},middlename:{required:i.withMessage("Ingresar apellido materno",u)},name:{required:i.withMessage("Ingresar nombres",u)},gender_id:{required:i.withMessage("Seleccionar género",u)},sick:{required:i.withMessage("Seleccionar",u)},phone:{required:i.withMessage("Ingresar número de celular",u),validPhone:be},email:{required:i.withMessage("Ingresar correo electrónico",u),email:i.withMessage("Correo electrónico inválido",Ue)},howKnowEvent_id:{required:i.withMessage("Seleccionar un tipo",u)}},t=qe(fe,a);return(l,o)=>(v(),L("section",ze,[b("div",Fe,[s(Ve,{"model-value":$.value,class:"align-center justify-center",persistent:"",scrim:""},{default:n(()=>[s(I,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),A.value?(v(),y(S,{key:0,class:"pp03-container"},{default:n(()=>[s(De)]),_:1})):(v(),L(_e,{key:1},[$.value?(v(),y(S,{key:0,class:"pp03-container",style:{"min-height":"74.5vh"}})):(v(),y(S,{key:1,class:"pp03-container"},{default:n(()=>[s(xe,{color:d.value,info:q.value,title:"FORTALECE TU MERCADO",eventType:"tumercado",modal:!1},null,8,["color","info"]),b("form",{onSubmit:ke(pe,["prevent"])},[o[27]||(o[27]=b("h4",{class:"form-title mt-6 mb-6"},"Datos de la Empresa",-1)),s(_,null,{default:n(()=>[s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(X,{"control-variant":"hidden",color:d.value,modelValue:a.ruc,"onUpdate:modelValue":o[0]||(o[0]=e=>a.ruc=e),counter:11,maxlength:"11","error-messages":r(t).ruc.$errors.map(e=>e.$message),label:"Número de RUC",density:"comfortable",variant:"outlined",onInput:r(t).ruc.$touch},{"append-inner":n(()=>[s(J,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[E.value?(v(),y(I,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):j((v(),y(H,{key:1,class:"me-2 input-search",onClick:me},{default:n(()=>o[24]||(o[24]=[V(" mdi-magnify ")])),_:1,__:[24]},512)),[[Y,!r(t).ruc.$invalid]])]),_:1})]),_:1},8,["color","modelValue","error-messages","onInput"])]),_:1}),s(c,{cols:" 12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.comercialName,"onUpdate:modelValue":o[1]||(o[1]=e=>a.comercialName=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).comercialName.$errors.map(e=>e.$message),label:"Nombre comercial",density:"comfortable",variant:"outlined",onInput:r(t).comercialName.$touch,onBlur:o[2]||(o[2]=e=>h("comercialName","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:" 12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.socialReason,"onUpdate:modelValue":o[3]||(o[3]=e=>a.socialReason=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).socialReason.$errors.map(e=>e.$message),label:"Razon Social",density:"comfortable",variant:"outlined",onInput:r(t).socialReason.$touch,onBlur:o[4]||(o[4]=e=>h("socialReason","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:a.economicsector_id,"onUpdate:modelValue":o[5]||(o[5]=e=>a.economicsector_id=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).economicsector_id.$errors.map(e=>e.$message),items:D.value,label:"Sector económico","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).economicsector_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:a.category_id,"onUpdate:modelValue":o[6]||(o[6]=e=>a.category_id=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).category_id.$errors.map(e=>e.$message),items:P.value,label:"Rubro","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).category_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:a.comercialactivity_id,"onUpdate:modelValue":o[7]||(o[7]=e=>a.comercialactivity_id=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).comercialactivity_id.$errors.map(e=>e.$message),items:z.value,label:"Actividad Comercial","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).comercialactivity_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:a.city_id,"onUpdate:modelValue":o[8]||(o[8]=e=>a.city_id=e),disabled:r(t).ruc.$invalid,"error-messages":r(t).city_id.$errors.map(e=>e.$message),items:B.value,label:"Región","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).city_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1})]),_:1}),o[28]||(o[28]=b("h4",{class:"form-title mt-4 mb-6"},"Datos Personales ( Representante )",-1)),s(_,null,{default:n(()=>[s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:a.typedocument_id,"onUpdate:modelValue":[o[9]||(o[9]=e=>a.typedocument_id=e),ce],"error-messages":r(t).typedocument_id.$errors.map(e=>e.$message),items:F.value,label:"Tipo de documento","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).typedocument_id.$touch},null,8,["color","modelValue","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.documentnumber,"onUpdate:modelValue":o[10]||(o[10]=e=>a.documentnumber=e),disabled:r(t).typedocument_id.$invalid,counter:a.typedocument_id==1?8:10,maxlength:a.typedocument_id==1?8:10,"error-messages":r(t).documentnumber.$errors.map(e=>e.$message),label:"Número de documento",density:"comfortable",variant:"outlined",onInput:r(t).documentnumber.$touch},{"append-inner":n(()=>[s(J,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[k.value?(v(),y(I,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):j((v(),y(H,{key:1,class:"me-2 input-search",onClick:ue},{default:n(()=>o[25]||(o[25]=[V(" mdi-magnify ")])),_:1,__:[25]},512)),[[Y,!r(t).documentnumber.$invalid]])]),_:1})]),_:1},8,["color","modelValue","disabled","counter","maxlength","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.lastname,"onUpdate:modelValue":o[11]||(o[11]=e=>a.lastname=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).lastname.$errors.map(e=>e.$message),label:"Apellido Paterno",density:"comfortable",variant:"outlined",onInput:r(t).lastname.$touch,onBlur:o[12]||(o[12]=e=>h("lastname","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.middlename,"onUpdate:modelValue":o[13]||(o[13]=e=>a.middlename=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).middlename.$errors.map(e=>e.$message),label:"Apellido Materno",density:"comfortable",variant:"outlined",onInput:r(t).middlename.$touch,onBlur:o[14]||(o[14]=e=>h("middlename","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.name,"onUpdate:modelValue":o[15]||(o[15]=e=>a.name=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).name.$errors.map(e=>e.$message),label:"Nombres",density:"comfortable",variant:"outlined",onInput:r(t).name.$touch,onBlur:o[16]||(o[16]=e=>h("name","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:a.gender_id,"onUpdate:modelValue":o[17]||(o[17]=e=>a.gender_id=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).gender_id.$errors.map(e=>e.$message),items:G.value,label:"Género","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).gender_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:a.sick,"onUpdate:modelValue":o[18]||(o[18]=e=>a.sick=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).sick.$errors.map(e=>e.$message),items:ee,label:"Tiene alguna discapacidad","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:r(t).sick.$touch},null,8,["color","modelValue","disabled","error-messages","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(X,{"control-variant":"hidden",counter:9,color:d.value,modelValue:a.phone,"onUpdate:modelValue":o[19]||(o[19]=e=>a.phone=e),disabled:r(t).documentnumber.$invalid,maxlength:"9","error-messages":r(t).phone.$errors.map(e=>e.$message),label:"Número de celular",density:"comfortable",variant:"outlined",onInput:r(t).phone.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:a.email,"onUpdate:modelValue":o[20]||(o[20]=e=>a.email=e),disabled:r(t).documentnumber.$invalid,"error-messages":r(t).email.$errors.map(e=>e.$message),label:"Correo electrónico",onBlur:o[21]||(o[21]=e=>h("email","trim")),density:"comfortable",variant:"outlined",onInput:r(t).email.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),o[29]||(o[29]=b("h4",{class:"form-title mt-4 mb-6"},"Detalles",-1)),s(_,null,{default:n(()=>[s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:a.howKnowEvent_id,"onUpdate:modelValue":o[22]||(o[22]=e=>a.howKnowEvent_id=e),"error-messages":r(t).howKnowEvent_id.$errors.map(e=>e.$message),items:K.value,label:"¿Cómo se enteró del evento?","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined"},null,8,["color","modelValue","error-messages","items"])]),_:1})]),_:1}),s(_,null,{default:n(()=>[s(Se),s(c,{class:"text-center"},{default:n(()=>[s(Me,{type:"submit",class:"form-button",onClick:r(t).$validate,loading:Q.value,size:"large"},{default:n(()=>o[26]||(o[26]=[V(" PARTICIPAR ")])),_:1,__:[26]},8,["onClick","loading"])]),_:1})]),_:1})],32)]),_:1}))],64))]),s(Re),o[31]||(o[31]=b("a",{href:"https://wa.me/51901761128?text=Hola%20quiero%20más%20información%20sobre%20el%20evento",target:"_blank"},[b("img",{class:"whatsapp-button",src:Ie,alt:"fortalece-tu-empresa-ayuda"})],-1)),s(Ae,{modelValue:C.value,"onUpdate:modelValue":o[23]||(o[23]=e=>C.value=e),color:"red",timeout:"4000",location:"top center",rounded:"lg",elevation:"24"},{default:n(()=>o[30]||(o[30]=[V(" Por favor, completa todos los campos obligatorios correctamente. ")])),_:1,__:[30]},8,["modelValue"])]))}},We=he(Ge,[["__scopeId","data-v-27ed64e4"]]);export{We as default};
