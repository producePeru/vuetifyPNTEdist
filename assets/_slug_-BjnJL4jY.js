import{u as Y}from"./usePageMeta-BVoIz4Yp.js";import{h as E}from"./httpRequest-D3KC4pOG.js";import{_ as L}from"./FormComponent-DzkaaZsi.js";import{u as Z}from"./useFormOptions-BD_ZbAMu.js";import{u as J,r as f,h as V,i as F,j as K,k as Q,o as T,c as w,b as h,e as a,w as o,d as l,V as g,g as c,t as p,p as k,f as N,l as W,m as X,n as ee}from"./index-C0gaUYyG.js";import"./dayjs.min-BaPeHrhp.js";import{V as te}from"./VSnackbar-CUmbrWdX.js";import{V as j}from"./VContainer-SoZtTZbj.js";import{a as D,V as A}from"./VRow-ChXCX1hm.js";import{V as se}from"./VCard-NMHhxYgj.js";import{V as ae}from"./VAvatar-DaqhRadI.js";import"./index-CeceoFn_.js";import"./VAutocomplete-Cc3wl0mU.js";import"./VList-DQsT9Fmy.js";import"./VDivider-BvDmpqQv.js";import"./VDialog-_rbldzUr.js";import"./VForm-iFUsFC7V.js";const oe="/assets/mp-logo-CD8ZY2hp.png",le={class:"mp-form-asistencia"},ne={class:"d-flex align-center"},re={class:"text-white m-0"},ie={__name:"AsistenciaMujerProduceForm",setup($){const b=J(),_=f(!1),i=V({}),v=F(),d=K(),t=f(!1),P=f(1),e=V({}),u=f({show:!1,message:"",color:"",icon:""});k("formState",e),k("loadingStates",i),k("loadingSubmit",t);const m=V([{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1}]);Q(_,s=>{b.global.name.value=s?"dark":"light"});const q=s=>{const n=m.find(r=>r.model===s);P.value==1&&s=="ruc"&&(n.disabled=!n.disabled,z()),s=="documentnumber"&&S()},z=()=>{e.ruc=null,e.razonSocial=null,e.economicsector_id=null,e.rubro_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.obs_ruc=null},S=()=>{e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null,e.country_id=null,e.birthday=null,e.gender_id=null,e.sick=null,e.academicdegree_id=null,e.civil_status_id=null,e.num_soons=0,e.role_company_id=null,e.obs_dni=null,e.phone=null,e.email=null},B=async(s,n)=>{if(s.model==="typedocument_id"){const r=m.find(x=>x.model==="documentnumber");if(!r)return;const y={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},C=y[s.value]||y.default;r.max=C.max,s.value&&S(),["name","lastname","middlename"].forEach(x=>{const R=m.find(G=>G.model===x);R&&(R.disabled=C.autolockNames)}),r.disabled=!1}if(s.model==="documentnumber"){const r=m.find(y=>y.model==="documentnumber");r&&(r.disabled=!1)}},M=async s=>{if(s=="ruc")return O();if(s=="documentnumber")return I()},O=async()=>{},I=async()=>{},H=async()=>{t.value=!0;const s={ruc:e.ruc,doc_number:e.documentnumber,slug:v.params.slug,attendance:1};try{const n=await E({url:"mp/register-attendance",method:"POST",data:s});console.log("Response: ",n),n.status==200&&(e.documentnumber="",e.ruc="",u.value={show:!0,message:"Asistencia registrada correctamente.",color:"success",icon:"mdi-check-circle"}),n.status==409&&(u.value={show:!0,message:"Ya te has registrado.",color:"warning",icon:"mdi-alert-circle"}),n.status==404&&d.push({path:`/mujer-produce/${v.params.slug}`,query:{status:201,mensaje:"registrar-empresario",ruc:e.ruc}})}catch(n){console.log("Error: ",n)}finally{t.value=!1}},{loadTypeDocuments:U}=Z(m);return T(async()=>{await U(),e.typedocument_id=1}),(s,n)=>(h(),w("div",le,[a(L,{colorForm:"#d41a75",fields:m,onSearchDataApi:M,onSubmit:H,onChange:B,onHandleClearSearch:q},null,8,["fields"]),a(te,{modelValue:u.value.show,"onUpdate:modelValue":n[0]||(n[0]=r=>u.value.show=r),color:u.value.color,timeout:"6000",location:"top right",rounded:"lg",elevation:"4",class:"d-flex align-center"},{default:o(()=>[l("div",ne,[a(g,{class:"mr-3",size:"28"},{default:o(()=>[c(p(u.value.icon),1)]),_:1}),l("h3",re,p(u.value.message),1)])]),_:1},8,["modelValue","color"])]))}},ce={class:"mp-header mp"},ue={style:{"line-height":"2.2",color:"#fff"}},de={class:"title",style:{"line-height":"1.3"}},me={style:{"list-style":"none","padding-left":"0","font-size":"18px"}},fe={key:0,class:"mp"},pe={key:1},_e={class:"text-center",style:{"max-width":"380px"}},Fe={__name:"[slug]",setup($){Y("Mujer Produce | Registro","Formulario de registro para el Evento de Producción de Mujeres","mp-ico.ico");const b=F(),_=f(!0),i=f({}),v=async()=>{try{const d=b.params.slug,t=await E({url:`mp/info-event-public/${d}`,method:"GET"});t.status===200&&(i.value=(t==null?void 0:t.data)||{}),console.log("response",t)}catch(d){console.error("Error de red:",d)}finally{_.value=!1}};return T(async()=>{await v()}),(d,t)=>(h(),N(j,{class:"py-0",fluid:""},{default:o(()=>[a(D,{align:"center",justify:"center"},{default:o(()=>[a(A,{cols:"12",sm:"12",md:"10",lg:"8",xl:"5",class:"my-2"},{default:o(()=>[a(X,{"model-value":_.value,class:"align-center justify-center",persistent:"",scrim:""},{default:o(()=>[a(ee,{color:"#d41a75",size:"64",indeterminate:""})]),_:1},8,["model-value"]),_.value?W("",!0):(h(),N(se,{key:0,elevation:"8",rounded:"lg",style:{"min-height":"96vh"}},{default:o(()=>[l("div",ce,[a(D,null,{default:o(()=>[a(A,null,{default:o(()=>[l("div",ue,[a(ae,{width:100,src:oe}),l("h1",de,p(i.value.title),1),l("ul",me,[l("li",null,[a(g,null,{default:o(()=>t[0]||(t[0]=[c("mdi-map-marker")])),_:1,__:[0]}),c(" LUGAR: "+p(i.value.place),1)]),l("li",null,[a(g,{left:""},{default:o(()=>t[1]||(t[1]=[c("mdi-calendar")])),_:1,__:[1]}),c(" FECHA: "+p(i.value.date),1)]),l("li",null,[a(g,{left:""},{default:o(()=>t[2]||(t[2]=[c("mdi-clock-time-four-outline")])),_:1,__:[2]}),c(" HORARIO: "+p(i.value.hours),1)])])])]),_:1})]),_:1})]),i.value.finished?(h(),w("div",pe,[a(j,{class:"d-flex justify-center align-center",style:{"min-height":"50vh"}},{default:o(()=>[l("div",_e,[a(g,{size:"70",color:"#d41a75",class:"mb-6"},{default:o(()=>t[4]||(t[4]=[c(" mdi-calendar-remove ")])),_:1,__:[4]}),t[5]||(t[5]=l("h2",{class:"text-h5 font-weight-medium mb-2"}," Inscripciones cerradas ",-1)),t[6]||(t[6]=l("p",{class:"text-body-2 text-medium-emphasis mb-6"}," Este evento ya no acepta nuevas inscripciones. Te invitamos a revisar otras actividades disponibles. ",-1)),t[7]||(t[7]=l("a",{class:"text-none",href:"https://inscripcion.soporte-pnte.com/mujer-produce-eventos"},"Ver próximos eventos",-1))])]),_:1})])):(h(),w("div",fe,[t[3]||(t[3]=l("h1",{class:"mb-8"},"Asistencia",-1)),a(ie)]))]),_:1}))]),_:1})]),_:1})]),_:1}))}};export{Fe as default};
