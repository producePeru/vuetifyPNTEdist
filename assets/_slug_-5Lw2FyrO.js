import{u as ue}from"./usePageMeta-Co6AZ6Mo.js";import{h as M}from"./httpRequest-B4w4n6I1.js";import{c as z,b as v,i as c,P as k,R as A,Q as h,j as g,T as C,U as H,Y as U,a6 as j,r as b,a5 as $,a8 as ce,ad as fe,w as Y,o as L,z as S,_ as he,a7 as pe,X as ge}from"./index-BXqrVFtK.js";import{d as X,V as be}from"./VDialog-BGb3Jpss.js";import"./es-B6Y8_ezG.js";import{a as V,V as R}from"./VRow-BmjnzFh2.js";import{V as Z}from"./VImg-BD3o4qwa.js";/* empty css                                                       */import{_ as ye}from"./verificacion-DI9pvaX9.js";import{_ as ve}from"./FormComponent-CE_DUs0G.js";import{u as _e}from"./useFormOptions-D7Ovro3V.js";import{V as De}from"./VSnackbar-sgDEUGKS.js";import{V as B,b as we}from"./VCard-DQQUndT4.js";import{V as Me}from"./VContainer-BqO42mGK.js";import{n as Pe,c as G,t as E,m as Q,a as J,b as W,d as _,e as D,g as Ne,f as I}from"./format-BWHQx2uA.js";import"./index-DWGsULJ9.js";import"./VForm-DhVDg1fI.js";import"./VList-CCPbV9gM.js";import"./VAvatar-DI94H7kk.js";import"./ssrBoot-CxzoGPPw.js";function Te(n,t){const[e,a]=Pe(n,t.start,t.end);return{start:e,end:a}}function Ce(n,t){const{start:e,end:a}=Te(t==null?void 0:t.in,n);let r=+e>+a;const l=r?+e:+a,u=r?a:e;u.setHours(0,0,0,0);let m=1;const d=[];for(;+u<=l;)d.push(G(e,u)),u.setDate(u.getDate()+m),u.setHours(0,0,0,0);return r?d.reverse():d}function q(n,t){const e=()=>G(t==null?void 0:t.in,NaN),r=Se(n);let l;if(r.date){const s=We(r.date,2);l=Fe(s.restDateString,s.year)}if(!l||isNaN(+l))return e();const u=+l;let m=0,d;if(r.time&&(m=ke(r.time),isNaN(m)))return e();if(r.timezone){if(d=Ae(r.timezone),isNaN(d))return e()}else{const s=new Date(u+m),y=E(0,t==null?void 0:t.in);return y.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),y.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),y}return E(u+m+d,t==null?void 0:t.in)}const x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},xe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ve=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,je=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Se(n){const t={},e=n.split(x.dateTimeDelimiter);let a;if(e.length>2)return t;if(/:/.test(e[0])?a=e[0]:(t.date=e[0],a=e[1],x.timeZoneDelimiter.test(t.date)&&(t.date=n.split(x.timeZoneDelimiter)[0],a=n.substr(t.date.length,n.length))),a){const r=x.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function We(n,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=n.match(e);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,l=a[2]?parseInt(a[2]):null;return{year:l===null?r:l*100,restDateString:n.slice((a[1]||a[2]).length)}}function Fe(n,t){if(t===null)return new Date(NaN);const e=n.match(xe);if(!e)return new Date(NaN);const a=!!e[4],r=w(e[1]),l=w(e[2])-1,u=w(e[3]),m=w(e[4]),d=w(e[5])-1;if(a)return Ye(t,m,d)?Re(t,m,d):new Date(NaN);{const s=new Date(0);return!Oe(t,l,u)||!He(t,r)?new Date(NaN):(s.setUTCFullYear(t,l,Math.max(r,u)),s)}}function w(n){return n?parseInt(n):1}function ke(n){const t=n.match(Ve);if(!t)return NaN;const e=F(t[1]),a=F(t[2]),r=F(t[3]);return Ee(e,a,r)?e*Q+a*J+r*1e3:NaN}function F(n){return n&&parseFloat(n.replace(",","."))||0}function Ae(n){if(n==="Z")return 0;const t=n.match(je);if(!t)return 0;const e=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Ie(a,r)?e*(a*Q+r*J):NaN}function Re(n,t,e){const a=new Date(0);a.setUTCFullYear(n,0,4);const r=a.getUTCDay()||7,l=(t-1)*7+e+1-r;return a.setUTCDate(a.getUTCDate()+l),a}const ze=[31,null,31,30,31,30,31,31,30,31,30,31];function K(n){return n%400===0||n%4===0&&n%100!==0}function Oe(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(ze[t]||(K(n)?29:28))}function He(n,t){return t>=1&&t<=(K(n)?366:365)}function Ye(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Ee(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function Ie(n,t){return t>=0&&t<=59}const qe="/assets/logo-tu-mercado-BAC65nv4.png",Ue={style:{"line-height":"2"}},$e={style:{"list-style":"none","padding-left":"0"}},Le={class:"mb-3"},Xe={class:"mb-1"},Ze=["innerHTML"],Be={__name:"FortaleceTuMercadoHeader",props:{info:{type:Object,required:!0,default:()=>({})},slideActive:{type:Number,default:1}},setup(n){X.locale("es");const t=e=>e==null?void 0:e.split("\\").join("<br>");return(e,a)=>(v(),z("section",null,[c(R,{justify:"center",align:"center",class:"h-100"},{default:h(()=>[c(V,{cols:"auto",class:"p-0"},{default:h(()=>[c(Z,{width:120,src:qe})]),_:1})]),_:1}),n.info?(v(),k(R,{key:0},{default:h(()=>[c(V,{cols:"12",class:"text-center pt-0"},{default:h(()=>a[0]||(a[0]=[g("h1",{class:"text-h4 font-weight-bold",style:{color:"#8dbe26"}},"Fortalece Tu Mercado",-1)])),_:1,__:[0]}),c(V,null,{default:h(()=>{var r,l;return[g("div",Ue,[a[4]||(a[4]=g("h4",null,"Información",-1)),g("ul",$e,[g("li",Le,[g("div",Xe,[c(H,null,{default:h(()=>a[1]||(a[1]=[C("mdi-book-open-variant")])),_:1,__:[1]}),a[2]||(a[2]=C(" TEMA DE CAPACITACIÓN: "))]),g("p",{style:{"line-height":".85"},innerHTML:t((r=n.info)==null?void 0:r.hora)},null,8,Ze)]),g("li",null,[c(H,null,{default:h(()=>a[3]||(a[3]=[C("mdi-map-marker")])),_:1,__:[3]}),C(" LUGAR: "+U((l=n.info)==null?void 0:l.address),1)])])])]}),_:1})]),_:1})):A("",!0)]))}},Ge={class:"custom-form-mercado"},Qe={class:"text-center"},Je={style:{"text-align":"center",margin:"auto"}},Ke={__name:"FortaleceTuMercadoForm",props:{dateOptions:{type:Array,default:()=>[]}},setup(n){const t=n,e=j({socials:[]});b(!1);const a=j({}),r=$();ce();const l=b(!1),u=b(1),m=b(!1);S("formState",e),S("loadingStates",a),S("loadingSubmit",l);const d=j([{type:"title",label:"Fecha del evento",md:12},{type:"select",label:"Seleccionar una fecha",model:"fechaRegistro",required:!0,options:t.dateOptions},{type:"title",label:"Datos Personales ( Representante )",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!1},{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!1,max:11,disabled:!1},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!1},{type:"text",label:"Rubro o Actividad de la empresa",model:"comercialActivity",required:!1},{type:"text",label:"Mercado al que pertenece",model:"mercado",required:!0}]),s=b({visible:!1,message:"",color:"error"}),y=fe(),P=b(!1);Y(P,o=>{y.global.name.value=o?"dark":"light"}),Y(()=>e.birthday,o=>{o?e.age=`${ee(o)}`:e.age=null});function ee(o){const[i,f,p]=o.split("/").map(Number);if(!i||!f||!p)return null;const N=new Date(p,f-1,i),T=new Date;let O=T.getFullYear()-N.getFullYear();return T.getMonth()>N.getMonth()||T.getMonth()===N.getMonth()&&T.getDate()>=N.getDate()||O--,O}const te=()=>{e.fechaRegistro=null,e.typedocument_id=null,e.documentnumber=null,e.lastname=null,e.name=null,e.middlename=null,e.gender_id=null,e.phone=null,e.email=null,e.ruc=null,e.comercialName=null,e.comercialActivity=null,e.mercado=null},ae=o=>{const i=d.find(f=>f.model===o);u.value==1&&o=="ruc"&&(e.ruc=null,e.razonSocial=null,i.disabled=!i.disabled),o=="documentnumber"&&(e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null)},ne=()=>{["name","lastname","middlename"].forEach(o=>{const i=d.find(f=>f.model===o);i&&(i.disabled=!0)})},re=(o,i)=>{if(o.model=="typedocument_id"){const f=d.find(p=>p.model==="documentnumber");f.disabled=!1,e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null}if(o.model=="typedocument_id"){const f=d.find(p=>p.model==="documentnumber");o.value==1?(f.max=8,ne()):f.max=9}},oe=async o=>{if(o=="ruc")return ie();if(o=="documentnumber")return se()},se=async()=>{try{const o={slug:r.params.slug,documentnumber:e.documentnumber},i=await M({url:"events-pnte/is-this-user-registered-mercado",method:"POST",data:o});if(i.status==200)return e.typedocument_id=null,e.documentnumber=null,a.documentnumber=!1,s.value.message=i.message,m.value=!0;if(i.status==404){const f=await M({url:`api/consult-businessman-dni/${e.documentnumber}`,method:"POST"});if(f.status==200){const{data:p}=f;e.lastname=p.lastname,e.middlename=p.middlename,e.name=p.name,e.gender_id=p.gender_id,e.phone=p.phone,e.birthday=X(p.birthday).format("DD/MM/YYYY"),a.documentnumber=!1}}else return console.log(i)}catch(o){console.log("Error: ",o)}},ie=async()=>{try{const o=await M({url:`api/consult-company-ruc/${e.ruc}`,method:"POST"});if(o.status==200){const{data:i}=o;e.comercialName=i.socialReason,a.ruc=!1}}catch(o){console.log("Error: ",o)}},le=async()=>{l.value=!0;const o={fechaRegistro:e.fechaRegistro,typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,lastname:e.lastname,middlename:e.middlename,name:e.name,gender_id:e.gender_id,phone:e.phone,email:e.email??null,ruc:e.ruc??null,comercialName:e.comercialName??null,comercialActivity:e.comercialActivity??null,mercado:e.mercado,slug:r.params.slug};try{(await M({url:"public/attendance-present",method:"POST",data:o})).status==200?(te(),s.value.message="¡Se ha registrado tu asistencia con éxito!",s.value.color="success",s.value.visible=!0):(s.value.message="¡Ha ocurrido un error!",s.value.visible=!0)}catch{l.value=!1,s.value.message=message,s.value.visible=!0}finally{l.value=!1}},{loadTypeDocuments:de,loadGenders:me}=_e(d);return L(async()=>{await de(),await me()}),(o,i)=>(v(),z("div",Ge,[c(ve,{colorForm:"#8dbe26",fields:d,onSearchDataApi:oe,onSubmit:le,onChange:re,onHandleClearSearch:ae},null,8,["fields"]),c(De,{modelValue:s.value.visible,"onUpdate:modelValue":i[0]||(i[0]=f=>s.value.visible=f),color:s.value.color,top:"",right:""},{default:h(()=>[g("p",Qe,U(s.value.message),1)]),_:1},8,["modelValue","color"]),c(be,{transition:"dialog-bottom-transition",modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=f=>m.value=f),"max-width":"340"},{default:h(()=>[c(B,null,{default:h(()=>[c(we,null,{default:h(()=>[g("div",Je,[c(Z,{width:60,src:ye,style:{margin:"auto"}}),i[2]||(i[2]=g("span",{style:{display:"block","margin-top":"1rem"}},"¡Ya te has registrado en este evento! No necesitas volver a hacerlo.",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},et={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},tt=(n,t,e)=>{let a;const r=et[n];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"en "+a:"hace "+a:a},at={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},nt={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},rt={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ot={date:W({formats:at,defaultWidth:"full"}),time:W({formats:nt,defaultWidth:"full"}),dateTime:W({formats:rt,defaultWidth:"full"})},st={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},it={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},lt=(n,t,e,a)=>t.getHours()!==1?it[n]:st[n],dt={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},mt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},ut={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},ct={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},ft={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},ht={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},pt=(n,t)=>Number(n)+"º",gt={ordinalNumber:pt,era:_({values:dt,defaultWidth:"wide"}),quarter:_({values:mt,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:_({values:ut,defaultWidth:"wide"}),day:_({values:ct,defaultWidth:"wide"}),dayPeriod:_({values:ft,defaultWidth:"wide",formattingValues:ht,defaultFormattingWidth:"wide"})},bt=/^(\d+)(º)?/i,yt=/\d+/i,vt={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},_t={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Dt={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},wt={any:[/1/i,/2/i,/3/i,/4/i]},Mt={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Pt={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Nt={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Tt={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Ct={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},xt={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Vt={ordinalNumber:Ne({matchPattern:bt,parsePattern:yt,valueCallback:function(n){return parseInt(n,10)}}),era:D({matchPatterns:vt,defaultMatchWidth:"wide",parsePatterns:_t,defaultParseWidth:"any"}),quarter:D({matchPatterns:Dt,defaultMatchWidth:"wide",parsePatterns:wt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:D({matchPatterns:Mt,defaultMatchWidth:"wide",parsePatterns:Pt,defaultParseWidth:"any"}),day:D({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:Tt,defaultParseWidth:"any"}),dayPeriod:D({matchPatterns:Ct,defaultMatchWidth:"any",parsePatterns:xt,defaultParseWidth:"any"})},jt={code:"es",formatDistance:tt,formatLong:ot,formatRelative:lt,localize:gt,match:Vt,options:{weekStartsOn:1,firstWeekContainsDate:1}},St={key:0,class:"mercado"},Wt={__name:"[slug]",setup(n){ue("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const t=$(),e=b({}),a=b(!0),r=b([]),l=async()=>{try{const u=t.params.slug,m=await M({url:`public/data-attendance/${u}`,method:"GET"});if(m.status==200){e.value=(m==null?void 0:m.data)||{};const d=m.data,s=q(d.startDate),y=q(d.endDate);r.value=Ce({start:s,end:y}).map(P=>({label:I(P,"dd/MM/yyyy",{locale:jt}),value:I(P,"dd/MM/yyyy")}))}}catch(u){console.error("Error de red:",u)}finally{a.value=!1}};return L(async()=>{await l()}),(u,m)=>(v(),k(Me,{class:"fill-height",fluid:""},{default:h(()=>[c(R,{align:"center",justify:"center"},{default:h(()=>[c(V,{cols:"12",sm:"10",md:"8",lg:"6"},{default:h(()=>[c(pe,{"model-value":a.value,class:"align-center justify-center",persistent:"",scrim:""},{default:h(()=>[c(ge,{color:"#8dbe26",size:"64",indeterminate:""})]),_:1},8,["model-value"]),a.value?A("",!0):(v(),k(B,{key:0,elevation:"4",rounded:"lg"},{default:h(()=>{var d;return[(d=e.value)!=null&&d.slug?(v(),z("section",St,[c(Be,{info:e.value},null,8,["info"]),c(Ke,{dateOptions:r.value},null,8,["dateOptions"])])):A("",!0)]}),_:1}))]),_:1})]),_:1})]),_:1}))}},ea=he(Wt,[["__scopeId","data-v-e6ef6cac"]]);export{ea as default};
