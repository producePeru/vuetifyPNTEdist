import{_ as B}from"./mp-logo-CPdgfx02.js";import{u as I}from"./usePageMeta-Ccp0vYGM.js";import{h as g}from"./httpRequest-B4w4n6I1.js";import{_ as E}from"./FormComponent-C9eXRhEV.js";import{u as O}from"./useFormOptions-DXP8M4Jp.js";import{ad as z,r as l,$ as _,Z as P,a1 as G,w as H,o as L,c as p,b as m,R as b,j as r,i as a,z as v,P as Z,Q as i}from"./index-C0BxnROc.js";import"./VDialog-B-EaVIof.js";import{V as Q}from"./VContainer-CarOZzXr.js";import{V,a as w}from"./VRow-TNJBDYyf.js";import{V as U}from"./VCard-CLncIZC_.js";import{V as J}from"./VImg-C-C_kDdR.js";import"./index-BJsfWxQv.js";import"./VSnackbar-DdXsE4ar.js";import"./VList-LYmgYoeL.js";import"./VAvatar-BlteH7pT.js";import"./ssrBoot-CifwsCzt.js";import"./VForm-CY7Wuu6-.js";const K={key:0,class:"mp-form-consulting"},W={key:1},X={key:2},Y={__name:"FormMujerProduceDiagnostico",setup(R){const x=z(),u=l(!1),F=_({});P();const T=G(),d=l(!1),j=l(1),t=_({}),c=l(1);v("formState",t),v("loadingStates",F),v("loadingSubmit",d);const n=_([{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"",label:"",model:"razonSocial"},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1}]),h=l([{type:"checkbox",label:'Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Nacional "Tu Empresa", según la Ley N.º 29733',model:"autorization",required:!0,md:12,rows:3}]);H(u,o=>{x.global.name.value=o?"dark":"light"});const S=o=>{const e=n.find(s=>s.model===o);j.value==1&&o=="ruc"&&(e.disabled=!e.disabled)},k=async(o,e)=>{if(o.model==="typedocument_id"){const s=n.find(y=>y.model==="documentnumber");if(!s)return;const f={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},C=f[o.value]||f.default;s.max=C.max,o.value,["name","lastname","middlename"].forEach(y=>{const N=n.find($=>$.model===y);N&&(N.disabled=C.autolockNames)}),s.disabled=!1}if(o.model==="documentnumber"){const s=n.find(f=>f.model==="documentnumber");s&&(s.disabled=!1)}},q=async()=>{d.value=!0;const o={ruc:t.ruc,typedocument_id:t.typedocument_id,documentnumber:t.documentnumber};try{const e=await g({url:"mp/register-consulting",method:"POST",data:o});if(e.status==404)return T.push("/mujer-produce");e.status==200&&(console.log("Response: ",e),t.ruc=e.data.ruc,t.documentnumber=e.data.doc_number,Object.assign(t,e.data.questionnaire??{}),c.value=2)}catch(e){console.log("Error: ",e)}finally{d.value=!1}},D=async()=>{d.value=!0;const o=t;try{(await g({url:"mp/register-diagnostic-response",method:"POST",data:o})).status==200&&(c.value=3)}catch(e){console.log("Error: ",e)}finally{d.value=!1}},M=async()=>{try{const o=await g({url:"mp/question-diagnostic",method:"GET"});h.value=[...(o==null?void 0:o.data)||[],...h.value]}catch(o){console.error("Error de red:",o)}finally{}},{loadTypeDocuments:A}=O(n);return L(async()=>{await A(),t.typedocument_id=1,await M()}),(o,e)=>(m(),p("div",null,[c.value==1?(m(),p("div",K,[e[0]||(e[0]=r("h3",{class:"mb-10",style:{color:"#d41a75"}}," Inicie el proceso de su diagnóstico. ",-1)),a(E,{colorForm:"#d41a75",fields:n,onSubmit:q,onChange:k,onHandleClearSearch:S,nameBtnSend:"EMPEZAR"},null,8,["fields"])])):b("",!0),c.value==2?(m(),p("div",W,[e[1]||(e[1]=r("h4",{class:"mb-10",style:{color:"#d41a75"}},"Por favor, complete el siguiente formulario para obtener su diagnóstico empresarial.",-1)),a(E,{colorForm:"#d41a75",fields:h.value,onSubmit:D,onChange:k,onHandleClearSearch:S},null,8,["fields"])])):b("",!0),c.value==3?(m(),p("div",X,e[2]||(e[2]=[r("h1",{class:"mb-8",style:{color:"#d41a75"}}," Tu diagnóstico empresarial es: ",-1)]))):b("",!0)]))}},ee={class:"mp-header mp"},oe={style:{height:"250px",display:"flex","justify-content":"center","flex-direction":"column"}},te={class:"mp",style:{"min-height":"calc(100vh - 375px)"}},ve={__name:"index",setup(R){return I("Mujer Produce | Registro","Formulario de registro para el Evento de Producción de Mujeres","mp.ico"),P(),l(!0),l({}),(x,u)=>(m(),Z(Q,{class:"py-0",fluid:""},{default:i(()=>[a(V,{align:"center",justify:"center"},{default:i(()=>[a(w,{cols:"12",sm:"12",md:"10",lg:"8",xl:"7",class:"my-2"},{default:i(()=>[a(U,{elevation:"8",rounded:"lg",class:"h-100"},{default:i(()=>[r("div",ee,[a(V,null,{default:i(()=>[a(w,null,{default:i(()=>[r("div",oe,[r("div",null,[a(J,{width:100,src:B}),u[0]||(u[0]=r("h1",{style:{"line-height":"1.3",color:"#fff"}},"DIAGNÓSTICO EMPRESARIAL",-1))])])]),_:1})]),_:1})]),r("div",te,[a(Y)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ve as default};
