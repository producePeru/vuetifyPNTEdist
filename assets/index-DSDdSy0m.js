import{_ as B}from"./mp-D70lmokk.js";import{u as O}from"./usePageMeta-p_2krCOU.js";import{h}from"./httpRequest-D3KC4pOG.js";import{_ as E}from"./FormComponent-Dan6025K.js";import{u as $}from"./useFormOptions-BD_ZbAMu.js";import{L as z,r as n,i as y,u as R,k as H,H as L,o as G,c as p,b as u,m as b,d as r,e as a,M as v,_ as U,f as Z,w as d}from"./index-DrJthm_x.js";import"./VDialog-CLRRPlg2.js";import{V as J}from"./VContainer-BhAFUXxo.js";import{a as V,V as w}from"./VRow-BAmXNZ8k.js";import{V as K}from"./VCard-C6GiEXmi.js";import{V as Q}from"./VAvatar-DpAmwuzc.js";import"./index-CIBJ_uUm.js";import"./VSnackbar-BATBkjPY.js";import"./VList-CAyeD5lB.js";import"./VForm-C42EphJ8.js";const W={key:0,class:"mp-form-consulting"},X={key:1,class:"mp-form-diagniostico"},Y={key:2},ee={__name:"FormMujerProduceDiagnostico",setup(F){const x=z(),l=n(!1),P=y({});R();const M=H(),c=n(!1),T=n(1),t=y({}),m=n(1);v("formState",t),v("loadingStates",P),v("loadingSubmit",c);const i=y([{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"",label:"",model:"razonSocial"},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1}]),_=n([{type:"checkbox",label:'Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Nacional "Tu Empresa", según la Ley N.º 29733',model:"autorization",required:!0,md:12,rows:3}]);L(l,e=>{x.global.name.value=e?"dark":"light"});const S=e=>{const o=i.find(s=>s.model===e);T.value==1&&e=="ruc"&&(o.disabled=!o.disabled)},k=async(e,o)=>{if(e.model==="typedocument_id"){const s=i.find(g=>g.model==="documentnumber");if(!s)return;const f={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},C=f[e.value]||f.default;s.max=C.max,e.value,["name","lastname","middlename"].forEach(g=>{const N=i.find(I=>I.model===g);N&&(N.disabled=C.autolockNames)}),s.disabled=!1}if(e.model==="documentnumber"){const s=i.find(f=>f.model==="documentnumber");s&&(s.disabled=!1)}},j=async()=>{c.value=!0;const e={ruc:t.ruc,typedocument_id:t.typedocument_id,documentnumber:t.documentnumber};try{const o=await h({url:"mp/register-consulting",method:"POST",data:e});if(o.status==404)return M.push("/mujer-produce");o.status==200&&(console.log("Response: ",o),t.ruc=o.data.ruc,t.documentnumber=o.data.doc_number,Object.assign(t,o.data.questionnaire??{}),m.value=2)}catch(o){console.log("Error: ",o)}finally{c.value=!1}},q=async()=>{c.value=!0;const e=t;try{(await h({url:"mp/register-diagnostic-response",method:"POST",data:e})).status==200&&(m.value=3)}catch(o){console.log("Error: ",o)}finally{c.value=!1}},D=async()=>{try{const e=await h({url:"mp/question-diagnostic",method:"GET"});_.value=[...(e==null?void 0:e.data)||[],..._.value]}catch(e){console.error("Error de red:",e)}finally{}},{loadTypeDocuments:A}=$(i);return G(async()=>{await A(),t.typedocument_id=1,await D()}),(e,o)=>(u(),p("div",null,[m.value==1?(u(),p("div",W,[o[0]||(o[0]=r("h3",{class:"mb-10",style:{color:"#7d4fc6"}}," Inicie el proceso de su diagnóstico. ",-1)),a(E,{colorForm:"#7d4fc6",fields:i,onSubmit:j,onChange:k,onHandleClearSearch:S,nameBtnSend:"EMPEZAR"},null,8,["fields"])])):b("",!0),m.value==2?(u(),p("div",X,[a(E,{colorForm:"#7d4fc6",fields:_.value,onSubmit:q,onChange:k,onHandleClearSearch:S},null,8,["fields"])])):b("",!0),m.value==3?(u(),p("div",Y,o[1]||(o[1]=[r("h1",{class:"mb-8",style:{color:"#7d4fc6"}}," diagnóstico enviado. ",-1)]))):b("",!0)]))}},oe={class:"mp-header mp"},te={style:{height:"250px",display:"flex","justify-content":"center","flex-direction":"column"}},ae={class:"mp",style:{"min-height":"calc(100vh - 375px)"}},se={__name:"index",setup(F){return O("Mujer Produce | Registro","Formulario de registro para el Evento de Producción de Mujeres","mp.ico"),R(),n(!0),n({}),(x,l)=>(u(),Z(J,{class:"py-0",fluid:""},{default:d(()=>[a(V,{align:"center",justify:"center"},{default:d(()=>[a(w,{cols:"12",sm:"12",md:"10",lg:"8",xl:"7",class:"my-2"},{default:d(()=>[a(K,{elevation:"8",rounded:"lg",class:"h-100"},{default:d(()=>[r("div",oe,[a(V,null,{default:d(()=>[a(w,null,{default:d(()=>[r("div",te,[r("div",null,[a(Q,{width:100,src:B}),l[0]||(l[0]=r("h1",{class:"mp-diagnostico-title"},"DIAGNÓSTICO",-1)),l[1]||(l[1]=r("h2",{class:"mp-diagnostico-sub-title"},"EMPRESARIAL",-1))])])]),_:1})]),_:1})]),r("div",ae,[a(ee)])]),_:1})]),_:1})]),_:1})]),_:1}))}},ve=U(se,[["__scopeId","data-v-0dc8bd04"]]);export{ve as default};
