import{u as re}from"./usePageMeta-CPOeJUZK.js";import{h as E}from"./httpRequest-kvSXxSoU.js";import{_ as T,c as V,o as v,w as r,b as u,j as se,f as D,a as n,J as de,I as N,e as M,C,x as k,r as h,v as z,A as ce,L as ue,m as I,y as B,t as me,K as pe,M as R,z as fe,B as _e}from"./index-dWNYWhpY.js";import{_ as ve}from"./EventFinalized-PV40lD53.js";import{_ as ye}from"./SedHeader-BTsRkNWq.js";import{_ as be}from"./verificacion-DI9pvaX9.js";import{_ as ge}from"./FormComponent-lWGCVD7C.js";import{V as P,b as he}from"./VCard-Cj-megdD.js";import{V as O}from"./VDialog-DrEqSYXz.js";import{u as Se}from"./useFormOptions-DNeVbNCH.js";import{d as xe}from"./dayjs.min-BtSaZe5p.js";import{V as Ee}from"./VSnackbar-DSV00IUq.js";import{V as we}from"./VAvatar-CxNTBaGS.js";/* empty css                                                                        */import{V as A,a as Ce}from"./VRow-BW3cWDhU.js";import{V as Ve}from"./VContainer-Dj-hXi5d.js";/* empty css                                                       */import"./sed-robot-BghC5CVp.js";import"./es-BO9gdNdk.js";import"./index-CaSN-WZq.js";import"./VTooltip-BfCWSEzK.js";import"./VForm-kRstKBy2.js";const qe={};function De(S,e){return v(),V(A,{cols:"12",class:"mt-8"},{default:r(()=>e[0]||(e[0]=[u("div",{class:"pp03-date"},[u("h4",null," ¡Recordatorio importante para tu Sesión de Entrenamiento Digital! "),u("p",{class:"my-2"},"Para que vivas una experiencia memorable y provechosa, te pedimos tener en cuenta lo siguiente:"),u("ol",{class:"pl-4",style:{"font-size":"14px"}},[u("li",null,"Traer una laptop, tablet o smartphone para participar en los laboratorios tecnológicos."),u("li",null,"Llevar una extensión eléctrica para poder conectar tu equipo al punto de corriente."),u("li",null,"Disponer del tiempo completo para participar desde el inicio hasta el final del entrenamiento."),u("li",null,"Traer tu DNI.")])],-1)])),_:1,__:[0]})}const $e=T(qe,[["render",De]]),ke={class:"text-center pa-4"},Re={class:"d-flex align-center justify-space-between ga-4 w-100"},Ne={__name:"ModalRegistered",props:{dialog:{type:Boolean,default:!1}},emits:["update:dialog","dialog-change"],setup(S,{emit:e}){const s=S,d=e,p=se({get:()=>s.dialog,set:c=>d("update:dialog",c)}),y=c=>{d("dialog-change",c)};return(c,l)=>(v(),D("div",ke,[n(O,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=b=>p.value=b),"max-width":"400",persistent:""},{default:r(()=>[n(P,{"prepend-icon":"mdi-account-group",text:"¿Deseas registrar un nuevo invitado al evento?",title:"Invitado"},{actions:r(()=>[n(de),u("div",Re,[n(N,{onClick:l[0]||(l[0]=b=>y(!1)),color:"grey-darken-1",variant:"outlined",style:{border:"none"}},{default:r(()=>l[3]||(l[3]=[M(" No, gracias ")])),_:1,__:[3]}),n(N,{onClick:l[1]||(l[1]=b=>y(!0)),color:"#02e4a5",variant:"elevated",style:{color:"#fff"}},{default:r(()=>l[4]||(l[4]=[M(" Si, registrar ")])),_:1,__:[4]})])]),_:1})]),_:1},8,["modelValue"])]))}},Me={key:0},Te=["innerHTML"],Pe={class:"d-flex justify-center mt-12"},Ae={__name:"SedPresentation",props:{infoEvent:{type:Object,required:!0,default:()=>({})},color:{type:String,default:"primary"}},emits:["handleInscription"],setup(S,{emit:e}){const s=e,d=()=>{s("handleInscription")};return(p,y)=>(v(),V(A,{cols:"12",class:"mt-8"},{default:r(()=>[S.infoEvent?(v(),D("div",Me,[u("div",{innerHTML:S.infoEvent.description},null,8,Te),u("div",Pe,[n(N,{color:S.color,elevation:"2",variant:"flat",class:"btn-sed-presentation",onClick:d},{default:r(()=>y[0]||(y[0]=[M(" INSCRIBIRME ")])),_:1,__:[0]},8,["color"])])])):C("",!0)]),_:1}))}},Fe=T(Ae,[["__scopeId","data-v-7ca2d4e9"]]),Ie={class:"custom-form"},ze={class:"text-center"},Be={style:{"text-align":"center",margin:"auto"}},Oe={__name:"SedForm",setup(S){const e=k({socials:[]}),s=h(!1),d=k({}),p=z(),y=ce(),c=h(!1),l=h(1),b=h(!1);R("formState",e),R("loadingStates",d),R("loadingSubmit",c);const f=k([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[],disabled:!1},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[],disabled:!1},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[],disabled:!1},{type:"select",label:"Región",model:"city_id",required:!0,options:[],disabled:!1},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[],disabled:!1},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[],disabled:!1},{type:"text",label:"Dirección",model:"address",required:!0,disabled:!1},{type:"title",label:"Datos Personales",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"text",label:"Cargo en la empresa",model:"cargo_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"number",label:"Edad",model:"age",required:!0,max:2,minLength:2},{type:"title",label:"Detalles",md:12},{type:"select",label:"¿Cómo se enteró del evento?",model:"howKnowEvent_id",required:!0,options:[]}]),g=h({visible:!1,message:"",color:"error"}),j=ue(),Y=h(!1);I(Y,a=>{j.global.name.value=a?"dark":"light"}),I(()=>e.birthday,a=>{a?e.age=`${L(a)}`:e.age=null});function L(a){const[i,t,o]=a.split("/").map(Number);if(!i||!t||!o)return null;const m=new Date(o,t-1,i),_=new Date;let w=_.getFullYear()-m.getFullYear();return _.getMonth()>m.getMonth()||_.getMonth()===m.getMonth()&&_.getDate()>=m.getDate()||w--,w}const U=()=>{e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.birthday=null,e.cargo_id=null,e.age=null},G=(a=!0)=>{["ruc","razonSocial","comercialName","typeContribuyente_id","economicsector_id","rubro_id","comercialactivity_id","city_id","province_id","district_id","address"].forEach(t=>{const o=f.find(m=>m.model===t);o&&(o.disabled=a)})},H=a=>{const i=f.find(t=>t.model===a);l.value==1&&a=="ruc"&&(e.ruc=null,e.razonSocial=null,i.disabled=!i.disabled),a=="documentnumber"&&(e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null)},K=()=>{["name","lastname","middlename"].forEach(a=>{const i=f.find(t=>t.model===a);i&&(i.disabled=!1)})},J=()=>{["name","lastname","middlename"].forEach(a=>{const i=f.find(t=>t.model===a);i&&(i.disabled=!0)})},Q=(a,i)=>{if(a.model=="typedocument_id"){const t=f.find(o=>o.model==="documentnumber");t.disabled=!1,U()}if(a.model=="city_id"){e.province_id=null,e.district_id=null;const t=`select/provinces/${a.value}`;$(t,"province_id")}if(a.model=="province_id"){e.district_id=null;const t=`select/districts/${a.value}`;$(t,"district_id")}if(a.model=="typedocument_id"){const t=f.find(o=>o.model==="documentnumber");a.value==1?(t.max=8,J()):t.max=9}},W=async a=>{let i=null;if(a=="ruc"&&(i=`api/consult-company-ruc/${e.ruc}`),a=="documentnumber"){const t={slug:p.params.slug,documentnumber:e.documentnumber},o=await E({url:"events-pnte/is-this-user-registered",method:"POST",data:t});if(o.status==200)return e.typedocument_id=null,e.documentnumber=null,d[a]=!1,g.value.message=o.message,b.value=!0;if(e.typedocument_id=="1")i=`api/consult-businessman-dni/${e.documentnumber}`;else return K(),d[a]=!1}try{const t=await E({url:i,method:"POST"});if(t.status==200){const{data:o}=t;if(a=="ruc"){if(e.comercialactivity_id=o.comercialactivity_id,e.condicion=o.condicion,e.address=o.address,e.estado=o.nameService,e.razonSocial=o.socialReason??null,e.city_id=o.region_id,e.estado=o.estado,e.condicion=o.condicion,o.region_id){const m=`select/provinces/${o.region_id}`;$(m,"province_id"),e.province_id=o.provincia_id}e.comercialName=o.rubro_id,e.economicsector_id=o.sectorEconomico_id}a=="documentnumber"&&(e.lastname=o.lastname,e.middlename=o.middlename,e.name=o.name,e.gender_id=o.gender_id,e.phone=o.phone,e.birthday=xe(o.birthday).format("DD/MM/YYYY"))}}catch(t){t.response.data&&(g.value.message=t.response.data.message,g.value.visible=!0)}finally{d[a]=!1}},X=async()=>{var o,m;c.value=!0;const a={ruc:e.ruc,socialReason:e.razonSocial,economicsector_id:e.economicsector_id,category_id:e.rubro_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,nameService:e.estado,condicion:e.condicion},i={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,name:e.name,lastname:e.lastname,middlename:e.middlename,gender_id:e.gender_id,birthday:e.birthday,phone:e.phone},t={ruc:e.ruc,comercialName:e.comercialName,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,category_id:e.rubro_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,typeAsistente:l.value,documentnumber:e.documentnumber,sick:e.sick,phone:e.phone,email:e.email,positionCompany:e.cargo_id,howKnowEvent_id:e.howKnowEvent_id,slug:p.params.slug,age:e.age,name:e.name,lastname:e.lastname};try{(await E({url:"events-pnte/company",method:"POST",data:a})).status===200&&(await E({url:"events-pnte/businessman",method:"POST",data:i})).status===200&&(await E({url:"events-pnte/participant-registration-sed",method:"POST",data:t})).status==200&&(l.value==1&&(s.value=!0),l.value==2&&y.push(`/registrado/${p.params.slug}`))}catch(_){c.value=!1;const w=(o=_.response)==null?void 0:o.status,q=(m=_.response)==null?void 0:m.data;if(!w){const F=_.request?"No se recibió respuesta del servidor.":`Error al configurar la solicitud: ${_.message}`;return console.error(F,_),{message:F,status:500}}let x=(q==null?void 0:q.message)||"Error inesperado";switch(w){case 422:x=`Error de validación: ${x}`;break;case 404:x=`Recurso no encontrado: ${x}`;break;case 500:x=`Error del servidor: ${x}`;break;default:console.error("Error inesperado con respuesta:",_)}g.value.message=x,g.value.visible=!0}finally{c.value=!1}},Z=a=>{if(a)e.typedocument_id=null,e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.cargo_id=null,e.birthday=null,e.age=null,l.value=2,G(!0),s.value=!1,pe(()=>{const i=document.querySelector('[data-model="typedocument_id"]');i&&(i.scrollIntoView({behavior:"smooth",block:"center"}),i.focus())});else return y.push(`/registrado/${p.params.slug}`)},$=async(a,i)=>{try{const t=await E({url:a,method:"GET"}),o=f.find(m=>m.model===i);o&&t.data&&(o.options=t.data)}catch(t){console.error("Error de red:",t)}},{loadSectorEconomico:ee,loadRubros:te,loadActividadComercial:ae,loadCity:oe,loadTypeDocuments:ie,loadGenders:le,loadPropagandaMedia:ne}=Se(f);return B(async()=>{await ee(),await te(),await ae(),await oe(),await ie(),await le(),await ne()}),(a,i)=>(v(),D("div",Ie,[n(ge,{colorForm:"#02E4A5",fields:f,onSearchDataApi:W,onSubmit:X,onChange:Q,onHandleClearSearch:H},null,8,["fields"]),n(Ee,{modelValue:g.value.visible,"onUpdate:modelValue":i[0]||(i[0]=t=>g.value.visible=t),color:g.value.color,top:"",right:""},{default:r(()=>[u("p",ze,me(g.value.message),1)]),_:1},8,["modelValue","color"]),n(Ne,{dialog:s.value,"onUpdate:dialog":i[1]||(i[1]=t=>s.value=t),onDialogChange:Z},null,8,["dialog"]),n(O,{transition:"dialog-bottom-transition",modelValue:b.value,"onUpdate:modelValue":i[2]||(i[2]=t=>b.value=t),"max-width":"340"},{default:r(()=>[n(P,null,{default:r(()=>[n(he,null,{default:r(()=>[u("div",Be,[n(we,{width:60,src:be,style:{margin:"auto"}}),i[3]||(i[3]=u("span",{style:{display:"block","margin-top":"1rem"}},"¡Ya te has registrado en este evento! No necesitas volver a hacerlo.",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},je={key:0,class:"sed"},Ye={key:1,class:"sed"},Le={__name:"[slug]",setup(S){re("SED | Sesión de Entrenamiento Digital","Formulario de Fortalece tu Mercado","sed-pnte.ico");const e=z(),s=h({}),d=h(1),p=h(!0),y=async()=>{try{const c=e.params.slug,l=await E({url:`public/event-sed-details/${c}`,method:"GET"});s.value=(l==null?void 0:l.data)||{}}catch(c){console.error("Error de red:",c)}finally{p.value=!1}};return B(async()=>{await y()}),(c,l)=>(v(),V(Ve,{class:"fill-height",fluid:""},{default:r(()=>[n(Ce,{align:"center",justify:"center"},{default:r(()=>[n(A,{cols:"12",sm:"10",md:"8",lg:"6"},{default:r(()=>[n(fe,{"model-value":p.value,class:"align-center justify-center",persistent:"",scrim:""},{default:r(()=>[n(_e,{color:"#02e4a5",size:"64",indeterminate:""})]),_:1},8,["model-value"]),p.value?C("",!0):(v(),V(P,{key:0,elevation:"4",rounded:"lg"},{default:r(()=>{var b,f;return[((b=s.value)==null?void 0:b.status)==404?(v(),D("section",je,[n(ve,{info:s.value},null,8,["info"])])):C("",!0),(f=s.value)!=null&&f.slug?(v(),D("section",Ye,[n(ye,{info:s.value,color:"#02e4a5",slideActive:d.value},null,8,["info","slideActive"]),d.value==1?(v(),V(Fe,{key:0,infoEvent:s.value,color:"#02e4a5",onHandleInscription:l[0]||(l[0]=g=>d.value=2)},null,8,["infoEvent"])):C("",!0),d.value==2?(v(),V(Oe,{key:1})):C("",!0),n($e)])):C("",!0)]}),_:1}))]),_:1})]),_:1})]),_:1}))}},pt=T(Le,[["__scopeId","data-v-74078314"]]);export{pt as default};
