import{r as p,f as D,o as f,b as d,a as l,w as r,n as fe,t as T,e as g,V as E,X as ye,Y as B,G as K,_ as be,R as P,S as $e,c as I,J as Ve,Q as he,T as we,O as R,a1 as Ie,W as n,$ as h,a2 as F,a3 as L}from"./index-C6UJOEbT.js";import{F as Ce,_ as Ee}from"./Footer-Ck_SUSkz.js";import{u as _e}from"./usePageMeta-CVBkCf1G.js";import{c as u,r as b,a as Ae,e as xe,m as Te,u as ke,V as Ne,d as O,b as j}from"./VTooltip-DiSm9Upx.js";import{h as $,E as Me}from"./EventoCaducado-lGByL7Rn.js";import{V as m,a as X,b as _}from"./VAvatar-CF4HbrgM.js";import{a as Y,V as J}from"./VDialog-BHyp_725.js";import{V as U}from"./VContainer-QqDoSsvr.js";import{V as H}from"./VSelect-Gi1HmlGV.js";const Se="/assets/logo-tu-mercado-BAC65nv4.png",Re={style:{"line-height":"2"}},Ue={style:{"list-style":"none","padding-left":"0"}},De={class:"px-8"},Be=["innerHTML"],Ge={__name:"EventoInformacionMercado",props:{color:String,title:String,eventType:String,info:Object,modal:Boolean},setup(y){const A=y,x=p(!0);return(k,i)=>(f(),D(K,null,[d("section",null,[l(_,{justify:"center",align:"center",class:"h-100"},{default:r(()=>[l(m,{cols:"auto"},{default:r(()=>[l(X,{width:100,src:Se})]),_:1})]),_:1}),l(_,null,{default:r(()=>[l(m,{cols:"12",class:"text-center"},{default:r(()=>{var c;return[d("h1",{class:"title",style:fe({color:y.color})},T((c=y.info)==null?void 0:c.title),5)]}),_:1}),l(m,null,{default:r(()=>{var c,C,V;return[d("div",Re,[i[5]||(i[5]=d("h4",null,"Información",-1)),d("ul",Ue,[d("li",null,[l(E,null,{default:r(()=>i[2]||(i[2]=[g("mdi-book-open-variant")])),_:1,__:[2]}),g(" TEMA DE CAPACITACIÓN: "+T((c=y.info)==null?void 0:c.hora),1)]),d("li",null,[l(E,null,{default:r(()=>i[3]||(i[3]=[g("mdi-map-marker")])),_:1,__:[3]}),g(" LUGAR: "+T((C=y.info)==null?void 0:C.address),1)]),d("li",null,[l(E,{left:""},{default:r(()=>i[4]||(i[4]=[g("mdi-calendar")])),_:1,__:[4]}),g(" FECHA: "+T((V=y.info)==null?void 0:V.fecha),1)])])])]}),_:1})]),_:1})]),l(J,{modelValue:A.modal,"onUpdate:modelValue":i[1]||(i[1]=c=>A.modal=c),"max-width":"500",persistent:""},{default:r(()=>[l(Y,{"prepend-icon":"mdi-alert-circle-outline",title:"Conoce los detalles para participar"},{actions:r(()=>[l(ye),l(B,{onClick:i[0]||(i[0]=c=>x.value=!1),color:y.color,variant:"flat",style:{color:"#fff"}},{default:r(()=>i[6]||(i[6]=[g(" PARTICIPAR ")])),_:1,__:[6]},8,["color"])]),default:r(()=>{var c;return[d("div",De,[d("p",{innerHTML:(c=y.info)==null?void 0:c.description},null,8,Be)])]}),_:1})]),_:1},8,["modelValue"])],64))}},qe={class:"pp03-background"},ze={class:"container-sm"},Pe={class:"mx-auto"},Fe={__name:"[slug]",setup(y){_e("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const A="6LdKGzorAAAAADqxi2yn8x9mHfTchbXYK1y6KRUb",x=he(),k=we(),i=p(!1),c=p(!1),C=p(null),V=p(!1),N=p(!1),G=p(!1),v=p("#8dbe26"),M=p(!1),S=p(!1),Q=P({typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,gender_id:null,phone:null,email:null,ruc:null,comercialName:null}),t=P({...Q});function w(o,...a){let e=t[o]||"";a.forEach(ge=>{switch(ge){case"trim":e=e.trim();break;case"capitalize":e=e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e;break;case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break}}),t[o]=e}const W=p([]),Z=p([]),q=p([]),z=p([]),ee=p([]),ae=async()=>{try{const o=await $({url:"select/economic-sectors",method:"GET"});W.value=o.data}catch(o){console.error("Error de red:",o)}},oe=async()=>{try{const o=await $({url:"select/type-documents",method:"GET"});q.value=o.data}catch(o){console.error("Error de red:",o)}},le=async()=>{try{const o=await $({url:"select/genders",method:"GET"});z.value=o.data}catch(o){console.error("Error de red:",o)}},te=async()=>{try{const o=await $({url:"select/comercial-activities",method:"GET"});Z.value=o.data}catch(o){console.error("Error de red:",o)}},re=async()=>{try{const o=await $({url:"select/rubros",method:"GET"});ee.value=o.data}catch(o){console.error("Error de red:",o)}},se=()=>{t.documentnumber=null},ne=async()=>{M.value=!0;try{const o=await $({url:`public/search-api-ruc/${t.ruc}`,method:"GET"});o.status==200&&(t.comercialName=o.data.comercialName,t.socialReason=o.data.socialReason,t.economicsector_id=o.data.economicsector_id,t.category_id=o.data.category_id,t.comercialactivity_id=o.data.comercialactivity_id,t.city_id=o.data.city_id)}catch(o){console.error("Error de red:",o)}finally{M.value=!1}},ie=async()=>{S.value=!0;try{const o=await $({url:`public/search-api-dni/${t.documentnumber}`,method:"GET"});o.status==200&&(t.name=o.data.name,t.lastname=o.data.lastname,t.middlename=o.data.middlename,t.gender_id=o.data.gender_id,t.phone=o.data.phone?+o.data.phone:null,t.email=o.data.email)}catch(o){console.error("Error de red:",o)}finally{S.value=!1}},de=async()=>{try{if(N.value=!0,await s.value.$validate(),s.value.$invalid){c.value=!0;return}const o={...t},a=await $({url:"public/attendance-present",method:"POST",data:o});if(a.status==200)return k.push(`/registrado/${x.params.slug}`);a.status==409&&(i.value=!0)}catch(o){console.error("Error ejecutando reCAPTCHA o registrando:",o)}finally{N.value=!1}},ue=async()=>{try{V.value=!0;const o=x.params.slug,a=await $({url:`public/data-attendance/${o}`,method:"GET"});if(a.status==400)return k.replace("/pagina-no-encontrada");if(a.status==500)return G.value=!0;const e=a.data;C.value=e,a.status==200&&(t.slug=e.slug,V.value=!1,await ae(),await oe(),await le(),await te(),await re())}catch(o){console.error("Error de red:",o)}finally{V.value=!1}};$e(async()=>{if(await ue(),!window.grecaptcha){const o=document.createElement("script");o.src=`https://www.google.com/recaptcha/api.js?render=${A}`,o.async=!0,document.head.appendChild(o)}});const me=u.withMessage("El número de RUC es incorrecto",u.regex(/^(10|15|20)\d{9}$/)),ce=u.withMessage("El número es incorrecto",u.regex(/^(9)\d{8}$/)),pe=u.withMessage("Corrige el número de documento",u.regex(/^\d+$/)),ve={typedocument_id:{required:u.withMessage("Seleccionar un tipo",b)},documentnumber:{required:u.withMessage("Ingresar número de documento",b),minLength:u.withMessage("Completa el número de identidad",Te(8)),validDni:pe},lastname:{required:u.withMessage("Ingresar apellido paterno",b)},middlename:{required:u.withMessage("Ingresar apellido materno",b)},name:{required:u.withMessage("Ingresar nombres",b)},gender_id:{required:u.withMessage("Seleccionar género",b)},phone:{required:u.withMessage("Ingresar número de celular",b),validPhone:ce},email:{email:u.withMessage("Correo electrónico inválido",xe)},ruc:{validRUC:me},comercialName:{maxLength:u.withMessage("Número máximo de caracteres permitidos: 120",Ae(120))},comercialActivity:{required:u.withMessage("Ingresar actividad de la empresa",b)},mercado:{required:u.withMessage("Ingresar nombre de mercado",b)}},s=ke(ve,t);return(o,a)=>(f(),D("section",qe,[d("div",ze,[l(Ve,{"model-value":V.value,class:"align-center justify-center",persistent:"",scrim:""},{default:r(()=>[l(R,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),G.value?(f(),I(U,{key:0,class:"pp03-container"},{default:r(()=>[l(Me)]),_:1})):(f(),D(K,{key:1},[V.value?(f(),I(U,{key:0,class:"pp03-container",style:{"min-height":"74.5vh"}})):(f(),I(U,{key:1,class:"pp03-container"},{default:r(()=>[l(Ge,{color:v.value,info:C.value,title:"SESIÓN DE ENTRETANIENTO DIGITAL",eventType:"sed"},null,8,["color","info"]),d("form",{onSubmit:Ie(de,["prevent"])},[a[25]||(a[25]=d("h4",{class:"form-title mt-6 mb-8"}," Datos Personales ( Representante ) ",-1)),l(_,null,{default:r(()=>[l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(H,{color:v.value,modelValue:t.typedocument_id,"onUpdate:modelValue":[a[0]||(a[0]=e=>t.typedocument_id=e),se],"error-messages":n(s).typedocument_id.$errors.map(e=>e.$message),items:q.value,label:"Tipo de documento","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:n(s).typedocument_id.$touch},null,8,["color","modelValue","error-messages","items","onChange"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.documentnumber,"onUpdate:modelValue":a[1]||(a[1]=e=>t.documentnumber=e),disabled:n(s).typedocument_id.$invalid,counter:t.typedocument_id==1?8:10,maxlength:t.typedocument_id==1?8:10,"error-messages":n(s).documentnumber.$errors.map(e=>e.$message),label:"Número de documento",density:"comfortable",variant:"outlined",onInput:n(s).documentnumber.$touch},{"append-inner":r(()=>[l(O,{text:"Click para buscar",location:"top"},{activator:r(({props:e})=>[S.value?(f(),I(R,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):F((f(),I(E,{key:1,class:"me-2 input-search",onClick:ie},{default:r(()=>a[22]||(a[22]=[g(" mdi-magnify ")])),_:1,__:[22]},512)),[[L,!n(s).documentnumber.$invalid]])]),_:1})]),_:1},8,["color","modelValue","disabled","counter","maxlength","error-messages","onInput"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.lastname,"onUpdate:modelValue":a[2]||(a[2]=e=>t.lastname=e),disabled:n(s).documentnumber.$invalid,"error-messages":n(s).lastname.$errors.map(e=>e.$message),label:"Apellido Paterno",density:"comfortable",variant:"outlined",onInput:n(s).lastname.$touch,onBlur:a[3]||(a[3]=e=>w("lastname","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.middlename,"onUpdate:modelValue":a[4]||(a[4]=e=>t.middlename=e),disabled:n(s).documentnumber.$invalid,"error-messages":n(s).middlename.$errors.map(e=>e.$message),label:"Apellido Materno",density:"comfortable",variant:"outlined",onInput:n(s).middlename.$touch,onBlur:a[5]||(a[5]=e=>w("middlename","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.name,"onUpdate:modelValue":a[6]||(a[6]=e=>t.name=e),disabled:n(s).documentnumber.$invalid,"error-messages":n(s).name.$errors.map(e=>e.$message),label:"Nombres",density:"comfortable",variant:"outlined",onInput:n(s).name.$touch,onBlur:a[7]||(a[7]=e=>w("name","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(H,{color:v.value,modelValue:t.gender_id,"onUpdate:modelValue":a[8]||(a[8]=e=>t.gender_id=e),disabled:n(s).documentnumber.$invalid,"error-messages":n(s).gender_id.$errors.map(e=>e.$message),items:z.value,label:"Género","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:n(s).gender_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(j,{"control-variant":"hidden",counter:9,color:v.value,modelValue:t.phone,"onUpdate:modelValue":a[9]||(a[9]=e=>t.phone=e),disabled:n(s).documentnumber.$invalid,maxlength:"9","error-messages":n(s).phone.$errors.map(e=>e.$message),label:"Número de celular",density:"comfortable",variant:"outlined",onInput:n(s).phone.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.email,"onUpdate:modelValue":a[10]||(a[10]=e=>t.email=e),disabled:n(s).documentnumber.$invalid,"error-messages":n(s).email.$errors.map(e=>e.$message),label:"Correo electrónico",onBlur:a[11]||(a[11]=e=>w("email","trim")),density:"comfortable",variant:"outlined",onInput:n(s).email.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),a[26]||(a[26]=d("h4",{class:"form-title mt-6 mb-6"},"Datos de la Empresa",-1)),l(_,null,{default:r(()=>[l(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[l(j,{"control-variant":"hidden",color:v.value,modelValue:t.ruc,"onUpdate:modelValue":a[12]||(a[12]=e=>t.ruc=e),counter:11,maxlength:"11","error-messages":n(s).ruc.$errors.map(e=>e.$message),label:"Número de RUC",density:"comfortable","|":"",variant:"outlined",onInput:n(s).ruc.$touch},{"append-inner":r(()=>[l(O,{text:"Click para buscar",location:"top"},{activator:r(({props:e})=>[M.value?(f(),I(R,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):F((f(),I(E,{key:1,class:"me-2 input-search",onClick:ne},{default:r(()=>a[23]||(a[23]=[g(" mdi-magnify ")])),_:1,__:[23]},512)),[[L,!n(s).ruc.$invalid]])]),_:1})]),_:1},8,["color","modelValue","error-messages","onInput"])]),_:1}),l(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.comercialName,"onUpdate:modelValue":a[13]||(a[13]=e=>t.comercialName=e),disabled:n(s).ruc.$invalid,"error-messages":n(s).comercialName.$errors.map(e=>e.$message),label:"Nombre comercial",density:"comfortable",variant:"outlined",onInput:n(s).comercialName.$touch,onBlur:a[14]||(a[14]=e=>w("comercialName","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.comercialActivity,"onUpdate:modelValue":a[15]||(a[15]=e=>t.comercialActivity=e),disabled:n(s).ruc.$invalid,"error-messages":n(s).comercialActivity.$errors.map(e=>e.$message),label:"Rubro o Actividad de la empresa",density:"comfortable",variant:"outlined",onInput:n(s).comercialActivity.$touch,onBlur:a[16]||(a[16]=e=>w("comercialActivity","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),l(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[l(h,{color:v.value,modelValue:t.mercado,"onUpdate:modelValue":a[17]||(a[17]=e=>t.mercado=e),disabled:n(s).ruc.$invalid,"error-messages":n(s).mercado.$errors.map(e=>e.$message),label:"Mercado al que pertenece",density:"comfortable",variant:"outlined",onInput:n(s).mercado.$touch,onBlur:a[18]||(a[18]=e=>w("mercado","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),l(_,null,{default:r(()=>[l(m,{class:"text-center"},{default:r(()=>[l(B,{type:"submit",class:"form-button",onClick:n(s).$validate,loading:N.value,size:"large"},{default:r(()=>a[24]||(a[24]=[g(" PARTICIPAR ")])),_:1,__:[24]},8,["onClick","loading"])]),_:1})]),_:1})],32)]),_:1}))],64))]),l(Ce),l(J,{modelValue:i.value,"onUpdate:modelValue":a[20]||(a[20]=e=>i.value=e),"max-width":"500",transition:"dialog-top-transition"},{default:r(()=>[l(Y,{class:"text-center"},{actions:r(()=>[l(B,{class:"mx-auto",onClick:a[19]||(a[19]=e=>i.value=!1),color:v.value,variant:"flat",style:{color:"#fff"}},{default:r(()=>a[27]||(a[27]=[g(" ENTENDIDO ")])),_:1,__:[27]},8,["color"])]),default:r(()=>[d("div",Pe,[l(X,{width:160,src:Ee})]),a[28]||(a[28]=d("div",{class:"px-8"},[d("p",null,[g(" Este "),d("b",null,"número de documento"),g(" ya está registrado como participante en este evento. ")]),d("p",{class:"my-4"},"No es necesario volver a registrarse.")],-1))]),_:1,__:[28]})]),_:1},8,["modelValue"]),l(Ne,{modelValue:c.value,"onUpdate:modelValue":a[21]||(a[21]=e=>c.value=e),color:"red",timeout:"4000",location:"top center",rounded:"lg",elevation:"24"},{default:r(()=>a[29]||(a[29]=[g(" Por favor, completa todos los campos obligatorios correctamente. ")])),_:1,__:[29]},8,["modelValue"])]))}},We=be(Fe,[["__scopeId","data-v-e76338c2"]]);export{We as default};
