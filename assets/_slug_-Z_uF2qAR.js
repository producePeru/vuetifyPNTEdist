import{_ as ee,r as u,f as T,l as ae,h as U,b as f,a as s,c as v,w as n,q as oe,F as re,s as le,v as te,o as p,x as _,n as se,u as t,y as R,V as A,e as w,z as D,j as b,k as ne}from"./index-Cnsxr0SM.js";import{u as ie}from"./usePageMeta-DVX0Xw26.js";import{c as i,e as de,r as m,m as ce,a as me,u as ue,h as g,E as pe,V as F,b as G}from"./VTooltip-CGiPjAKg.js";import{F as ge,_ as ve,M as be}from"./Footer-B7QL9cNB.js";import{V as C}from"./VContainer-DTq5-hQY.js";import{V as q,a as c,b as y}from"./VSelect-DNUfDYky.js";const ye=i.withMessage("El número de RUC es incorrecto",i.regex(/^(10|15|20)\d{9}$/)),he=i.withMessage("El número es incorrecto",i.regex(/^(9)\d{8}$/)),fe=i.withMessage("Corrige el número de documento",i.regex(/^\d+$/)),$e={ruc:{required:i.withMessage("El RUC es obligatorio",m),validRUC:ye},comercialName:{required:i.withMessage("Escribir el Nombre Comercial",m),maxLength:i.withMessage("Número máximo de caracteres permitidos: 120",me(120))},economicsector_id:{required:i.withMessage("Seleccionar un tipo",m)},comercialactivity_id:{required:i.withMessage("Seleccionar un tipo",m)},typedocument_id:{required:i.withMessage("Seleccionar un tipo",m)},documentnumber:{required:i.withMessage("Ingresar número de documento",m),minLength:i.withMessage("Completa el número de identidad",ce(8)),validDni:fe},lastname:{required:i.withMessage("Ingresar apellido paterno",m)},middlename:{required:i.withMessage("Ingresar apellido materno",m)},name:{required:i.withMessage("Ingresar nombres",m)},gender_id:{required:i.withMessage("Seleccionar género",m)},sick:{required:i.withMessage("Seleccionar",m)},phone:{required:i.withMessage("Ingresar número de celular",m),validPhone:he},email:{required:i.withMessage("Ingresar correo electrónico",m),email:i.withMessage("Correo electrónico inválido",de)}},Ve={class:"pp03-background"},_e={class:"container-sm"},we={__name:"[slug]",setup(Ce){ie("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const k="6LdKGzorAAAAADqxi2yn8x9mHfTchbXYK1y6KRUb",I=le(),P=te(),E=u(null),h=u(!1),z=u(!1),B=u(!1),d=u("#8cc938"),$=u(!1),V=u(!1),L=T({ruc:null,comercialName:null,socialReason:null,economicsector_id:null,comercialactivity_id:null,typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,gender_id:null,sick:null,phone:null,email:null,slug:null}),o=T({...L}),j=[{label:"Si",value:"yes"},{label:"No",value:"no"}],M=u([]),x=u([]),N=u([]),S=u([]),K=async()=>{try{const a=await g({url:"select/economic-sectors",method:"GET"});M.value=a.data}catch(a){console.error("Error de red:",a)}},O=async()=>{try{const a=await g({url:"select/type-documents",method:"GET"});N.value=a.data}catch(a){console.error("Error de red:",a)}},H=async()=>{try{const a=await g({url:"select/genders",method:"GET"});S.value=a.data}catch(a){console.error("Error de red:",a)}},W=async()=>{try{const a=await g({url:"select/comercial-activities",method:"GET"});x.value=a.data}catch(a){console.error("Error de red:",a)}},X=()=>{o.documentnumber=null},l=ue($e,o),Y=async()=>{$.value=!0;try{const a=await g({url:`public/search-api-ruc/${o.ruc}`,method:"GET"});a.status==200&&(o.comercialName=a.data.comercialName,o.socialReason=a.data.socialReason)}catch(a){console.error("Error de red:",a)}finally{$.value=!1}},J=async()=>{V.value=!0;try{const a=await g({url:`public/search-api-dni/${o.documentnumber}`,method:"GET"});a.status==200&&(o.name=a.data.name,o.lastname=a.data.lastname,o.middlename=a.data.middlename,o.gender_id=a.data.gender_id,o.phone=a.data.phone?+a.data.phone:null,o.email=a.data.email)}catch(a){console.error("Error de red:",a)}finally{V.value=!1}},Q=async()=>{try{const r={recaptcha_token:await window.grecaptcha.execute(k,{action:"form_submit"})};(await g({url:"verify-captcha",method:"POST",data:r})).status==200&&(await g({url:"public/register-participant-ugo",method:"POST",data:o})).status==200&&P.push(`/registrado/${I.params.slug}`)}catch(a){console.error("Error ejecutando reCAPTCHA:",a)}},Z=async()=>{try{h.value=!0;const a=I.params.slug,r=await g({url:`public/data-attendance/${a}`,method:"GET"}),e=r.data;E.value=e,r.status==200&&(o.slug=e.slug)}catch(a){console.error("Error de red:",a)}finally{h.value=!1}};return ae(async()=>{if(await Z(),await K(),await O(),await H(),await W(),!window.grecaptcha){const a=document.createElement("script");a.src=`https://www.google.com/recaptcha/api.js?render=${k}`,a.async=!0,document.head.appendChild(a)}}),(a,r)=>(p(),U("section",Ve,[f("div",_e,[s(oe,{"model-value":h.value,class:"align-center justify-center",persistent:"",scrim:""},{default:n(()=>[s(_,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),B.value?(p(),v(C,{key:0,class:"pp03-container"},{default:n(()=>[s(pe)]),_:1})):(p(),U(re,{key:1},[h.value?(p(),v(C,{key:0,class:"pp03-container",style:{"min-height":"70vh"}})):(p(),v(C,{key:1,class:"pp03-container"},{default:n(()=>[s(ve,{color:d.value,info:E.value},null,8,["color","info"]),f("form",{onSubmit:se(Q,["prevent"])},[r[16]||(r[16]=f("h4",{class:"form-title mt-6 mb-6"},"Datos de la Empresa",-1)),s(q,null,{default:n(()=>[s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(F,{"control-variant":"hidden",color:d.value,modelValue:o.ruc,"onUpdate:modelValue":r[0]||(r[0]=e=>o.ruc=e),counter:11,maxlength:"11","error-messages":t(l).ruc.$errors.map(e=>e.$message),label:"Número de RUC",required:"",density:"comfortable",variant:"outlined",onInput:t(l).ruc.$touch},{"append-inner":n(()=>[s(G,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[$.value?(p(),v(_,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):R((p(),v(A,{key:1,class:"me-2 input-search",onClick:Y},{default:n(()=>r[13]||(r[13]=[w(" mdi-magnify ")])),_:1,__:[13]},512)),[[D,!t(l).ruc.$invalid]])]),_:1})]),_:1},8,["color","modelValue","error-messages","onInput"])]),_:1}),s(c,{cols:" 12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.comercialName,"onUpdate:modelValue":r[1]||(r[1]=e=>o.comercialName=e),disabled:t(l).ruc.$invalid,"error-messages":t(l).comercialName.$errors.map(e=>e.$message),label:"Nombre comercial",required:"",density:"comfortable",variant:"outlined",onInput:t(l).comercialName.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(y,{color:d.value,modelValue:o.economicsector_id,"onUpdate:modelValue":r[2]||(r[2]=e=>o.economicsector_id=e),disabled:t(l).ruc.$invalid,"error-messages":t(l).economicsector_id.$errors.map(e=>e.$message),items:M.value,label:"Sector económico","item-title":"label","item-value":"value",required:"",density:"comfortable",variant:"outlined",onChange:t(l).economicsector_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(y,{color:d.value,modelValue:o.comercialactivity_id,"onUpdate:modelValue":r[3]||(r[3]=e=>o.comercialactivity_id=e),disabled:t(l).ruc.$invalid,"error-messages":t(l).comercialactivity_id.$errors.map(e=>e.$message),items:x.value,label:"Actividad Comercial","item-title":"label","item-value":"value",required:"",density:"comfortable",variant:"outlined",onChange:t(l).comercialactivity_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1})]),_:1}),r[17]||(r[17]=f("h4",{class:"form-title mt-4 mb-6"},"Datos Personales ( Representante )",-1)),s(q,null,{default:n(()=>[s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(y,{color:d.value,modelValue:o.typedocument_id,"onUpdate:modelValue":[r[4]||(r[4]=e=>o.typedocument_id=e),X],"error-messages":t(l).typedocument_id.$errors.map(e=>e.$message),items:N.value,label:"Tipo de documento","item-title":"label","item-value":"value",required:"",density:"comfortable",variant:"outlined",onChange:t(l).typedocument_id.$touch},null,8,["color","modelValue","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.documentnumber,"onUpdate:modelValue":r[5]||(r[5]=e=>o.documentnumber=e),disabled:t(l).typedocument_id.$invalid,counter:o.typedocument_id==1?8:10,maxlength:o.typedocument_id==1?8:10,"error-messages":t(l).documentnumber.$errors.map(e=>e.$message),label:"Número de documento",required:"",density:"comfortable",variant:"outlined",onInput:t(l).documentnumber.$touch},{"append-inner":n(()=>[s(G,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[V.value?(p(),v(_,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):R((p(),v(A,{key:1,class:"me-2 input-search",onClick:J},{default:n(()=>r[14]||(r[14]=[w(" mdi-magnify ")])),_:1,__:[14]},512)),[[D,!t(l).documentnumber.$invalid]])]),_:1})]),_:1},8,["color","modelValue","disabled","counter","maxlength","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.lastname,"onUpdate:modelValue":r[6]||(r[6]=e=>o.lastname=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).lastname.$errors.map(e=>e.$message),label:"Apellido Paterno",required:"",density:"comfortable",variant:"outlined",onInput:t(l).lastname.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.middlename,"onUpdate:modelValue":r[7]||(r[7]=e=>o.middlename=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).middlename.$errors.map(e=>e.$message),label:"Apellido Materno",required:"",density:"comfortable",variant:"outlined",onInput:t(l).middlename.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.name,"onUpdate:modelValue":r[8]||(r[8]=e=>o.name=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).name.$errors.map(e=>e.$message),label:"Nombres",required:"",density:"comfortable",variant:"outlined",onInput:t(l).name.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(y,{color:d.value,modelValue:o.gender_id,"onUpdate:modelValue":r[9]||(r[9]=e=>o.gender_id=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).gender_id.$errors.map(e=>e.$message),items:S.value,label:"Género","item-title":"label","item-value":"value",required:"",density:"comfortable",variant:"outlined",onChange:t(l).gender_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(y,{color:d.value,modelValue:o.sick,"onUpdate:modelValue":r[10]||(r[10]=e=>o.sick=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).sick.$errors.map(e=>e.$message),items:j,label:"Tiene alguna discapacidad","item-title":"label","item-value":"value",required:"",density:"comfortable",variant:"outlined",onChange:t(l).sick.$touch},null,8,["color","modelValue","disabled","error-messages","onChange"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(F,{"control-variant":"hidden",counter:9,color:d.value,modelValue:o.phone,"onUpdate:modelValue":r[11]||(r[11]=e=>o.phone=e),disabled:t(l).documentnumber.$invalid,maxlength:"9","error-messages":t(l).phone.$errors.map(e=>e.$message),label:"Número de celular",required:"",density:"comfortable",variant:"outlined",onInput:t(l).phone.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(c,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(b,{color:d.value,modelValue:o.email,"onUpdate:modelValue":r[12]||(r[12]=e=>o.email=e),disabled:t(l).documentnumber.$invalid,"error-messages":t(l).email.$errors.map(e=>e.$message),label:"Correo electrónico",required:"",density:"comfortable",variant:"outlined",onInput:t(l).email.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),s(q,null,{default:n(()=>[s(be),s(c,{class:"text-center"},{default:n(()=>[s(ne,{type:"submit",class:"form-button",onClick:t(l).$validate,loading:z.value,size:"large"},{default:n(()=>r[15]||(r[15]=[w(" PARTICIPAR ")])),_:1,__:[15]},8,["onClick","loading"])]),_:1})]),_:1})],32)]),_:1}))],64))]),s(ge)]))}},Se=ee(we,[["__scopeId","data-v-709ba6b0"]]);export{Se as default};
