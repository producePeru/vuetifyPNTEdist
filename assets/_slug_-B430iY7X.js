import{_ as he,r as c,f as I,g as $e,l as we,h as O,b,a as s,c as y,w as n,q as Ve,F as _e,s as Ce,v as Ee,o as g,x as R,n as ke,u as t,y as L,V as j,e as V,z as H,j as f,k as Me}from"./index-DqUQWRkl.js";import{F as Ie,_ as Re,a as xe,M as Se}from"./Footer-DQ9TbBPG.js";import{u as Te}from"./usePageMeta-BpQWOBxe.js";import{c as i,r as u,e as Ue,m as Ne,a as Y,u as qe,V as Ae,h as p,E as De,b as W,d as X,f as x}from"./VTooltip-rCWtQdPd.js";import{V as S}from"./VContainer-CnrXxFgI.js";import{V as _,a as m,b as w}from"./VSelect-Cfwh3uo1.js";const ze={class:"pp03-background"},Fe={class:"container-sm"},Ge={__name:"[slug]",setup(Be){Te("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const T="6LdKGzorAAAAADqxi2yn8x9mHfTchbXYK1y6KRUb",U=Ce(),N=Ee(),C=c(!1),q=c(null),$=c(!1),J=c(!1),A=c(!1),d=c("#02E4A5"),E=c(!1),k=c(!1),Q=I({ruc:null,comercialName:null,socialReason:null,economicsector_id:null,comercialactivity_id:null,category_id:null,city_id:null,howKnowEvent_id:null,slug:null,typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,gender_id:null,sick:null,phone:null,email:null}),l=I({...Q}),Z=[{label:"Si",value:"yes"},{label:"No",value:"no"}];function h(o,...a){let e=l[o]||"";a.forEach(v=>{switch(v){case"trim":e=e.trim();break;case"capitalize":e=e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e;break;case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break}}),l[o]=e}c(null);const ee=["facebook","instagram","web"],ae=c([]);I({}),$e(()=>ee.filter(o=>!ae.value.includes(o)));const M=new Date;new Date(M.getFullYear()-18,M.getMonth(),M.getDate()).toISOString().split("T")[0];const D=c([]),z=c([]),F=c([]),G=c([]),B=c([]),P=c([]),K=c([]),oe=async()=>{try{const o=await p({url:"select/economic-sectors",method:"GET"});D.value=o.data}catch(o){console.error("Error de red:",o)}},le=async()=>{try{const o=await p({url:"select/type-documents",method:"GET"});F.value=o.data}catch(o){console.error("Error de red:",o)}},re=async()=>{try{const o=await p({url:"select/genders",method:"GET"});G.value=o.data}catch(o){console.error("Error de red:",o)}},te=async()=>{try{const o=await p({url:"select/comercial-activities",method:"GET"});z.value=o.data}catch(o){console.error("Error de red:",o)}},se=async()=>{try{const o=await p({url:"select/cities",method:"GET"});B.value=o.data}catch(o){console.error("Error de red:",o)}},ne=async()=>{try{const o=await p({url:"select/rubros",method:"GET"});P.value=o.data}catch(o){console.error("Error de red:",o)}},ie=async()=>{try{const o=await p({url:"select/propaganda-media",method:"GET"});K.value=o.data}catch(o){console.error("Error de red:",o)}},de=()=>{l.documentnumber=null},me=async()=>{E.value=!0;try{const o=await p({url:`public/search-api-ruc/${l.ruc}`,method:"GET"});o.status==200&&(l.comercialName=o.data.comercialName,l.socialReason=o.data.socialReason,l.economicsector_id=o.data.economicsector_id,l.category_id=o.data.category_id,l.comercialactivity_id=o.data.comercialactivity_id,l.city_id=o.data.city_id)}catch(o){console.error("Error de red:",o)}finally{E.value=!1}},ce=async()=>{k.value=!0;try{const o=await p({url:`public/search-api-dni/${l.documentnumber}`,method:"GET"});o.status==200&&(l.name=o.data.name,l.lastname=o.data.lastname,l.middlename=o.data.middlename,l.gender_id=o.data.gender_id,l.phone=o.data.phone?+o.data.phone:null,l.email=o.data.email)}catch(o){console.error("Error de red:",o)}finally{k.value=!1}},ue=async()=>{try{if(await r.value.$validate(),r.value.$invalid){C.value=!0;return}const a={recaptcha_token:await window.grecaptcha.execute(T,{action:"form_submit"})};(await p({url:"verify-captcha",method:"POST",data:a})).status==200&&(await p({url:"public/register-participant-ugse",method:"POST",data:l})).status==200&&N.push(`/registrado/${U.params.slug}`)}catch(o){console.error("Error ejecutando reCAPTCHA:",o)}},pe=async()=>{try{$.value=!0;const o=U.params.slug,a=2,e=await p({url:`public/data-attendance/${o}`,method:"GET"});if(e.status==400)return N.replace("/pagina-no-encontrada");if(e.status==500)return A.value=!0;const v=e.data,fe={subTitle:v.title,place:v.address,fecha:v.fecha,schedule:v.hora};q.value=fe,e.status==200&&(l.slug=v.slug,await se(),$.value=!1,await oe(),await le(),await re(),await te(),await ne(),await ie())}catch(o){console.error("Error de red:",o)}finally{$.value=!1}};we(async()=>{if(await pe(),!window.grecaptcha){const o=document.createElement("script");o.src=`https://www.google.com/recaptcha/api.js?render=${T}`,o.async=!0,document.head.appendChild(o)}});const ge=i.withMessage("El número de RUC es incorrecto",i.regex(/^(10|15|20)\d{9}$/)),ve=i.withMessage("El número es incorrecto",i.regex(/^(9)\d{8}$/)),be=i.withMessage("Corrige el número de documento",i.regex(/^\d+$/)),ye={ruc:{required:i.withMessage("El RUC es obligatorio",u),validRUC:ge},comercialName:{required:i.withMessage("Escribir el Nombre Comercial",u),maxLength:i.withMessage("Número máximo de caracteres permitidos: 120",Y(120))},socialReason:{required:i.withMessage("Escribir la Razón Social",u),maxLength:i.withMessage("Número máximo de caracteres permitidos: 120",Y(120))},economicsector_id:{required:i.withMessage("Seleccionar un tipo",u)},category_id:{required:i.withMessage("Seleccionar un tipo",u)},comercialactivity_id:{required:i.withMessage("Seleccionar un tipo",u)},city_id:{required:i.withMessage("Selecciona una región",u)},typedocument_id:{required:i.withMessage("Seleccionar un tipo",u)},documentnumber:{required:i.withMessage("Ingresar número de documento",u),minLength:i.withMessage("Completa el número de identidad",Ne(8)),validDni:be},lastname:{required:i.withMessage("Ingresar apellido paterno",u)},middlename:{required:i.withMessage("Ingresar apellido materno",u)},name:{required:i.withMessage("Ingresar nombres",u)},gender_id:{required:i.withMessage("Seleccionar género",u)},sick:{required:i.withMessage("Seleccionar",u)},phone:{required:i.withMessage("Ingresar número de celular",u),validPhone:ve},email:{required:i.withMessage("Ingresar correo electrónico",u),email:i.withMessage("Correo electrónico inválido",Ue)},howKnowEvent_id:{required:i.withMessage("Seleccionar un tipo",u)}},r=qe(ye,l);return(o,a)=>(g(),O("section",ze,[b("div",Fe,[s(Ve,{"model-value":$.value,class:"align-center justify-center",persistent:"",scrim:""},{default:n(()=>[s(R,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),A.value?(g(),y(S,{key:0,class:"pp03-container"},{default:n(()=>[s(De)]),_:1})):(g(),O(_e,{key:1},[$.value?(g(),y(S,{key:0,class:"pp03-container",style:{"min-height":"74.5vh"}})):(g(),y(S,{key:1,class:"pp03-container"},{default:n(()=>[s(xe,{color:d.value,info:q.value,title:"FORTALECE TU MERCADO",eventType:"tumercado",modal:!1},null,8,["color","info"]),b("form",{onSubmit:ke(ue,["prevent"])},[a[27]||(a[27]=b("h4",{class:"form-title mt-6 mb-6"},"Datos de la Empresa",-1)),s(_,null,{default:n(()=>[s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(W,{"control-variant":"hidden",color:d.value,modelValue:l.ruc,"onUpdate:modelValue":a[0]||(a[0]=e=>l.ruc=e),counter:11,maxlength:"11","error-messages":t(r).ruc.$errors.map(e=>e.$message),label:"Número de RUC",density:"comfortable",variant:"outlined",onInput:t(r).ruc.$touch},{"append-inner":n(()=>[s(X,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[E.value?(g(),y(R,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):L((g(),y(j,{key:1,class:"me-2 input-search",onClick:me},{default:n(()=>a[24]||(a[24]=[V(" mdi-magnify ")])),_:1,__:[24]},512)),[[H,!t(r).ruc.$invalid]])]),_:1})]),_:1},8,["color","modelValue","error-messages","onInput"])]),_:1}),s(m,{cols:" 12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.comercialName,"onUpdate:modelValue":a[1]||(a[1]=e=>l.comercialName=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).comercialName.$errors.map(e=>e.$message),label:"Nombre comercial",density:"comfortable",variant:"outlined",onInput:t(r).comercialName.$touch,onBlur:a[2]||(a[2]=e=>h("comercialName","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:" 12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.socialReason,"onUpdate:modelValue":a[3]||(a[3]=e=>l.socialReason=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).socialReason.$errors.map(e=>e.$message),label:"Razon Social",density:"comfortable",variant:"outlined",onInput:t(r).socialReason.$touch,onBlur:a[4]||(a[4]=e=>h("socialReason","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:l.economicsector_id,"onUpdate:modelValue":a[5]||(a[5]=e=>l.economicsector_id=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).economicsector_id.$errors.map(e=>e.$message),items:D.value,label:"Sector económico","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).economicsector_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:l.category_id,"onUpdate:modelValue":a[6]||(a[6]=e=>l.category_id=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).category_id.$errors.map(e=>e.$message),items:P.value,label:"Rubro","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).category_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:l.comercialactivity_id,"onUpdate:modelValue":a[7]||(a[7]=e=>l.comercialactivity_id=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).comercialactivity_id.$errors.map(e=>e.$message),items:z.value,label:"Actividad Comercial","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).comercialactivity_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(x,{color:d.value,modelValue:l.city_id,"onUpdate:modelValue":a[8]||(a[8]=e=>l.city_id=e),disabled:t(r).ruc.$invalid,"error-messages":t(r).city_id.$errors.map(e=>e.$message),items:B.value,label:"Región","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).city_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1})]),_:1}),a[28]||(a[28]=b("h4",{class:"form-title mt-4 mb-6"},"Datos Personales ( Representante )",-1)),s(_,null,{default:n(()=>[s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:l.typedocument_id,"onUpdate:modelValue":[a[9]||(a[9]=e=>l.typedocument_id=e),de],"error-messages":t(r).typedocument_id.$errors.map(e=>e.$message),items:F.value,label:"Tipo de documento","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).typedocument_id.$touch},null,8,["color","modelValue","error-messages","items","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.documentnumber,"onUpdate:modelValue":a[10]||(a[10]=e=>l.documentnumber=e),disabled:t(r).typedocument_id.$invalid,counter:l.typedocument_id==1?8:10,maxlength:l.typedocument_id==1?8:10,"error-messages":t(r).documentnumber.$errors.map(e=>e.$message),label:"Número de documento",density:"comfortable",variant:"outlined",onInput:t(r).documentnumber.$touch},{"append-inner":n(()=>[s(X,{text:"Click para buscar",location:"top"},{activator:n(({props:e})=>[k.value?(g(),y(R,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):L((g(),y(j,{key:1,class:"me-2 input-search",onClick:ce},{default:n(()=>a[25]||(a[25]=[V(" mdi-magnify ")])),_:1,__:[25]},512)),[[H,!t(r).documentnumber.$invalid]])]),_:1})]),_:1},8,["color","modelValue","disabled","counter","maxlength","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.lastname,"onUpdate:modelValue":a[11]||(a[11]=e=>l.lastname=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).lastname.$errors.map(e=>e.$message),label:"Apellido Paterno",density:"comfortable",variant:"outlined",onInput:t(r).lastname.$touch,onBlur:a[12]||(a[12]=e=>h("lastname","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.middlename,"onUpdate:modelValue":a[13]||(a[13]=e=>l.middlename=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).middlename.$errors.map(e=>e.$message),label:"Apellido Materno",density:"comfortable",variant:"outlined",onInput:t(r).middlename.$touch,onBlur:a[14]||(a[14]=e=>h("middlename","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.name,"onUpdate:modelValue":a[15]||(a[15]=e=>l.name=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).name.$errors.map(e=>e.$message),label:"Nombres",density:"comfortable",variant:"outlined",onInput:t(r).name.$touch,onBlur:a[16]||(a[16]=e=>h("name","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:l.gender_id,"onUpdate:modelValue":a[17]||(a[17]=e=>l.gender_id=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).gender_id.$errors.map(e=>e.$message),items:G.value,label:"Género","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).gender_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:l.sick,"onUpdate:modelValue":a[18]||(a[18]=e=>l.sick=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).sick.$errors.map(e=>e.$message),items:Z,label:"Tiene alguna discapacidad","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:t(r).sick.$touch},null,8,["color","modelValue","disabled","error-messages","onChange"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(W,{"control-variant":"hidden",counter:9,color:d.value,modelValue:l.phone,"onUpdate:modelValue":a[19]||(a[19]=e=>l.phone=e),disabled:t(r).documentnumber.$invalid,maxlength:"9","error-messages":t(r).phone.$errors.map(e=>e.$message),label:"Número de celular",density:"comfortable",variant:"outlined",onInput:t(r).phone.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(f,{color:d.value,modelValue:l.email,"onUpdate:modelValue":a[20]||(a[20]=e=>l.email=e),disabled:t(r).documentnumber.$invalid,"error-messages":t(r).email.$errors.map(e=>e.$message),label:"Correo electrónico",onBlur:a[21]||(a[21]=e=>h("email","trim")),density:"comfortable",variant:"outlined",onInput:t(r).email.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),a[29]||(a[29]=b("h4",{class:"form-title mt-4 mb-6"},"Detalles",-1)),s(_,null,{default:n(()=>[s(m,{cols:"12",md:"6",class:"py-1"},{default:n(()=>[s(w,{color:d.value,modelValue:l.howKnowEvent_id,"onUpdate:modelValue":a[22]||(a[22]=e=>l.howKnowEvent_id=e),"error-messages":t(r).howKnowEvent_id.$errors.map(e=>e.$message),items:K.value,label:"¿Cómo se enteró del evento?","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined"},null,8,["color","modelValue","error-messages","items"])]),_:1})]),_:1}),s(_,null,{default:n(()=>[s(Se),s(m,{class:"text-center"},{default:n(()=>[s(Me,{type:"submit",class:"form-button",onClick:t(r).$validate,loading:J.value,size:"large"},{default:n(()=>a[26]||(a[26]=[V(" PARTICIPAR ")])),_:1,__:[26]},8,["onClick","loading"])]),_:1})]),_:1})],32)]),_:1}))],64))]),s(Ie),a[31]||(a[31]=b("a",{href:"https://wa.me/51901761128?text=Hola%20quiero%20más%20información%20sobre%20el%20evento",target:"_blank"},[b("img",{class:"whatsapp-button",src:Re,alt:"fortalece-tu-empresa-ayuda"})],-1)),s(Ae,{modelValue:C.value,"onUpdate:modelValue":a[23]||(a[23]=e=>C.value=e),color:"red",timeout:"4000",location:"top center",rounded:"lg",elevation:"24"},{default:n(()=>a[30]||(a[30]=[V(" Por favor, completa todos los campos obligatorios correctamente. ")])),_:1,__:[30]},8,["modelValue"])]))}},We=he(Ge,[["__scopeId","data-v-3424c7e5"]]);export{We as default};
