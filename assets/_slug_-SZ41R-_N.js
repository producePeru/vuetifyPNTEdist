import{u as ce}from"./usePageMeta-Cc0Arm18.js";import{h as q}from"./httpRequest-kvSXxSoU.js";import{_ as A,P as D,b as v,Q as r,j as p,h as me,c as V,i as n,ac as pe,V as M,T as I,R as C,a6 as R,r as b,a5 as B,a8 as fe,ad as _e,w as j,o as L,Y as be,N as T,z as P,a7 as ve,X as ye}from"./index-C4Ejz8Tt.js";import{_ as ge}from"./EventFinalized-DDlJCvTs.js";import{_ as he}from"./SedHeader-C5cm29mO.js";import{_ as qe}from"./verificacion-DI9pvaX9.js";import{_ as Se}from"./FormComponent-BKhkfTp3.js";import{V as F,b as we}from"./VCard-C6r_7Kz_.js";import{V as U}from"./VDialog-BbjkqcUr.js";import{u as Ee}from"./useFormOptions-DNeVbNCH.js";import{d as xe}from"./dayjs.min-DlHWgQbJ.js";import{V as Ce}from"./VSnackbar-B364SNV0.js";import{V as De}from"./VImg-DZ7ggGCr.js";/* empty css                                                                        */import{a as z,V as Ve}from"./VRow-Bj-mioIE.js";import{V as ke}from"./VContainer-D8Ilihby.js";/* empty css                                                       */import"./sed-robot-BghC5CVp.js";import"./es-x_iTFhWY.js";import"./index-BsCUInDp.js";import"./VForm-C22a-J7R.js";import"./VAvatar-C7dBAdgB.js";import"./ssrBoot-FBuI-doa.js";const Ne={};function $e(w,e){return v(),D(z,{cols:"12",class:"mt-8"},{default:r(()=>e[0]||(e[0]=[p("div",{class:"pp03-date"},[p("h4",null," ¡Recordatorio importante para tu Sesión de Entrenamiento Digital! "),p("p",{class:"my-2"},"Para que vivas una experiencia memorable y provechosa, te pedimos tener en cuenta lo siguiente:"),p("ol",{class:"pl-4",style:{"font-size":"14px"}},[p("li",null,"Traer una laptop, tablet o smartphone para participar en los laboratorios tecnológicos."),p("li",null,"Llevar una extensión eléctrica para poder conectar tu equipo al punto de corriente."),p("li",null,"Disponer del tiempo completo para participar desde el inicio hasta el final del entrenamiento."),p("li",null,"Traer tu DNI.")])],-1)])),_:1,__:[0]})}const Re=A(Ne,[["render",$e]]),Te={class:"text-center pa-4"},Pe={class:"d-flex align-center justify-space-between ga-4 w-100"},Me={__name:"ModalRegistered",props:{dialog:{type:Boolean,default:!1}},emits:["update:dialog","dialog-change"],setup(w,{emit:e}){const d=w,c=e,f=me({get:()=>d.dialog,set:m=>c("update:dialog",m)}),y=m=>{c("dialog-change",m)};return(m,l)=>(v(),V("div",Te,[n(U,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=g=>f.value=g),"max-width":"400",persistent:""},{default:r(()=>[n(F,{"prepend-icon":"mdi-account-group",text:"¿Deseas registrar un nuevo invitado al evento?",title:"Invitado"},{actions:r(()=>[n(pe),p("div",Pe,[n(M,{onClick:l[0]||(l[0]=g=>y(!1)),color:"grey-darken-1",variant:"outlined",style:{border:"none"}},{default:r(()=>l[3]||(l[3]=[I(" No, gracias ")])),_:1,__:[3]}),n(M,{onClick:l[1]||(l[1]=g=>y(!0)),color:"#02e4a5",variant:"elevated",style:{color:"#fff"}},{default:r(()=>l[4]||(l[4]=[I(" Si, registrar ")])),_:1,__:[4]})])]),_:1})]),_:1},8,["modelValue"])]))}},Ie={key:0},Ae=["innerHTML"],Fe={class:"d-flex justify-center mt-12"},ze={__name:"SedPresentation",props:{infoEvent:{type:Object,required:!0,default:()=>({})},color:{type:String,default:"primary"}},emits:["handleInscription"],setup(w,{emit:e}){const d=e,c=()=>{d("handleInscription")};return(f,y)=>(v(),D(z,{cols:"12",class:"mt-8"},{default:r(()=>[w.infoEvent?(v(),V("div",Ie,[p("div",{innerHTML:w.infoEvent.description},null,8,Ae),p("div",Fe,[n(M,{color:w.color,elevation:"2",variant:"flat",class:"btn-sed-presentation",onClick:c},{default:r(()=>y[0]||(y[0]=[I(" INSCRIBIRME ")])),_:1,__:[0]},8,["color"])])])):C("",!0)]),_:1}))}},Oe=A(ze,[["__scopeId","data-v-7ca2d4e9"]]),Ye={class:"custom-form"},je={class:"text-center"},Be={style:{"text-align":"center",margin:"auto"}},Le={__name:"SedForm",setup(w){const e=R({socials:[]}),d=b(!1),c=R({}),f=B(),y=fe(),m=b(!1),l=b(1),g=b(!1),x=b(!1),$=b(null);P("formState",e),P("loadingStates",c),P("loadingSubmit",m);const S=R([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[],disabled:!1},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[],disabled:!1},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[],disabled:!1},{type:"select",label:"Región",model:"city_id",required:!0,options:[],disabled:!1},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[],disabled:!1},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[],disabled:!1},{type:"text",label:"Dirección",model:"address",required:!0,disabled:!1},{type:"title",label:"Datos del Participante",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"text",label:"Cargo en la empresa",model:"cargo_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"number",label:"Edad",model:"age",required:!0,max:2,minLength:2},{type:"title",label:"Diagnóstico digital",md:12},{type:"select",label:"¿Usa redes sociales para su negocio?",model:"question_1",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"},{label:" Solo a nivel personal",value:"personal"}]},{type:"select",label:"¿Tiene página web o tienda virtual?",model:"question_2",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Tu negocio usa pagos digitales (yape, plim, POS, etc. )?",model:"question_3",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Usas software para contabilidad/inventario?",model:"question_4",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"textarea",label:"¿Qué espera aprender en esta capacitación?",model:"question_5",required:!0,md:12,rows:3},{type:"title",label:"Detalles",md:12},{type:"select",label:"¿Cómo se enteró del evento?",model:"howKnowEvent_id",required:!0,options:[]},{type:"checkbox",label:"Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Tu Empresa, según la Ley N.º 29733",model:"autorization",required:!0,md:12,rows:3}]),_=b({visible:!1,message:"",color:"error"}),G=_e(),H=b(!1);j(H,t=>{G.global.name.value=t?"dark":"light"}),j(()=>e.birthday,t=>{t?e.age=`${K(t)}`:e.age=null});function K(t){const[o,a,i]=t.split("/").map(Number);if(!o||!a||!i)return null;const s=new Date(i,a-1,o),u=new Date;let h=u.getFullYear()-s.getFullYear();return u.getMonth()>s.getMonth()||u.getMonth()===s.getMonth()&&u.getDate()>=s.getDate()||h--,h}const Q=()=>{e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.birthday=null,e.cargo_id=null,e.age=null},X=(t=!0)=>{["ruc","razonSocial","comercialName","typeContribuyente_id","economicsector_id","rubro_id","comercialactivity_id","city_id","province_id","district_id","address"].forEach(a=>{const i=S.find(s=>s.model===a);i&&(i.disabled=t)})},J=t=>{const o=S.find(a=>a.model===t);l.value==1&&t=="ruc"&&(e.ruc=null,e.razonSocial=null,o.disabled=!o.disabled),t=="documentnumber"&&(e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null)},W=()=>{["name","lastname","middlename"].forEach(t=>{const o=S.find(a=>a.model===t);o&&(o.disabled=!0)})},Z=async(t,o)=>{if(t.model=="typedocument_id"){const a=S.find(i=>i.model==="documentnumber");a.disabled=!1,Q()}if(t.model=="rubro_id"){e.comercialactivity_id=null;const a=await q({url:`select/activity-by-rubro/${t.value}`,method:"GET"}),i=S.find(s=>s.model==="comercialactivity_id");i.options=a.data}if(t.model=="city_id"){e.province_id=null,e.district_id=null;const a=`select/provinces/${t.value}`;O(a,"province_id")}if(t.model=="province_id"){e.district_id=null;const a=`select/districts/${t.value}`;O(a,"district_id")}if(t.model=="typedocument_id"){const a=S.find(i=>i.model==="documentnumber");t.value==1?(a.max=8,W()):a.max=9}},ee=async t=>{if(t=="ruc")return ae();if(t=="documentnumber")return te()},te=async()=>{var t,o;c.documentnumber=!0,x.value=!1;try{const a=String(e.documentnumber||"").trim();if(!a){_.value.message="Ingresa un número de documento válido.";return}const i=await q({url:"events-pnte/is-this-user-registered",method:"POST",data:{slug:f.params.slug,documentnumber:a}});if(i.status===200){e.typedocument_id=null,e.documentnumber=null,_.value.message=i.message??"El usuario ya está registrado.",g.value=!0;return}if(i.status!==404){_.value.message="No se pudo validar el registro. Intenta nuevamente.";return}const s=await q({url:`consult-businessman-dni/${a}`,method:"GET"});if(s.status===200){const{data:u}=s;e.lastname=u.lastname??"",e.middlename=u.middlename??"",e.name=u.name??"",e.gender_id=u.gender_id??null,e.phone=u.phone??"",e.birthday=u.birthday?xe(u.birthday).format("DD/MM/YYYY"):"";return}x.value=!0,e.lastname="",e.middlename="",e.name="",_.value.message=s.message??"No se encontraron datos. Completa los nombres manualmente.",await T(),(t=$.value)==null||t.focus()}catch(a){console.error("Error en handleSearchDni:",a),x.value=!0,e.lastname="",e.middlename="",e.name="",_.value.message="Servicio de consulta no disponible. Completa los nombres manualmente.",await T(),(o=$.value)==null||o.focus()}finally{c.documentnumber=!1}},ae=async()=>{try{const t=await q({url:`api/consult-company-ruc/${e.ruc}`,method:"POST"});if(t.status==200){const{data:o}=t;e.comercialName=o.socialReason,c.ruc=!1}}catch(t){console.log("Error: ",t)}},oe=async()=>{var s,u;m.value=!0;const t={ruc:e.ruc,socialReason:e.razonSocial,economicsector_id:e.economicsector_id,category_id:e.rubro_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,nameService:e.estado,condicion:e.condicion},o={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,name:e.name,lastname:e.lastname,middlename:e.middlename,gender_id:e.gender_id,birthday:e.birthday,phone:e.phone},a={ruc:e.ruc,comercialName:e.comercialName,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,category_id:e.rubro_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,typeAsistente:l.value,documentnumber:e.documentnumber,sick:e.sick,phone:e.phone,email:e.email,positionCompany:e.cargo_id,howKnowEvent_id:e.howKnowEvent_id,slug:f.params.slug,age:e.age,name:e.name,lastname:e.lastname},i={question_1:e.question_1,question_2:e.question_2,question_3:e.question_3,question_4:e.question_4,question_5:e.question_5,slug:f.params.slug,documentnumber:e.documentnumber};try{(await q({url:"events-pnte/company",method:"POST",data:t})).status===200&&(await q({url:"events-pnte/businessman",method:"POST",data:o})).status===200&&(await q({url:"events-pnte/participant-registration-sed",method:"POST",data:a})).status==200&&(await q({url:"events-pnte/finally-questions-extras-sed",method:"POST",data:i})).status==200&&(l.value==1&&(d.value=!0),l.value==2&&y.push(`/registrado/${f.params.slug}`))}catch(h){m.value=!1;const k=(s=h.response)==null?void 0:s.status,N=(u=h.response)==null?void 0:u.data;if(!k){const Y=h.request?"No se recibió respuesta del servidor.":`Error al configurar la solicitud: ${h.message}`;return console.error(Y,h),{message:Y,status:500}}let E=(N==null?void 0:N.message)||"Error inesperado";switch(k){case 422:E=`Error de validación: ${E}`;break;case 404:E=`Recurso no encontrado: ${E}`;break;case 500:E=`Error del servidor: ${E}`;break;default:console.error("Error inesperado con respuesta:",h)}_.value.message=E,_.value.visible=!0}finally{m.value=!1}},le=t=>{if(t)e.typedocument_id=null,e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.cargo_id=null,e.birthday=null,e.age=null,l.value=2,X(!0),d.value=!1,T(()=>{const o=document.querySelector('[data-model="typedocument_id"]');o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),o.focus())});else return y.push(`/registrado/${f.params.slug}`)},O=async(t,o)=>{try{const a=await q({url:t,method:"GET"}),i=S.find(s=>s.model===o);i&&a.data&&(i.options=a.data)}catch(a){console.error("Error de red:",a)}},{loadSectorEconomico:ie,loadRubros:ne,loadCity:se,loadTypeDocuments:re,loadGenders:de,loadPropagandaMedia:ue}=Ee(S);return L(async()=>{await ie(),await ne(),await se(),await re(),await de(),await ue()}),(t,o)=>(v(),V("div",Ye,[n(Se,{colorForm:"#02E4A5",fields:S,onSearchDataApi:ee,onSubmit:oe,onChange:Z,onHandleClearSearch:J},null,8,["fields"]),n(Ce,{modelValue:_.value.visible,"onUpdate:modelValue":o[0]||(o[0]=a=>_.value.visible=a),color:_.value.color,top:"",right:""},{default:r(()=>[p("p",je,be(_.value.message),1)]),_:1},8,["modelValue","color"]),n(Me,{dialog:d.value,"onUpdate:dialog":o[1]||(o[1]=a=>d.value=a),onDialogChange:le},null,8,["dialog"]),n(U,{transition:"dialog-bottom-transition",modelValue:g.value,"onUpdate:modelValue":o[2]||(o[2]=a=>g.value=a),"max-width":"340"},{default:r(()=>[n(F,null,{default:r(()=>[n(we,null,{default:r(()=>[p("div",Be,[n(De,{width:60,src:qe,style:{margin:"auto"}}),o[3]||(o[3]=p("span",{style:{display:"block","margin-top":"1rem"}},"¡Ya te has registrado en este evento! No necesitas volver a hacerlo.",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Ue={key:0,class:"sed"},Ge={key:1,class:"sed"},He={__name:"[slug]",setup(w){ce("SED | Sesión de Entrenamiento Digital","Formulario de Fortalece tu Mercado","sed-pnte.ico");const e=B(),d=b({}),c=b(1),f=b(!0),y=async()=>{try{const m=e.params.slug,l=await q({url:`public/event-sed-details/${m}`,method:"GET"});d.value=(l==null?void 0:l.data)||{}}catch(m){console.error("Error de red:",m)}finally{f.value=!1}};return L(async()=>{await y()}),(m,l)=>(v(),D(ke,{class:"fill-height",fluid:""},{default:r(()=>[n(Ve,{align:"center",justify:"center"},{default:r(()=>[n(z,{cols:"12",sm:"10",md:"8",lg:"6"},{default:r(()=>[n(ve,{"model-value":f.value,class:"align-center justify-center",persistent:"",scrim:""},{default:r(()=>[n(ye,{color:"#02e4a5",size:"64",indeterminate:""})]),_:1},8,["model-value"]),f.value?C("",!0):(v(),D(F,{key:0,elevation:"4",rounded:"lg"},{default:r(()=>{var g,x;return[((g=d.value)==null?void 0:g.status)==404?(v(),V("section",Ue,[n(ge,{info:d.value},null,8,["info"])])):C("",!0),(x=d.value)!=null&&x.slug?(v(),V("section",Ge,[n(he,{info:d.value,color:"#02e4a5",slideActive:c.value},null,8,["info","slideActive"]),c.value==1?(v(),D(Oe,{key:0,infoEvent:d.value,color:"#02e4a5",onHandleInscription:l[0]||(l[0]=$=>c.value=2)},null,8,["infoEvent"])):C("",!0),c.value==2?(v(),D(Le,{key:1})):C("",!0),n(Re)])):C("",!0)]}),_:1}))]),_:1})]),_:1})]),_:1}))}},vt=A(He,[["__scopeId","data-v-74078314"]]);export{vt as default};
