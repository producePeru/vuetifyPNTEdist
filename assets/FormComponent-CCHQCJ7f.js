import{g as we,p as $e,A as Ce,ax as Se,r as f,ay as Me,l as Fe,az as Ue,aA as re,i as m,B as ae,aB as Be,aC as Ae,aD as Ie,aE as ge,h as q,s as Re,aF as De,o as Ne,w as Y,aG as Te,aH as be,aI as ze,N as ne,C as Ee,aJ as He,j as F,F as U,aK as Ge,m as ce,aL as qe,aM as Le,q as Pe,aN as Ye,G as ue,a6 as Ve,c as w,b as c,Q as g,S as fe,P as h,R as S,aa as r,Y as de,a9 as G,V as ie,U as me,T as O,X as Oe,ab as pe,O as _e,aO as je,ac as Ke}from"./index-D88vg2oH.js";import{c as N,m as We,u as Je}from"./index-C9wp7JlF.js";import"./httpRequest-kvSXxSoU.js";import"./dayjs.min-BwpRQTaQ.js";import{V as ye,a as he}from"./VRow-DLQ07Lb5.js";import{c as xe,m as Qe,b as ke,V as Xe}from"./VSnackbar-BMIrxoPv.js";import{V as Ze}from"./VDialog-QR63fUPF.js";import{V as ea,c as aa}from"./VCard-D4hw7LYg.js";import{V as oa}from"./VForm-DjbbmayO.js";const ta=$e({...Ie(),...Ae(Qe(),["inline"])},"VCheckbox"),la=we()({name:"VCheckbox",inheritAttrs:!1,props:ta(),emits:{"update:modelValue":a=>!0,"update:focused":a=>!0},setup(a,_){let{attrs:x,slots:y}=_;const v=Ce(a,"modelValue"),{isFocused:n,focus:p,blur:j}=Se(a),B=f(),T=Me();return Fe(()=>{const[I,D]=Ue(x),L=re.filterProps(a),P=xe.filterProps(a);return m(re,ae({ref:B,class:["v-checkbox",a.class]},I,L,{modelValue:v.value,"onUpdate:modelValue":$=>v.value=$,id:a.id||`checkbox-${T}`,focused:n.value,style:a.style}),{...y,default:$=>{let{id:M,messagesId:K,isDisabled:z,isReadonly:W,isValid:J}=$;return m(xe,ae(P,{id:M.value,"aria-describedby":K.value,disabled:z.value,readonly:W.value},D,{error:J.value===!1,modelValue:v.value,"onUpdate:modelValue":Q=>v.value=Q,onFocus:p,onBlur:j}),y)}})}),Be({},B)}}),na=$e({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:a=>!isNaN(parseFloat(a))},maxRows:{type:[Number,String],validator:a=>!isNaN(parseFloat(a))},suffix:String,modelModifiers:Object,...Ie(),...ze()},"VTextarea"),ra=we()({name:"VTextarea",directives:{vIntersect:ge},inheritAttrs:!1,props:na(),emits:{"click:control":a=>!0,"mousedown:control":a=>!0,"update:focused":a=>!0,"update:modelValue":a=>!0,"update:rows":a=>!0},setup(a,_){let{attrs:x,emit:y,slots:v}=_;const n=Ce(a,"modelValue"),{isFocused:p,focus:j,blur:B}=Se(a),{onIntersect:T}=qe(a),I=q(()=>typeof a.counterValue=="function"?a.counterValue(n.value):(n.value||"").toString().length),D=q(()=>{if(x.maxlength)return x.maxlength;if(!(!a.counter||typeof a.counter!="number"&&typeof a.counter!="string"))return a.counter}),L=f(),P=f(),$=Re(""),M=f(),K=q(()=>a.persistentPlaceholder||p.value||a.active);function z(){var l;M.value!==document.activeElement&&((l=M.value)==null||l.focus()),p.value||j()}function W(l){z(),y("click:control",l)}function J(l){y("mousedown:control",l)}function Q(l){l.stopPropagation(),z(),ne(()=>{n.value="",Ye(a["onClick:clear"],l)})}function se(l){var e;const o=l.target;if(n.value=o.value,(e=a.modelModifiers)!=null&&e.trim){const s=[o.selectionStart,o.selectionEnd];ne(()=>{o.selectionStart=s[0],o.selectionEnd=s[1]})}}const A=f(),E=f(Number(a.rows)),i=q(()=>["plain","underlined"].includes(a.variant));De(()=>{a.autoGrow||(E.value=Number(a.rows))});function R(){a.autoGrow&&ne(()=>{if(!A.value||!P.value)return;const l=getComputedStyle(A.value),o=getComputedStyle(P.value.$el),e=parseFloat(l.getPropertyValue("--v-field-padding-top"))+parseFloat(l.getPropertyValue("--v-input-padding-top"))+parseFloat(l.getPropertyValue("--v-field-padding-bottom")),s=A.value.scrollHeight,u=parseFloat(l.lineHeight),V=Math.max(parseFloat(a.rows)*u+e,parseFloat(o.getPropertyValue("--v-input-control-height"))),H=parseFloat(a.maxRows)*u+e||1/0,b=He(s??0,V,H);E.value=Math.floor((b-e)/u),$.value=Ee(b)})}Ne(R),Y(n,R),Y(()=>a.rows,R),Y(()=>a.maxRows,R),Y(()=>a.density,R),Y(E,l=>{y("update:rows",l)});let k;return Y(A,l=>{l?(k=new ResizeObserver(R),k.observe(A.value)):k==null||k.disconnect()}),Te(()=>{k==null||k.disconnect()}),Fe(()=>{const l=!!(v.counter||a.counter||a.counterValue),o=!!(l||v.details),[e,s]=Ue(x),{modelValue:u,...V}=re.filterProps(a),H=be.filterProps(a);return m(re,ae({ref:L,modelValue:n.value,"onUpdate:modelValue":b=>n.value=b,class:["v-textarea v-text-field",{"v-textarea--prefixed":a.prefix,"v-textarea--suffixed":a.suffix,"v-text-field--prefixed":a.prefix,"v-text-field--suffixed":a.suffix,"v-textarea--auto-grow":a.autoGrow,"v-textarea--no-resize":a.noResize||a.autoGrow,"v-input--plain-underlined":i.value},a.class],style:a.style},e,V,{centerAffix:E.value===1&&!i.value,focused:p.value}),{...v,default:b=>{let{id:C,isDisabled:X,isDirty:Z,isReadonly:oe,isValid:te}=b;return m(be,ae({ref:P,style:{"--v-textarea-control-height":$.value},onClick:W,onMousedown:J,"onClick:clear":Q,"onClick:prependInner":a["onClick:prependInner"],"onClick:appendInner":a["onClick:appendInner"]},H,{id:C.value,active:K.value||Z.value,centerAffix:E.value===1&&!i.value,dirty:Z.value||a.dirty,disabled:X.value,focused:p.value,error:te.value===!1}),{...v,default:le=>{let{props:{class:ee,...t}}=le;return F(U,null,[a.prefix&&F("span",{class:"v-text-field__prefix"},[a.prefix]),ce(F("textarea",ae({ref:M,class:ee,value:n.value,onInput:se,autofocus:a.autofocus,readonly:oe.value,disabled:X.value,placeholder:a.placeholder,rows:a.rows,name:a.name,onFocus:z,onBlur:B},t,s),null),[[ge,{handler:T},null,{once:!0}]]),a.autoGrow&&ce(F("textarea",{class:Pe([ee,"v-textarea__sizer"]),id:`${t.id}-sizer`,"onUpdate:modelValue":d=>n.value=d,ref:A,readonly:!0,"aria-hidden":"true"},null),[[Le,n.value]]),a.suffix&&F("span",{class:"v-text-field__suffix"},[a.suffix])])}})},details:o?b=>{var C;return F(U,null,[(C=v.details)==null?void 0:C.call(v,b),l&&F(U,null,[F("span",null,null),m(Ge,{active:a.persistentCounter||p.value,value:I.value,max:D.value,disabled:a.disabled},v.counter)])])}:void 0})}),Be({},L,P,M)}}),sa={key:0},ua={class:"mt-4 mb-3"},da={key:0,class:"text-red text-caption pl-4"},ia={key:8,class:"position-relative"},ha={__name:"FormComponent",props:{fields:Array,colorForm:String},emits:["submit","change","searchDataApi","handleClearSearch"],setup(a,{emit:_}){const x=_,y=a,v=f(null),n=ue("formState");if(!n)throw new Error("❌ formState no fue proporcionado desde el componente padre.");const p=ue("loadingStates"),j=ue("loadingSubmit",f(!1));f(!1),f(!1);const B=f(!1),T=f(""),I=Ve({}),D=Ve({}),L=q(()=>{const l=new Date;return l.setFullYear(l.getFullYear()-18),l.toISOString().split("T")[0]});function P(l){I[l]=!0}function $(l){I[l]=!1}async function M(l){const o=y.fields.find(e=>e.model===l);o.disabled=!0,p[l]=!0,x("searchDataApi",l)}const K=l=>{x("handleClearSearch",l)},z=f(["Facebook","Instagram","TikTok","Web"]),W=q(()=>{const l=n.socials.map(o=>o.name);return z.value.filter(o=>!l.includes(o))}),J=l=>{l&&!n.socials.find(o=>o.name===l)&&n.socials.push({name:l,link:""}),v.value=null},Q=l=>{const o=n.socials.findIndex(e=>e.name===l);o!==-1&&n.socials.splice(o,1)},se={Facebook:"https://www.facebook.com/",Instagram:"https://www.instagram.com/",TikTok:"https://www.tiktok.com/@",Web:"https://www."},A=l=>{if(!l)return!0;const o=/^(\d{2})\/(\d{2})\/(\d{4})$/,e=l.match(o);if(!e)return"Formato inválido. Usa dd/mm/aaaa";const s=parseInt(e[1],10),u=parseInt(e[2],10),V=parseInt(e[3],10);if(u<1||u>12)return"Mes inválido (1-12)";const b=new Date().getFullYear()-V;if(b<18||b>100)return"Edad debe estar entre 18 y 100 años";const C=new Date(V,u,0).getDate();return s<1||s>C?`Día inválido para el mes ${u}`:!0},E=q(()=>{const l={};for(const o of y.fields){const e=[];o.required&&e.push(N.withMessage(`Es requerido: "${o.label}"`,s=>{const u=typeof o.condition=="function"?o.condition(n):!0;return o.type==="social"?!u||Array.isArray(s)&&s.length>0&&s.every(V=>V.link.trim()!==""):!u||N.req(s)})),o.max&&e.push(N.withMessage(`${o.label} debe tener máximo ${o.max} caracteres`,s=>!s||s.length<=o.max)),o.minLength&&e.push(N.withMessage(`${o.label} debe tener mínimo ${o.minLength} caracteres`,We(o.minLength))),o.model==="ruc"&&e.push(N.withMessage("Número de RUC no válido",s=>{if(!s)return!o.required;const u=String(s);return u.length===11&&["10","15","20"].includes(u.substring(0,2))})),o.model==="documentnumber"&&e.push(N.withMessage("Número de documento no válido",s=>{if(!s)return!1;const u=String(s);return n.typedocument_id===1?/^\d{8}$/.test(u):[2,3,4,5].includes(n.typedocument_id)?/^\d{1,12}$/.test(u):!1})),o.model==="phone"&&e.push(N.withMessage("Número de celular inválido",s=>{const u=String(s||"");return/^9\d{8}$/.test(u)})),o.model==="email"&&e.push(N.withMessage("Ingresa un correo válido",s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s):!o.required)),l[o.model]=e}return l}),i=Je(E,n),R=(l,o)=>{x("change",{value:l,model:o},o)},k=async()=>{try{if(await i.value.$validate())x("submit");else{const o=y.fields.find(e=>{var s;return(s=i.value[e.model])==null?void 0:s.$invalid});o?(T.value=`Completa el campo "${o.label}"`,ne(()=>{const e=document.querySelector(`[data-model="${o.model}"]`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus())})):T.value="Corrige los errores del formulario",B.value=!0}}catch(l){console.error("Error en handleSubmit:",l)}};return De(()=>{y.fields.forEach(l=>{if(l.type==="date"){const o=n[l.model];if(!o){D[l.model]="";return}const e=new Date(o),s=String(e.getDate()).padStart(2,"0"),u=String(e.getMonth()+1).padStart(2,"0"),V=e.getFullYear();D[l.model]=`${s}/${u}/${V}`}})}),(l,o)=>(c(),w(U,null,[m(oa,{onSubmit:pe(k,["prevent"])},{default:g(()=>[m(ye,null,{default:g(()=>[(c(!0),w(U,null,fe(a.fields,e=>(c(),h(he,{key:e.model,cols:e.cols||12,md:e.md||6,class:Pe(e.py||"py-1")},{default:g(()=>{var s,u,V,H,b,C,X,Z,oe,te,le,ee;return[!e.condition||e.condition(r(n))?(c(),w(U,{key:0},[e.type==="title"?(c(),w("div",sa,[F("h4",ua,de(e.label),1)])):S("",!0),e.type==="text"?(c(),h(G,{key:1,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,color:a.colorForm,"data-model":e.model,density:"comfortable",variant:"outlined","error-messages":(s=r(i)[e.model])==null?void 0:s.$errors.map(t=>t.$message),disabled:e.disabled,onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","color","data-model","error-messages","disabled","onBlur"])):S("",!0),e.type==="textarea"?(c(),h(ra,{key:2,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,rows:e.rows||2,color:a.colorForm,"data-model":e.model,density:"comfortable",variant:"outlined","error-messages":(u=r(i)[e.model])==null?void 0:u.$errors.map(t=>t.$message),disabled:e.disabled,onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","rows","color","data-model","error-messages","disabled","onBlur"])):e.type==="select"?(c(),h(ke,{key:3,label:e.label,items:e.options,"onUpdate:modelValue":[t=>R(t,e.model),t=>r(n)[e.model]=t],"data-model":e.model,"item-title":"label","item-value":"value",color:a.colorForm,density:"comfortable",variant:"outlined",disabled:e.disabled,"menu-props":{scrim:!0,scrollStrategy:"close"},modelValue:r(n)[e.model],"error-messages":(V=r(i)[e.model])==null?void 0:V.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","items","onUpdate:modelValue","data-model","color","disabled","modelValue","error-messages","onBlur"])):e.type==="social"?(c(),w(U,{key:4},[m(ke,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=t=>v.value=t),J],label:e.label,items:W.value,"data-model":e.model,density:"comfortable",color:a.colorForm,variant:"outlined","menu-props":{scrim:!0,scrollStrategy:"close"},placeholder:"Selecciona una red","hide-details":"",class:""},null,8,["modelValue","label","items","data-model","color"]),(H=r(i).socials)!=null&&H.$error?(c(),w("span",da,de((C=(b=r(i).socials)==null?void 0:b.$errors[0])==null?void 0:C.$message),1)):S("",!0)],64)):e.type==="redes"?(c(!0),w(U,{key:5},fe(r(n).socials,(t,d)=>(c(),w("div",{key:t.name,class:"d-flex align-start",style:{gap:".5rem"}},[m(G,{label:`Link de ${t.name}`,prefix:se[t.name],density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",modelValue:r(n).socials[d].link,"onUpdate:modelValue":ve=>r(n).socials[d].link=ve},null,8,["label","prefix","data-model","color","modelValue","onUpdate:modelValue"]),m(ie,{icon:"",size:"30",color:"red",class:"mt-2",onClick:ve=>Q(t.name)},{default:g(()=>[m(me,{size:"18"},{default:g(()=>o[4]||(o[4]=[O("mdi-close")])),_:1,__:[4]})]),_:2},1032,["onClick"])]))),128)):S("",!0),e.type==="number"?(c(),h(G,{key:6,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",counter:e.max,maxlength:e.max,inputmode:"numeric",pattern:"[0-9]*",onKeypress:o[1]||(o[1]=t=>!/[0-9]/.test(t.key)&&t.preventDefault()),"error-messages":(X=r(i)[e.model])==null?void 0:X.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","counter","maxlength","error-messages","onBlur"])):S("",!0),e.type==="email"?(c(),h(G,{key:7,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",type:"email",autocomplete:"email","error-messages":(Z=r(i)[e.model])==null?void 0:Z.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","error-messages","onBlur"])):S("",!0),e.type==="search"?(c(),w("div",ia,[m(G,{label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,disabled:e.disabled,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",counter:e.max,maxlength:e.max,inputmode:"numeric",pattern:"[0-9]*",loading:r(p)[e.model],"error-messages":(oe=r(i)[e.model])==null?void 0:oe.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},{"append-inner":g(()=>{var t;return[r(p)[e.model]?(c(),h(Oe,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):ce((c(),h(me,{key:1,class:"me-2 input-search",onMousedown:o[2]||(o[2]=pe(()=>{},["prevent"])),onClick:d=>M(e.model)},{default:g(()=>o[5]||(o[5]=[O(" mdi-magnify ")])),_:2,__:[5]},1032,["onClick"])),[[_e,String(r(n)[e.model]||"").length===e.max&&!((t=r(i)[e.model])!=null&&t.$invalid)&&!r(p)[e.model]]])]}),_:2},1032,["label","modelValue","onUpdate:modelValue","disabled","data-model","color","counter","maxlength","loading","error-messages","onBlur"]),e.disabled?(c(),h(me,{key:0,class:"icon-clear-field",onClick:t=>K(e.model)},{default:g(()=>o[6]||(o[6]=[O(" mdi-window-close ")])),_:2,__:[6]},1032,["onClick"])):S("",!0)])):e.type==="dateCalendar"?(c(),w(U,{key:9},[m(G,{label:e.label,modelValue:D[e.model],"onUpdate:modelValue":t=>D[e.model]=t,density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",onClick:t=>P(e.model),"error-messages":(te=r(i)[e.model])==null?void 0:te.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","onClick","error-messages","onBlur"]),m(Ze,{modelValue:I[e.model],"onUpdate:modelValue":t=>I[e.model]=t,width:"auto"},{default:g(()=>[m(ea,null,{default:g(()=>[m(je,{modelValue:r(n)[e.model],"onUpdate:modelValue":[t=>r(n)[e.model]=t,()=>$(e.model)],max:L.value,color:"primary"},null,8,["modelValue","onUpdate:modelValue","max"]),m(aa,null,{default:g(()=>[m(Ke),m(ie,{text:"",onClick:t=>$(e.model)},{default:g(()=>o[7]||(o[7]=[O("Cancelar")])),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):e.type==="date"?(c(),h(G,{key:10,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,label:e.label,placeholder:"día/mes/año",maxlength:"10",outlined:"",clearable:"",density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",rules:[A],"error-messages":(le=r(i)[e.model])==null?void 0:le.$errors.map(t=>t.$message)},null,8,["modelValue","onUpdate:modelValue","label","data-model","color","rules","error-messages"])):e.type==="checkbox"?(c(),h(la,{key:11,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,variant:"outlined","error-messages":(ee=r(i)[e.model])==null?void 0:ee.$errors.map(t=>t.$message)},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","error-messages"])):S("",!0)],64)):S("",!0)]}),_:2},1032,["cols","md","class"]))),128))]),_:1}),m(ye,{justify:"center",class:"mt-8"},{default:g(()=>[m(he,{cols:"12",md:"6",class:"d-flex justify-center"},{default:g(()=>[m(ie,{type:"submit",color:a.colorForm,class:"btn-submit",size:"large",elevation:"2",loading:r(j)},{default:g(()=>o[8]||(o[8]=[O(" Enviar ")])),_:1,__:[8]},8,["color","loading"])]),_:1})]),_:1})]),_:1}),m(Xe,{modelValue:B.value,"onUpdate:modelValue":o[3]||(o[3]=e=>B.value=e),timeout:4e3,color:"red",location:"top"},{default:g(()=>[O(de(T.value),1)]),_:1},8,["modelValue"])],64))}};export{ha as _};
