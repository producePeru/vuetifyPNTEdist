import{u as se}from"./usePageMeta-urMP7a_5.js";import{h as p}from"./httpRequest-B4w4n6I1.js";import{_ as A,P as E,b as h,Q as b,j as u,a6 as k,r as y,a5 as M,a8 as ne,ad as de,w as F,o as z,c as N,i,Y as ce,N as ue,z as R,R as w,a7 as me,X as pe}from"./index-uNftkp_x.js";import{_ as be}from"./EventFinalized-BmSNDT5D.js";import{_ as fe}from"./SedHeader-nSWX3dnc.js";import{_ as _e}from"./verificacion-DI9pvaX9.js";import{_ as ye}from"./FormComponent-D4uhf5OB.js";import{_ as ge}from"./ModalRegistered-CdboXpn3.js";import{u as ve}from"./useFormOptions-D7Ovro3V.js";import{V as he,d as qe}from"./VDialog-CAwIAZxf.js";import{V as Se}from"./VSnackbar-gHbEUQkI.js";import{V as O,b as we}from"./VCard-D-GfgbrC.js";import{V as Ee}from"./VImg-Db67Gzlc.js";import{S as xe}from"./SedPresentation-BH5u1rbf.js";import{a as Y,V as De}from"./VRow-CNnTN6LS.js";import{V as Ve}from"./VContainer-CQ3YMnJq.js";/* empty css                                                       */import"./sed-robot-BghC5CVp.js";import"./es-CbW8cXvH.js";import"./index-xX-1ZRGK.js";import"./VForm-2tsjiBdZ.js";import"./VList-D5G2-KOq.js";import"./VAvatar-BUtcnjZi.js";import"./ssrBoot-CDzFPeMI.js";/* empty css                                                                        */const Ce={};function ke($,e){return h(),E(Y,{cols:"12",class:"mt-8"},{default:b(()=>e[0]||(e[0]=[u("div",{class:"pp03-date"},[u("h4",null," ¡Recordatorio importante para tu Sesión de Entrenamiento Digital! "),u("p",{class:"my-2"},"Para que vivas una experiencia memorable y provechosa, te pedimos tener en cuenta lo siguiente:"),u("ol",{class:"pl-4",style:{"font-size":"14px"}},[u("li",null,"Traer una laptop, tablet o smartphone para participar en los laboratorios tecnológicos."),u("li",null,"Llevar una extensión eléctrica para poder conectar tu equipo al punto de corriente."),u("li",null,"Disponer del tiempo completo para participar desde el inicio hasta el final del entrenamiento."),u("li",null,"Traer tu DNI.")])],-1)])),_:1,__:[0]})}const Re=A(Ce,[["render",ke]]),Ne={class:"custom-form"},$e={class:"text-center"},Te={style:{"text-align":"center",margin:"auto"}},Pe={__name:"SedForm",setup($){const e=k({socials:[]}),d=y(!1),c=k({}),f=M(),x=ne(),_=y(!1),n=y(1),S=y(!1);R("formState",e),R("loadingStates",c),R("loadingSubmit",_);const r=k([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[],disabled:!1},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[],disabled:!1},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[],disabled:!1},{type:"select",label:"Región",model:"city_id",required:!0,options:[],disabled:!1},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[],disabled:!1},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[],disabled:!1},{type:"text",label:"Dirección",model:"address",required:!0,disabled:!1},{type:"title",label:"Datos del Participante",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"text",label:"Cargo en la empresa",model:"cargo_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"number",label:"Edad",model:"age",required:!0,max:2,minLength:2},{type:"title",label:"Diagnóstico digital",md:12},{type:"select",label:"¿Usa redes sociales para su negocio?",model:"question_1",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"},{label:" Solo a nivel personal",value:"personal"}]},{type:"select",label:"¿Tiene página web o tienda virtual?",model:"question_2",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Tu negocio usa pagos digitales (yape, plim, POS, etc. )?",model:"question_3",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Usas software para contabilidad/inventario?",model:"question_4",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"textarea",label:"¿Qué espera aprender en esta capacitación?",model:"question_5",required:!0,md:12,rows:3},{type:"title",label:"Detalles",md:12},{type:"select",label:"¿Cómo se enteró del evento?",model:"howKnowEvent_id",required:!0,options:[]},{type:"checkbox",label:"Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Tu Empresa, según la Ley N.º 29733",model:"autorization",required:!0,md:12,rows:3}]),g=y({visible:!1,message:"",color:"error"}),U=de(),G=y(!1);F(G,t=>{U.global.name.value=t?"dark":"light"}),F(()=>e.birthday,t=>{t?e.age=`${I(t)}`:e.age=null});function I(t){const[a,o,l]=t.split("/").map(Number);if(!a||!o||!l)return null;const s=new Date(l,o-1,a),q=new Date;let m=q.getFullYear()-s.getFullYear();return q.getMonth()>s.getMonth()||q.getMonth()===s.getMonth()&&q.getDate()>=s.getDate()||m--,m}const j=()=>{e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.birthday=null,e.cargo_id=null,e.age=null},B=(t=!0)=>{["ruc","razonSocial","comercialName","typeContribuyente_id","economicsector_id","rubro_id","comercialactivity_id","city_id","province_id","district_id","address"].forEach(o=>{const l=r.find(s=>s.model===o);l&&(l.disabled=t)})},L=t=>{const a=r.find(o=>o.model===t);n.value==1&&t=="ruc"&&(e.ruc=null,e.razonSocial=null,a.disabled=!a.disabled),t=="documentnumber"&&(e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null)},C=()=>{console.log("tyiotoototot"),["name","lastname","middlename"].forEach(t=>{const a=r.find(o=>o.model===t);a&&(a.disabled=!1)})},K=()=>{["name","lastname","middlename"].forEach(t=>{const a=r.find(o=>o.model===t);a&&(a.disabled=!0)})},Q=async(t,a)=>{if(t.model=="typedocument_id"){const o=r.find(l=>l.model==="documentnumber");o.disabled=!1,j()}if(t.model=="rubro_id"){e.comercialactivity_id=null;const o=await p({url:`select/activity-by-rubro/${t.value}`,method:"GET"}),l=r.find(s=>s.model==="comercialactivity_id");l.options=o.data}if(t.model=="city_id"){e.province_id=null,e.district_id=null;const o=`select/provinces/${t.value}`;T(o,"province_id")}if(t.model=="province_id"){e.district_id=null;const o=`select/districts/${t.value}`;T(o,"district_id")}if(t.model=="typedocument_id"){const o=r.find(l=>l.model==="documentnumber");t.value==1?(o.max=8,K()):(o.max=9,C())}},H=async(t,a)=>{if(t=="ruc")return W();if(t=="documentnumber")return X()},X=async()=>{try{const t={slug:f.params.slug,documentnumber:e.documentnumber},a=await p({url:"events-pnte/is-this-user-registered",method:"POST",data:t});return a.status==200?(e.typedocument_id=null,e.documentnumber=null,c.documentnumber=!1,g.value.message=a.message,S.value=!0):e.typedocument_id!=1?(c.documentnumber=!1,C()):await J()}catch(t){console.log("Error: ",t)}},J=async()=>{try{const t=await p({url:`api/consult-businessman-dni/${e.documentnumber}`,method:"POST"});if(t.status==200){const{data:a}=t;e.lastname=a.lastname,e.middlename=a.middlename,e.name=a.name,e.gender_id=a.gender_id,e.phone=a.phone,e.birthday=qe(a.birthday).format("DD/MM/YYYY"),c.documentnumber=!1}}catch{return c.documentnumber=!1,C()}},W=async()=>{try{const t=await p({url:`api/consult-company-ruc/${e.ruc}`,method:"POST"});if(t.status==200){const{data:a}=t;e.razonSocial=a.socialReason,c.ruc=!1}}catch(t){console.log("Error: ",t)}},Z=async()=>{var s,q;_.value=!0;const t={ruc:e.ruc,socialReason:e.razonSocial,economicsector_id:e.economicsector_id,category_id:e.rubro_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,nameService:e.estado,condicion:e.condicion},a={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,name:e.name,lastname:e.lastname,middlename:e.middlename,gender_id:e.gender_id,birthday:e.birthday,phone:e.phone},o={ruc:e.ruc,comercialName:e.comercialName,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,category_id:e.rubro_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,typeAsistente:n.value,documentnumber:e.documentnumber,sick:e.sick,phone:e.phone,email:e.email,positionCompany:e.cargo_id,howKnowEvent_id:e.howKnowEvent_id,slug:f.params.slug,age:e.age,name:e.name,lastname:e.lastname},l={question_1:e.question_1,question_2:e.question_2,question_3:e.question_3,question_4:e.question_4,question_5:e.question_5,slug:f.params.slug,documentnumber:e.documentnumber};try{(await p({url:"events-pnte/company",method:"POST",data:t})).status===200&&(await p({url:"events-pnte/businessman",method:"POST",data:a})).status===200&&(await p({url:"events-pnte/participant-registration-sed",method:"POST",data:o})).status==200&&(await p({url:"events-pnte/finally-questions-extras-sed",method:"POST",data:l})).status==200&&(n.value==1&&(d.value=!0),n.value==2&&x.push(`/registrado/${f.params.slug}`))}catch(m){_.value=!1;const D=(s=m.response)==null?void 0:s.status,V=(q=m.response)==null?void 0:q.data;if(!D){const P=m.request?"No se recibió respuesta del servidor.":`Error al configurar la solicitud: ${m.message}`;return console.error(P,m),{message:P,status:500}}let v=(V==null?void 0:V.message)||"Error inesperado";switch(D){case 422:v=`Error de validación: ${v}`;break;case 404:v=`Recurso no encontrado: ${v}`;break;case 500:v=`Error del servidor: ${v}`;break;default:console.error("Error inesperado con respuesta:",m)}g.value.message=v,g.value.visible=!0}finally{_.value=!1}},ee=t=>{if(t)e.typedocument_id=null,e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.cargo_id=null,e.birthday=null,e.age=null,n.value=2,B(!0),d.value=!1,ue(()=>{const a=document.querySelector('[data-model="typedocument_id"]');a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.focus())});else return x.push(`/registrado/${f.params.slug}`)},T=async(t,a)=>{try{const o=await p({url:t,method:"GET"}),l=r.find(s=>s.model===a);l&&o.data&&(l.options=o.data)}catch(o){console.error("Error de red:",o)}},{loadSectorEconomico:te,loadRubros:ae,loadCity:oe,loadTypeDocuments:le,loadGenders:ie,loadPropagandaMedia:re}=ve(r);return z(async()=>{await te(),await ae(),await oe(),await le(),await ie(),await re()}),(t,a)=>(h(),N("div",Ne,[i(ye,{colorForm:"#02E4A5",fields:r,onSearchDataApi:H,onSubmit:Z,onChange:Q,onHandleClearSearch:L},null,8,["fields"]),i(Se,{modelValue:g.value.visible,"onUpdate:modelValue":a[0]||(a[0]=o=>g.value.visible=o),color:g.value.color,top:"",right:""},{default:b(()=>[u("p",$e,ce(g.value.message),1)]),_:1},8,["modelValue","color"]),i(ge,{dialog:d.value,"onUpdate:dialog":a[1]||(a[1]=o=>d.value=o),onDialogChange:ee},null,8,["dialog"]),i(he,{transition:"dialog-bottom-transition",modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=o=>S.value=o),"max-width":"340"},{default:b(()=>[i(O,null,{default:b(()=>[i(we,null,{default:b(()=>[u("div",Te,[i(Ee,{width:60,src:_e,style:{margin:"auto"}}),a[3]||(a[3]=u("span",{style:{display:"block","margin-top":"1rem"}},"¡Ya te has registrado en este evento! No necesitas volver a hacerlo.",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Fe={key:0,class:"sed"},Ae={key:1,class:"sed"},Me={__name:"[slug]",setup($){se("SED | Sesión de Entrenamiento Digital","Formulario de Fortalece tu Mercado","sed-pnte.ico");const e=M(),d=y({}),c=y(1),f=y(!0),x=async()=>{try{const _=e.params.slug,n=await p({url:`public/event-sed-details/${_}`,method:"GET"});d.value=(n==null?void 0:n.data)||{}}catch(_){console.error("Error de red:",_)}finally{f.value=!1}};return z(async()=>{await x()}),(_,n)=>(h(),E(Ve,{class:"fill-height",fluid:""},{default:b(()=>[i(De,{align:"center",justify:"center"},{default:b(()=>[i(Y,{cols:"12",sm:"10",md:"8",lg:"6"},{default:b(()=>[i(me,{"model-value":f.value,class:"align-center justify-center",persistent:"",scrim:""},{default:b(()=>[i(pe,{color:"#02e4a5",size:"64",indeterminate:""})]),_:1},8,["model-value"]),f.value?w("",!0):(h(),E(O,{key:0,elevation:"4",rounded:"lg"},{default:b(()=>{var S,r;return[((S=d.value)==null?void 0:S.status)==404?(h(),N("section",Fe,[i(be,{info:d.value},null,8,["info"])])):w("",!0),(r=d.value)!=null&&r.slug?(h(),N("section",Ae,[i(fe,{info:d.value,color:"#02e4a5",slideActive:c.value},null,8,["info","slideActive"]),c.value==1?(h(),E(xe,{key:0,infoEvent:d.value,color:"#02e4a5",onHandleInscription:n[0]||(n[0]=g=>c.value=2)},null,8,["infoEvent"])):w("",!0),c.value==2?(h(),E(Pe,{key:1})):w("",!0),i(Re)])):w("",!0)]}),_:1}))]),_:1})]),_:1})]),_:1}))}},dt=A(Me,[["__scopeId","data-v-74078314"]]);export{dt as default};
