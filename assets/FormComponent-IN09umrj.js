import{g as we,p as $e,v as Ce,av as Se,r as f,aw as Me,h as Fe,ax as Ue,ay as re,e as m,y as ae,az as Be,aA as Re,aB as Ie,aC as ge,d as G,s as Ae,aD as De,x as Ne,w as Y,aE as Te,aF as be,aG as ze,J as ne,z as Ee,aH as He,f as U,F as B,aI as Le,i as ce,aJ as Ge,aK as qe,j as Pe,aL as Ye,C as ue,a4 as Ve,P as w,O as c,N as g,R as fe,L as h,Q as F,a8 as r,W as de,a7 as L,V as ie,T as me,U as _,S as _e,a9 as pe,K as je,aM as Oe,aa as Ke}from"./index-CHlpuGkY.js";import{c as N,m as We,u as Je}from"./index-QFlTfhIp.js";import"./httpRequest-kvSXxSoU.js";import"./dayjs.min-DGqGhg_V.js";import{V as ye,a as he}from"./VRow-D5Wj4ndc.js";import{c as xe,m as Qe,b as ke,V as Xe}from"./VSnackbar-DZYqTyBt.js";import{V as Ze}from"./VDialog-DfgchZoA.js";import{V as ea,c as aa}from"./VCard-CNSJNEgF.js";import{V as oa}from"./VForm-BoYt8fbG.js";const ta=$e({...Ie(),...Re(Qe(),["inline"])},"VCheckbox"),la=we()({name:"VCheckbox",inheritAttrs:!1,props:ta(),emits:{"update:modelValue":a=>!0,"update:focused":a=>!0},setup(a,j){let{attrs:x,slots:y}=j;const v=Ce(a,"modelValue"),{isFocused:n,focus:p,blur:O}=Se(a),I=f(),T=Me();return Fe(()=>{const[D,P]=Ue(x),q=re.filterProps(a),M=xe.filterProps(a);return m(re,ae({ref:I,class:["v-checkbox",a.class]},D,q,{modelValue:v.value,"onUpdate:modelValue":$=>v.value=$,id:a.id||`checkbox-${T}`,focused:n.value,style:a.style}),{...y,default:$=>{let{id:R,messagesId:K,isDisabled:z,isReadonly:W,isValid:J}=$;return m(xe,ae(M,{id:R.value,"aria-describedby":K.value,disabled:z.value,readonly:W.value},P,{error:J.value===!1,modelValue:v.value,"onUpdate:modelValue":Q=>v.value=Q,onFocus:p,onBlur:O}),y)}})}),Be({},I)}}),na=$e({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:a=>!isNaN(parseFloat(a))},maxRows:{type:[Number,String],validator:a=>!isNaN(parseFloat(a))},suffix:String,modelModifiers:Object,...Ie(),...ze()},"VTextarea"),ra=we()({name:"VTextarea",directives:{vIntersect:ge},inheritAttrs:!1,props:na(),emits:{"click:control":a=>!0,"mousedown:control":a=>!0,"update:focused":a=>!0,"update:modelValue":a=>!0,"update:rows":a=>!0},setup(a,j){let{attrs:x,emit:y,slots:v}=j;const n=Ce(a,"modelValue"),{isFocused:p,focus:O,blur:I}=Se(a),{onIntersect:T}=Ge(a),D=G(()=>typeof a.counterValue=="function"?a.counterValue(n.value):(n.value||"").toString().length),P=G(()=>{if(x.maxlength)return x.maxlength;if(!(!a.counter||typeof a.counter!="number"&&typeof a.counter!="string"))return a.counter}),q=f(),M=f(),$=Ae(""),R=f(),K=G(()=>a.persistentPlaceholder||p.value||a.active);function z(){var l;R.value!==document.activeElement&&((l=R.value)==null||l.focus()),p.value||O()}function W(l){z(),y("click:control",l)}function J(l){y("mousedown:control",l)}function Q(l){l.stopPropagation(),z(),ne(()=>{n.value="",Ye(a["onClick:clear"],l)})}function se(l){var e;const o=l.target;if(n.value=o.value,(e=a.modelModifiers)!=null&&e.trim){const s=[o.selectionStart,o.selectionEnd];ne(()=>{o.selectionStart=s[0],o.selectionEnd=s[1]})}}const C=f(),E=f(Number(a.rows)),i=G(()=>["plain","underlined"].includes(a.variant));De(()=>{a.autoGrow||(E.value=Number(a.rows))});function A(){a.autoGrow&&ne(()=>{if(!C.value||!M.value)return;const l=getComputedStyle(C.value),o=getComputedStyle(M.value.$el),e=parseFloat(l.getPropertyValue("--v-field-padding-top"))+parseFloat(l.getPropertyValue("--v-input-padding-top"))+parseFloat(l.getPropertyValue("--v-field-padding-bottom")),s=C.value.scrollHeight,u=parseFloat(l.lineHeight),V=Math.max(parseFloat(a.rows)*u+e,parseFloat(o.getPropertyValue("--v-input-control-height"))),H=parseFloat(a.maxRows)*u+e||1/0,b=He(s??0,V,H);E.value=Math.floor((b-e)/u),$.value=Ee(b)})}Ne(A),Y(n,A),Y(()=>a.rows,A),Y(()=>a.maxRows,A),Y(()=>a.density,A),Y(E,l=>{y("update:rows",l)});let k;return Y(C,l=>{l?(k=new ResizeObserver(A),k.observe(C.value)):k==null||k.disconnect()}),Te(()=>{k==null||k.disconnect()}),Fe(()=>{const l=!!(v.counter||a.counter||a.counterValue),o=!!(l||v.details),[e,s]=Ue(x),{modelValue:u,...V}=re.filterProps(a),H=be.filterProps(a);return m(re,ae({ref:q,modelValue:n.value,"onUpdate:modelValue":b=>n.value=b,class:["v-textarea v-text-field",{"v-textarea--prefixed":a.prefix,"v-textarea--suffixed":a.suffix,"v-text-field--prefixed":a.prefix,"v-text-field--suffixed":a.suffix,"v-textarea--auto-grow":a.autoGrow,"v-textarea--no-resize":a.noResize||a.autoGrow,"v-input--plain-underlined":i.value},a.class],style:a.style},e,V,{centerAffix:E.value===1&&!i.value,focused:p.value}),{...v,default:b=>{let{id:S,isDisabled:X,isDirty:Z,isReadonly:oe,isValid:te}=b;return m(be,ae({ref:M,style:{"--v-textarea-control-height":$.value},onClick:W,onMousedown:J,"onClick:clear":Q,"onClick:prependInner":a["onClick:prependInner"],"onClick:appendInner":a["onClick:appendInner"]},H,{id:S.value,active:K.value||Z.value,centerAffix:E.value===1&&!i.value,dirty:Z.value||a.dirty,disabled:X.value,focused:p.value,error:te.value===!1}),{...v,default:le=>{let{props:{class:ee,...t}}=le;return U(B,null,[a.prefix&&U("span",{class:"v-text-field__prefix"},[a.prefix]),ce(U("textarea",ae({ref:R,class:ee,value:n.value,onInput:se,autofocus:a.autofocus,readonly:oe.value,disabled:X.value,placeholder:a.placeholder,rows:a.rows,name:a.name,onFocus:z,onBlur:I},t,s),null),[[ge,{handler:T},null,{once:!0}]]),a.autoGrow&&ce(U("textarea",{class:Pe([ee,"v-textarea__sizer"]),id:`${t.id}-sizer`,"onUpdate:modelValue":d=>n.value=d,ref:C,readonly:!0,"aria-hidden":"true"},null),[[qe,n.value]]),a.suffix&&U("span",{class:"v-text-field__suffix"},[a.suffix])])}})},details:o?b=>{var S;return U(B,null,[(S=v.details)==null?void 0:S.call(v,b),l&&U(B,null,[U("span",null,null),m(Le,{active:a.persistentCounter||p.value,value:D.value,max:P.value,disabled:a.disabled},v.counter)])])}:void 0})}),Be({},q,M,R)}}),sa={key:0},ua={class:"mt-4 mb-3"},da={key:0,class:"text-red text-caption pl-4"},ia={key:8,class:"position-relative"},ha={__name:"FormComponent",props:{fields:Array,colorForm:String},emits:["submit","change","searchDataApi","handleClearSearch"],setup(a,{emit:j}){const x=j,y=a,v=f(null),n=ue("formState");if(!n)throw new Error("❌ formState no fue proporcionado desde el componente padre.");const p=ue("loadingStates"),O=ue("loadingSubmit",f(!1));f(!1),f(!1);const I=f(!1),T=f(""),D=Ve({}),P=Ve({}),q=G(()=>{const l=new Date;return l.setFullYear(l.getFullYear()-18),l.toISOString().split("T")[0]});function M(l){D[l]=!0}function $(l){D[l]=!1}async function R(l){const o=y.fields.find(e=>e.model===l);o.disabled=!0,p[l]=!0,x("searchDataApi",l)}const K=l=>{x("handleClearSearch",l)},z=f(["Facebook","Instagram","TikTok","Web"]),W=G(()=>{const l=n.socials.map(o=>o.name);return z.value.filter(o=>!l.includes(o))}),J=l=>{l&&!n.socials.find(o=>o.name===l)&&n.socials.push({name:l,link:""}),v.value=null},Q=l=>{const o=n.socials.findIndex(e=>e.name===l);o!==-1&&n.socials.splice(o,1)},se={Facebook:"https://www.facebook.com/",Instagram:"https://www.instagram.com/",TikTok:"https://www.tiktok.com/@",Web:"https://www."},C=l=>{if(!l)return!0;const o=/^(\d{2})\/(\d{2})\/(\d{4})$/,e=l.match(o);if(!e)return"Formato inválido. Usa dd/mm/aaaa";const s=parseInt(e[1],10),u=parseInt(e[2],10),V=parseInt(e[3],10);if(u<1||u>12)return"Mes inválido (1-12)";const b=new Date().getFullYear()-V;if(b<18||b>100)return"Edad debe estar entre 18 y 100 años";const S=new Date(V,u,0).getDate();return s<1||s>S?`Día inválido para el mes ${u}`:!0},E=G(()=>{const l={};for(const o of y.fields){const e=[];o.required&&e.push(N.withMessage(`Es requerido: "${o.label}"`,s=>{const u=typeof o.condition=="function"?o.condition(n):!0;return o.type==="social"?!u||Array.isArray(s)&&s.length>0&&s.every(V=>V.link.trim()!==""):!u||N.req(s)})),o.max&&e.push(N.withMessage(`${o.label} debe tener máximo ${o.max} caracteres`,s=>!s||s.length<=o.max)),o.minLength&&e.push(N.withMessage(`${o.label} debe tener mínimo ${o.minLength} caracteres`,We(o.minLength))),o.model==="ruc"&&e.push(N.withMessage("Número de RUC no válido",s=>{if(!s)return!o.required;const u=String(s);return u.length===11&&["10","15","20"].includes(u.substring(0,2))})),o.model==="documentnumber"&&e.push(N.withMessage("Número de documento no válido",s=>{if(!s)return!1;const u=String(s);return n.typedocument_id===1?/^\d{8}$/.test(u):[2,3,4,5].includes(n.typedocument_id)?/^\d{1,12}$/.test(u):!1})),o.model==="phone"&&e.push(N.withMessage("Número de celular inválido",s=>{const u=String(s||"");return/^9\d{8}$/.test(u)})),o.model==="email"&&e.push(N.withMessage("Ingresa un correo válido",s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s):!o.required)),l[o.model]=e}return l}),i=Je(E,n),A=(l,o)=>{x("change",{value:l,model:o},o)},k=async()=>{try{if(await i.value.$validate())x("submit");else{const o=y.fields.find(e=>{var s;return(s=i.value[e.model])==null?void 0:s.$invalid});o?(T.value=`Completa el campo "${o.label}"`,ne(()=>{const e=document.querySelector(`[data-model="${o.model}"]`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus())})):T.value="Corrige los errores del formulario",I.value=!0}}catch(l){console.error("Error en handleSubmit:",l)}};return De(()=>{y.fields.forEach(l=>{if(l.type==="date"){const o=n[l.model];if(!o){P[l.model]="";return}const e=new Date(o),s=String(e.getDate()).padStart(2,"0"),u=String(e.getMonth()+1).padStart(2,"0"),V=e.getFullYear();P[l.model]=`${s}/${u}/${V}`}})}),(l,o)=>(c(),w(B,null,[m(oa,{onSubmit:pe(k,["prevent"])},{default:g(()=>[m(ye,null,{default:g(()=>[(c(!0),w(B,null,fe(a.fields,e=>(c(),h(he,{key:e.model,cols:e.cols||12,md:e.md||6,class:Pe(e.py||"py-1")},{default:g(()=>{var s,u,V,H,b,S,X,Z,oe,te,le,ee;return[!e.condition||e.condition(r(n))?(c(),w(B,{key:0},[e.type==="title"?(c(),w("div",sa,[U("h4",ua,de(e.label),1)])):F("",!0),e.type==="text"?(c(),h(L,{key:1,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,color:a.colorForm,"data-model":e.model,density:"comfortable",variant:"outlined","error-messages":(s=r(i)[e.model])==null?void 0:s.$errors.map(t=>t.$message),disabled:e.disabled,onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","color","data-model","error-messages","disabled","onBlur"])):F("",!0),e.type==="textarea"?(c(),h(ra,{key:2,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,rows:e.rows||2,color:a.colorForm,"data-model":e.model,density:"comfortable",variant:"outlined","error-messages":(u=r(i)[e.model])==null?void 0:u.$errors.map(t=>t.$message),disabled:e.disabled,onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","rows","color","data-model","error-messages","disabled","onBlur"])):e.type==="select"?(c(),h(ke,{key:3,label:e.label,items:e.options,"onUpdate:modelValue":[t=>A(t,e.model),t=>r(n)[e.model]=t],"data-model":e.model,"item-title":"label","item-value":"value",color:a.colorForm,density:"comfortable",variant:"outlined",disabled:e.disabled,"menu-props":{scrim:!0,scrollStrategy:"close"},modelValue:r(n)[e.model],"error-messages":(V=r(i)[e.model])==null?void 0:V.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","items","onUpdate:modelValue","data-model","color","disabled","modelValue","error-messages","onBlur"])):e.type==="social"?(c(),w(B,{key:4},[m(ke,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=t=>v.value=t),J],label:e.label,items:W.value,"data-model":e.model,density:"comfortable",color:a.colorForm,variant:"outlined","menu-props":{scrim:!0,scrollStrategy:"close"},placeholder:"Selecciona una red","hide-details":"",class:""},null,8,["modelValue","label","items","data-model","color"]),(H=r(i).socials)!=null&&H.$error?(c(),w("span",da,de((S=(b=r(i).socials)==null?void 0:b.$errors[0])==null?void 0:S.$message),1)):F("",!0)],64)):e.type==="redes"?(c(!0),w(B,{key:5},fe(r(n).socials,(t,d)=>(c(),w("div",{key:t.name,class:"d-flex align-start",style:{gap:".5rem"}},[m(L,{label:`Link de ${t.name}`,prefix:se[t.name],density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",modelValue:r(n).socials[d].link,"onUpdate:modelValue":ve=>r(n).socials[d].link=ve},null,8,["label","prefix","data-model","color","modelValue","onUpdate:modelValue"]),m(ie,{icon:"",size:"30",color:"red",class:"mt-2",onClick:ve=>Q(t.name)},{default:g(()=>[m(me,{size:"18"},{default:g(()=>o[4]||(o[4]=[_("mdi-close")])),_:1,__:[4]})]),_:2},1032,["onClick"])]))),128)):F("",!0),e.type==="number"?(c(),h(L,{key:6,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",counter:e.max,maxlength:e.max,inputmode:"numeric",pattern:"[0-9]*",onKeypress:o[1]||(o[1]=t=>!/[0-9]/.test(t.key)&&t.preventDefault()),"error-messages":(X=r(i)[e.model])==null?void 0:X.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","counter","maxlength","error-messages","onBlur"])):F("",!0),e.type==="email"?(c(),h(L,{key:7,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",type:"email",autocomplete:"email","error-messages":(Z=r(i)[e.model])==null?void 0:Z.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","error-messages","onBlur"])):F("",!0),e.type==="search"?(c(),w("div",ia,[m(L,{label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,disabled:e.disabled,"data-model":e.model,color:a.colorForm,density:"comfortable",variant:"outlined",counter:e.max,maxlength:e.max,inputmode:"numeric",pattern:"[0-9]*",loading:r(p)[e.model],"error-messages":(oe=r(i)[e.model])==null?void 0:oe.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},{"append-inner":g(()=>{var t;return[r(p)[e.model]?(c(),h(_e,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):ce((c(),h(me,{key:1,class:"me-2 input-search",onMousedown:o[2]||(o[2]=pe(()=>{},["prevent"])),onClick:d=>R(e.model)},{default:g(()=>o[5]||(o[5]=[_(" mdi-magnify ")])),_:2,__:[5]},1032,["onClick"])),[[je,String(r(n)[e.model]||"").length===e.max&&!((t=r(i)[e.model])!=null&&t.$invalid)&&!r(p)[e.model]]])]}),_:2},1032,["label","modelValue","onUpdate:modelValue","disabled","data-model","color","counter","maxlength","loading","error-messages","onBlur"]),e.disabled?(c(),h(me,{key:0,class:"icon-clear-field",onClick:t=>K(e.model)},{default:g(()=>o[6]||(o[6]=[_(" mdi-window-close ")])),_:2,__:[6]},1032,["onClick"])):F("",!0)])):e.type==="dateCalendar"?(c(),w(B,{key:9},[m(L,{label:e.label,modelValue:P[e.model],"onUpdate:modelValue":t=>P[e.model]=t,density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",onClick:t=>M(e.model),"error-messages":(te=r(i)[e.model])==null?void 0:te.$errors.map(t=>t.$message),onBlur:t=>{var d;return(d=r(i)[e.model])==null?void 0:d.$touch()}},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","onClick","error-messages","onBlur"]),m(Ze,{modelValue:D[e.model],"onUpdate:modelValue":t=>D[e.model]=t,width:"auto"},{default:g(()=>[m(ea,null,{default:g(()=>[m(Oe,{modelValue:r(n)[e.model],"onUpdate:modelValue":[t=>r(n)[e.model]=t,()=>$(e.model)],max:q.value,color:"primary"},null,8,["modelValue","onUpdate:modelValue","max"]),m(aa,null,{default:g(()=>[m(Ke),m(ie,{text:"",onClick:t=>$(e.model)},{default:g(()=>o[7]||(o[7]=[_("Cancelar")])),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):e.type==="date"?(c(),h(L,{key:10,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,label:e.label,placeholder:"día/mes/año",maxlength:"10",outlined:"",clearable:"",density:"comfortable","data-model":e.model,color:a.colorForm,variant:"outlined",rules:[C],"error-messages":(le=r(i)[e.model])==null?void 0:le.$errors.map(t=>t.$message)},null,8,["modelValue","onUpdate:modelValue","label","data-model","color","rules","error-messages"])):e.type==="checkbox"?(c(),h(la,{key:11,label:e.label,modelValue:r(n)[e.model],"onUpdate:modelValue":t=>r(n)[e.model]=t,"data-model":e.model,color:a.colorForm,variant:"outlined",rules:[C],"error-messages":(ee=r(i)[e.model])==null?void 0:ee.$errors.map(t=>t.$message)},null,8,["label","modelValue","onUpdate:modelValue","data-model","color","rules","error-messages"])):F("",!0)],64)):F("",!0)]}),_:2},1032,["cols","md","class"]))),128))]),_:1}),m(ye,{justify:"center",class:"mt-8"},{default:g(()=>[m(he,{cols:"12",md:"6",class:"d-flex justify-center"},{default:g(()=>[m(ie,{type:"submit",color:a.colorForm,class:"btn-submit",size:"large",elevation:"2",loading:r(O)},{default:g(()=>o[8]||(o[8]=[_(" Enviar ")])),_:1,__:[8]},8,["color","loading"])]),_:1})]),_:1})]),_:1}),m(Xe,{modelValue:I.value,"onUpdate:modelValue":o[3]||(o[3]=e=>I.value=e),timeout:4e3,color:"red",location:"top"},{default:g(()=>[_(de(T.value),1)]),_:1},8,["modelValue"])],64))}};export{ha as _};
