import{u as M,_ as B}from"./useFormOptions-BrmDUjag.js";import{h as p}from"./VTooltip-BE-eFO6n.js";import{_ as w,c as q,o as b,w as c,b as r,x as _,v as G,A as O,r as v,L as I,m as U,y as j,f as Y,a as n,t as H,F as J,M as y}from"./index-Bj7pDRfw.js";import{f as Q}from"./format-BWHQx2uA.js";import{V as S,a as W}from"./VRow-CpZeyeGj.js";import{V as X}from"./VContainer-CS3QD94w.js";import{V as Z}from"./VCard-DEDxSb2w.js";import"./index-BrCKSrYf.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VAutocomplete-oqh6nXB1.js";import"./VSelect-gd9h_pvK.js";import"./VAvatar-CP0xry5D.js";import"./VDialog-B-EgBcpD.js";import"./VForm-DL8YvsMU.js";import"./VSnackbar-eY1mUPB4.js";import"./index-Dq7h7Pqt.js";const ee={};function ie(f,e){return b(),q(S,{cols:"12",class:"mt-8"},{default:c(()=>e[0]||(e[0]=[r("div",{class:"pp03-date"},[r("h4",null," ¡Recordatorio importante para tu Sesión de Entrenamiento Digital! "),r("p",{class:"my-2"},"Para que vivas una experiencia memorable y provechosa, te pedimos tener en cuenta lo siguiente:"),r("ol",{class:"pl-4",style:{"font-size":"14px"}},[r("li",null,"Traer una laptop, tablet o smartphone para participar en los laboratorios tecnológicos."),r("li",null,"Llevar una extensión eléctrica para poder conectar tu equipo al punto de corriente."),r("li",null,"Disponer del tiempo completo para participar desde el inicio hasta el final del entrenamiento."),r("li",null,"Traer tu DNI.")])],-1)])),_:1,__:[0]})}const te=w(ee,[["render",ie]]),oe={class:"custom-form"},ae={__name:"SedForm",setup(f){const e=_({socials:[]}),d=_({}),h=G();O();const s=v(!1);y("formState",e),y("loadingStates",d),y("loadingSubmit",s);const l=_([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[]},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[]},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[]},{type:"select",label:"Región",model:"city_id",required:!0,options:[]},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[]},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[]},{type:"text",label:"Dirección",model:"address",required:!0},{type:"title",label:"Datos Personales",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!0},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"text",label:"Cargo en la empresa",model:"cargo_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"number",label:"Edad",model:"age",required:!0,max:2,minLength:2},{type:"title",label:"Detalles",md:12},{type:"select",label:"¿Cómo se enteró del evento?",model:"howKnowEvent_id",required:!0,options:[]}]),x=I(),C=v(!1);U(C,i=>{x.global.name.value=i?"dark":"light"});const E=()=>{e.ruc=null,e.razonSocial=null,e.comercialName=null,e.economicsector_id=null,e.rubro_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.address=null,e.howKnowEvent_id=null,e.typedocument_id=null},g=()=>{e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.birthday=null,e.cargo_id=null,e.age=null},D=()=>{["name","lastname","middlename"].forEach(i=>{const a=l.find(o=>o.model===i);a&&(a.disabled=!1)})},N=()=>{["name","lastname","middlename"].forEach(i=>{const a=l.find(o=>o.model===i);a&&(a.disabled=!0)})},F=(i,a)=>{if(i.model=="typedocument_id"){const o=l.find(t=>t.model==="documentnumber");o.disabled=!1,g()}if(i.model=="city_id"){e.province_id=null,e.district_id=null;const o=`select/provinces/${i.value}`;m(o,"province_id")}if(i.model=="province_id"){e.district_id=null;const o=`select/districts/${i.value}`;m(o,"district_id")}if(i.model=="typedocument_id"){console.log("oaoaoaoaoao",i,a);const o=l.find(t=>t.model==="documentnumber");i.value==1?(o.max=8,N()):o.max=9}},A=async i=>{let a=null;if(i=="ruc"&&(a=`public/consult-company-ruc/${e.ruc}`),i=="documentnumber")if(e.typedocument_id=="1")a=`public/consult-businessman-dni/${e.documentnumber}`;else return D(),d[i]=!1;try{const o=await p({url:a,method:"POST"});if(o.status==200){const{data:t}=o;if(i=="ruc"){if(e.comercialactivity_id=t.actividadComercial_id,e.condicion=t.condicion,e.address=t.direccion,e.estado=t.estado,e.razonSocial=t.razonSocial??null,e.city_id=t.region_id,e.estado=t.estado,e.condicion=t.condicion,t.region_id){const u=`select/provinces/${t.region_id}`;m(u,"province_id"),e.province_id=t.provincia_id}e.comercialName=t.rubro_id,e.economicsector_id=t.sectorEconomico_id}i=="documentnumber"&&(e.lastname=t.lastname,e.middlename=t.middlename,e.name=t.name,e.gender_id=t.gender_id,e.phone=t.phone,e.birthday=t.birthday)}}catch(o){console.log(o)}finally{d[i]=!1}},R=async()=>{e.ruc,e.razonSocial,e.economicsector_id,e.rubro_id,e.comercialactivity_id,e.city_id,e.province_id,e.district_id,e.address,e.estado,e.condicion,e.typedocument_id,e.documentnumber,e.name,e.lastname,e.middlename,e.gender_id,e.birthday,e.phone;const i={comercialName:e.comercialName,discapacity:e.sick,email:e.email,cargo:e.cargo_id,age:e.age,howKnowEvent_id:e.howKnowEvent_id,ruc:e.ruc,dni:e.documentnumber,slug:h.params.slug};e.ruc,e.comercialName,e.razonSocial,e.economicsector_id,e.rubro_id,e.comercialactivity_id,e.city_id,e.province_id,e.district_id,e.address,e.typedocument_id,e.documentnumber,e.name,e.lastname,e.middlename,e.gender_id,e.sick,e.phone,e.email,e.cargo_id,e.birthday&&Q(typeof e.birthday=="string"?new Date(e.birthday):e.birthday,"yyyy-MM-dd"),e.age,e.howKnowEvent_id,h.params.slug,s.value=!0;try{const a=await p({url:"pnte-event/register-sed-event",method:"POST",data:i});a.status==200&&(alert("Asistencia registrada correctamente"),g(),E()),a.status==409&&alert("Ya estás registrado en este evento con este número de documento.")}catch(a){console.error("Error de red:",a)}finally{s.value=!1}},m=async(i,a)=>{try{const o=await p({url:i,method:"GET"}),t=l.find(u=>u.model===a);t&&o.data&&(t.options=o.data)}catch(o){console.error("Error de red:",o)}},{loadSectorEconomico:T,loadRubros:k,loadActividadComercial:z,loadCity:P,loadTypeDocuments:V,loadGenders:$,loadPropagandaMedia:K,loadTaxpayerTypes:L}=M(l);return j(async()=>{await T(),await k(),await L(),await z(),await P(),await V(),await $(),await K()}),(i,a)=>(b(),Y(J,null,[r("div",oe,[n(B,{fields:l,onSearchDataApi:A,onSubmit:R,colorForm:"#02E4A5",onChange:F},null,8,["fields"])]),r("pre",null,H(e),1)],64))}},re={__name:"[slug]",setup(f){return(e,d)=>(b(),q(X,{class:"fill-height",fluid:""},{default:c(()=>[n(W,{align:"center",justify:"center"},{default:c(()=>[n(S,{cols:"12",sm:"10",md:"8",lg:"6"},{default:c(()=>[n(Z,{elevation:"4",rounded:"lg",class:"sed"},{default:c(()=>[d[0]||(d[0]=r("h2",{class:"mb-6"},"Formulario de Asistencia al evento de SEDss - PUCALLPA",-1)),n(ae),n(te)]),_:1,__:[0]})]),_:1})]),_:1})]),_:1}))}},qe=w(re,[["__scopeId","data-v-85a690fe"]]);export{qe as default};
