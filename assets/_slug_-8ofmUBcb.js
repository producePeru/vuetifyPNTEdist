import{u as se}from"./usePageMeta-Ciy4asza.js";import{h}from"./httpRequest-kvSXxSoU.js";import{_ as P,P as D,b as y,Q as s,j as m,h as de,c as V,i as r,ac as ue,V as R,T,R as x,a6 as $,r as q,a5 as z,a8 as ce,ad as me,w as O,o as Y,Y as pe,N as fe,z as N,a7 as _e,X as be}from"./index-Ds25wCkp.js";import{_ as ye}from"./EventFinalized-C1fOm6K_.js";import{_ as ge}from"./SedHeader-CCCPOegK.js";import{_ as ve}from"./verificacion-DI9pvaX9.js";import{_ as he}from"./FormComponent-BySrqXxb.js";import{V as M,b as qe}from"./VCard-C0uvv7UQ.js";import{V as j}from"./VDialog-CaHuxABm.js";import{u as Se}from"./useFormOptions-DNeVbNCH.js";import{d as we}from"./dayjs.min-CTHrP8nY.js";import{V as Ee}from"./VSnackbar-Br32fxTk.js";import{V as xe}from"./VImg-B0gj2Anx.js";/* empty css                                                                        */import{a as I,V as De}from"./VRow-DomTXYOb.js";import{V as Ve}from"./VContainer-DpRYIZ78.js";/* empty css                                                       */import"./sed-robot-BghC5CVp.js";import"./es-Bvn2ImxR.js";import"./index-CFh431OU.js";import"./VForm-BRg9pAz3.js";import"./VAvatar-CW3WTZ6K.js";import"./ssrBoot-OYZIR0zb.js";const ke={};function Ce(S,e){return y(),D(I,{cols:"12",class:"mt-8"},{default:s(()=>e[0]||(e[0]=[m("div",{class:"pp03-date"},[m("h4",null," ¡Recordatorio importante para tu Sesión de Entrenamiento Digital! "),m("p",{class:"my-2"},"Para que vivas una experiencia memorable y provechosa, te pedimos tener en cuenta lo siguiente:"),m("ol",{class:"pl-4",style:{"font-size":"14px"}},[m("li",null,"Traer una laptop, tablet o smartphone para participar en los laboratorios tecnológicos."),m("li",null,"Llevar una extensión eléctrica para poder conectar tu equipo al punto de corriente."),m("li",null,"Disponer del tiempo completo para participar desde el inicio hasta el final del entrenamiento."),m("li",null,"Traer tu DNI.")])],-1)])),_:1,__:[0]})}const $e=P(ke,[["render",Ce]]),Ne={class:"text-center pa-4"},Re={class:"d-flex align-center justify-space-between ga-4 w-100"},Te={__name:"ModalRegistered",props:{dialog:{type:Boolean,default:!1}},emits:["update:dialog","dialog-change"],setup(S,{emit:e}){const d=S,u=e,p=de({get:()=>d.dialog,set:c=>u("update:dialog",c)}),g=c=>{u("dialog-change",c)};return(c,l)=>(y(),V("div",Ne,[r(j,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=b=>p.value=b),"max-width":"400",persistent:""},{default:s(()=>[r(M,{"prepend-icon":"mdi-account-group",text:"¿Deseas registrar un nuevo invitado al evento?",title:"Invitado"},{actions:s(()=>[r(ue),m("div",Re,[r(R,{onClick:l[0]||(l[0]=b=>g(!1)),color:"grey-darken-1",variant:"outlined",style:{border:"none"}},{default:s(()=>l[3]||(l[3]=[T(" No, gracias ")])),_:1,__:[3]}),r(R,{onClick:l[1]||(l[1]=b=>g(!0)),color:"#02e4a5",variant:"elevated",style:{color:"#fff"}},{default:s(()=>l[4]||(l[4]=[T(" Si, registrar ")])),_:1,__:[4]})])]),_:1})]),_:1},8,["modelValue"])]))}},Pe={key:0},Me=["innerHTML"],Ie={class:"d-flex justify-center mt-12"},Ae={__name:"SedPresentation",props:{infoEvent:{type:Object,required:!0,default:()=>({})},color:{type:String,default:"primary"}},emits:["handleInscription"],setup(S,{emit:e}){const d=e,u=()=>{d("handleInscription")};return(p,g)=>(y(),D(I,{cols:"12",class:"mt-8"},{default:s(()=>[S.infoEvent?(y(),V("div",Pe,[m("div",{innerHTML:S.infoEvent.description},null,8,Me),m("div",Ie,[r(R,{color:S.color,elevation:"2",variant:"flat",class:"btn-sed-presentation",onClick:u},{default:s(()=>g[0]||(g[0]=[T(" INSCRIBIRME ")])),_:1,__:[0]},8,["color"])])])):x("",!0)]),_:1}))}},Fe=P(Ae,[["__scopeId","data-v-7ca2d4e9"]]),Oe={class:"custom-form"},ze={class:"text-center"},Ye={style:{"text-align":"center",margin:"auto"}},je={__name:"SedForm",setup(S){const e=$({socials:[]}),d=q(!1),u=$({}),p=z(),g=ce(),c=q(!1),l=q(1),b=q(!1);N("formState",e),N("loadingStates",u),N("loadingSubmit",c);const f=$([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"text",label:"Nombre Comercial (marca)",model:"comercialName",required:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[],disabled:!1},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[],disabled:!1},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[],disabled:!1},{type:"select",label:"Región",model:"city_id",required:!0,options:[],disabled:!1},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[],disabled:!1},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[],disabled:!1},{type:"text",label:"Dirección",model:"address",required:!0,disabled:!1},{type:"title",label:"Datos del Participante",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"text",label:"Cargo en la empresa",model:"cargo_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"number",label:"Edad",model:"age",required:!0,max:2,minLength:2},{type:"title",label:"Diagnóstico digital",md:12},{type:"select",label:"¿Usa redes sociales para su negocio?",model:"question_1",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"},{label:" Solo a nivel personal",value:"personal"}]},{type:"select",label:"¿Tiene página web o tienda virtual?",model:"question_2",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Tu negocio usa pagos digitales (yape, plim, POS, etc. )?",model:"question_3",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"select",label:"¿Usas software para contabilidad/inventario?",model:"question_4",required:!0,options:[{label:"Si",value:"si"},{label:"No",value:"no"}]},{type:"textarea",label:"¿Qué espera aprender en esta capacitación?",model:"question_5",required:!0,md:12,rows:3},{type:"title",label:"Detalles",md:12},{type:"select",label:"¿Cómo se enteró del evento?",model:"howKnowEvent_id",required:!0,options:[]},{type:"checkbox",label:"Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Tu Empresa, según la Ley N.º 29733",model:"autorization",required:!0,md:12,rows:3}]),_=q({visible:!1,message:"",color:"error"}),B=me(),L=q(!1);O(L,t=>{B.global.name.value=t?"dark":"light"}),O(()=>e.birthday,t=>{t?e.age=`${U(t)}`:e.age=null});function U(t){const[o,a,n]=t.split("/").map(Number);if(!o||!a||!n)return null;const i=new Date(n,a-1,o),E=new Date;let v=E.getFullYear()-i.getFullYear();return E.getMonth()>i.getMonth()||E.getMonth()===i.getMonth()&&E.getDate()>=i.getDate()||v--,v}const G=()=>{e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.birthday=null,e.cargo_id=null,e.age=null},H=(t=!0)=>{["ruc","razonSocial","comercialName","typeContribuyente_id","economicsector_id","rubro_id","comercialactivity_id","city_id","province_id","district_id","address"].forEach(a=>{const n=f.find(i=>i.model===a);n&&(n.disabled=t)})},K=t=>{const o=f.find(a=>a.model===t);l.value==1&&t=="ruc"&&(e.ruc=null,e.razonSocial=null,o.disabled=!o.disabled),t=="documentnumber"&&(e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null)},Q=()=>{["name","lastname","middlename"].forEach(t=>{const o=f.find(a=>a.model===t);o&&(o.disabled=!0)})},X=async(t,o)=>{if(t.model=="typedocument_id"){const a=f.find(n=>n.model==="documentnumber");a.disabled=!1,G()}if(t.model=="rubro_id"){e.comercialactivity_id=null;const a=await h({url:`select/activity-by-rubro/${t.value}`,method:"GET"}),n=f.find(i=>i.model==="comercialactivity_id");n.options=a.data}if(t.model=="city_id"){e.province_id=null,e.district_id=null;const a=`select/provinces/${t.value}`;A(a,"province_id")}if(t.model=="province_id"){e.district_id=null;const a=`select/districts/${t.value}`;A(a,"district_id")}if(t.model=="typedocument_id"){const a=f.find(n=>n.model==="documentnumber");t.value==1?(a.max=8,Q()):a.max=9}},J=async t=>{if(t=="ruc")return Z();if(t=="documentnumber")return W()},W=async()=>{u.documentnumber=!0;try{const t=String(e.documentnumber||"").trim();if(!t){_.value.message="Ingresa un número de documento válido.";return}const o={slug:p.params.slug,documentnumber:t},a=await h({url:"events-pnte/is-this-user-registered",method:"POST",data:o});if(a.status===200){e.typedocument_id=null,e.documentnumber=null,_.value.message=a.message??"El usuario ya está registrado.",b.value=!0;return}if(a.status!==404){console.log("Respuesta inesperada:",a),_.value.message="No se pudo validar el registro. Intenta nuevamente.";return}const n=await h({url:`api/consult-businessman-dni/${t}`,method:"POST"});if(n.status===200){const{data:i}=n;e.lastname=i.lastname??"",e.middlename=i.middlename??"",e.name=i.name??"",e.gender_id=i.gender_id??null,e.phone=i.phone??"",e.birthday=i.birthday?we(i.birthday).format("DD/MM/YYYY"):"";return}e.typedocument_id=null,e.documentnumber=null,_.value.message=n.message??"No se encontraron datos para el documento ingresado.",b.value=!0}catch(t){console.error("Error en handleSearchDni:",t),_.value.message="Ocurrió un error al procesar la solicitud."}finally{u.documentnumber=!1}},Z=async()=>{try{const t=await h({url:`api/consult-company-ruc/${e.ruc}`,method:"POST"});if(t.status==200){const{data:o}=t;e.comercialName=o.socialReason,u.ruc=!1}}catch(t){console.log("Error: ",t)}},ee=async()=>{var i,E;c.value=!0;const t={ruc:e.ruc,socialReason:e.razonSocial,economicsector_id:e.economicsector_id,category_id:e.rubro_id,comercialactivity_id:e.comercialactivity_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,nameService:e.estado,condicion:e.condicion},o={typedocument_id:e.typedocument_id,documentnumber:e.documentnumber,name:e.name,lastname:e.lastname,middlename:e.middlename,gender_id:e.gender_id,birthday:e.birthday,phone:e.phone},a={ruc:e.ruc,comercialName:e.comercialName,economicsector_id:e.economicsector_id,comercialactivity_id:e.comercialactivity_id,category_id:e.rubro_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,address:e.address,typeAsistente:l.value,documentnumber:e.documentnumber,sick:e.sick,phone:e.phone,email:e.email,positionCompany:e.cargo_id,howKnowEvent_id:e.howKnowEvent_id,slug:p.params.slug,age:e.age,name:e.name,lastname:e.lastname},n={question_1:e.question_1,question_2:e.question_2,question_3:e.question_3,question_4:e.question_4,question_5:e.question_5,slug:p.params.slug,documentnumber:e.documentnumber};try{(await h({url:"events-pnte/company",method:"POST",data:t})).status===200&&(await h({url:"events-pnte/businessman",method:"POST",data:o})).status===200&&(await h({url:"events-pnte/participant-registration-sed",method:"POST",data:a})).status==200&&(await h({url:"events-pnte/finally-questions-extras-sed",method:"POST",data:n})).status==200&&(l.value==1&&(d.value=!0),l.value==2&&g.push(`/registrado/${p.params.slug}`))}catch(v){c.value=!1;const k=(i=v.response)==null?void 0:i.status,C=(E=v.response)==null?void 0:E.data;if(!k){const F=v.request?"No se recibió respuesta del servidor.":`Error al configurar la solicitud: ${v.message}`;return console.error(F,v),{message:F,status:500}}let w=(C==null?void 0:C.message)||"Error inesperado";switch(k){case 422:w=`Error de validación: ${w}`;break;case 404:w=`Recurso no encontrado: ${w}`;break;case 500:w=`Error del servidor: ${w}`;break;default:console.error("Error inesperado con respuesta:",v)}_.value.message=w,_.value.visible=!0}finally{c.value=!1}},te=t=>{if(t)e.typedocument_id=null,e.documentnumber=null,e.lastname=null,e.middlename=null,e.name=null,e.gender_id=null,e.sick=null,e.phone=null,e.email=null,e.cargo_id=null,e.birthday=null,e.age=null,l.value=2,H(!0),d.value=!1,fe(()=>{const o=document.querySelector('[data-model="typedocument_id"]');o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),o.focus())});else return g.push(`/registrado/${p.params.slug}`)},A=async(t,o)=>{try{const a=await h({url:t,method:"GET"}),n=f.find(i=>i.model===o);n&&a.data&&(n.options=a.data)}catch(a){console.error("Error de red:",a)}},{loadSectorEconomico:ae,loadRubros:oe,loadCity:le,loadTypeDocuments:ie,loadGenders:ne,loadPropagandaMedia:re}=Se(f);return Y(async()=>{await ae(),await oe(),await le(),await ie(),await ne(),await re()}),(t,o)=>(y(),V("div",Oe,[r(he,{colorForm:"#02E4A5",fields:f,onSearchDataApi:J,onSubmit:ee,onChange:X,onHandleClearSearch:K},null,8,["fields"]),r(Ee,{modelValue:_.value.visible,"onUpdate:modelValue":o[0]||(o[0]=a=>_.value.visible=a),color:_.value.color,top:"",right:""},{default:s(()=>[m("p",ze,pe(_.value.message),1)]),_:1},8,["modelValue","color"]),r(Te,{dialog:d.value,"onUpdate:dialog":o[1]||(o[1]=a=>d.value=a),onDialogChange:te},null,8,["dialog"]),r(j,{transition:"dialog-bottom-transition",modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=a=>b.value=a),"max-width":"340"},{default:s(()=>[r(M,null,{default:s(()=>[r(qe,null,{default:s(()=>[m("div",Ye,[r(xe,{width:60,src:ve,style:{margin:"auto"}}),o[3]||(o[3]=m("span",{style:{display:"block","margin-top":"1rem"}},"¡Ya te has registrado en este evento! No necesitas volver a hacerlo.",-1))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Be={key:0,class:"sed"},Le={key:1,class:"sed"},Ue={__name:"[slug]",setup(S){se("SED | Sesión de Entrenamiento Digital","Formulario de Fortalece tu Mercado","sed-pnte.ico");const e=z(),d=q({}),u=q(1),p=q(!0),g=async()=>{try{const c=e.params.slug,l=await h({url:`public/event-sed-details/${c}`,method:"GET"});d.value=(l==null?void 0:l.data)||{}}catch(c){console.error("Error de red:",c)}finally{p.value=!1}};return Y(async()=>{await g()}),(c,l)=>(y(),D(Ve,{class:"fill-height",fluid:""},{default:s(()=>[r(De,{align:"center",justify:"center"},{default:s(()=>[r(I,{cols:"12",sm:"10",md:"8",lg:"6"},{default:s(()=>[r(_e,{"model-value":p.value,class:"align-center justify-center",persistent:"",scrim:""},{default:s(()=>[r(be,{color:"#02e4a5",size:"64",indeterminate:""})]),_:1},8,["model-value"]),p.value?x("",!0):(y(),D(M,{key:0,elevation:"4",rounded:"lg"},{default:s(()=>{var b,f;return[((b=d.value)==null?void 0:b.status)==404?(y(),V("section",Be,[r(ye,{info:d.value},null,8,["info"])])):x("",!0),(f=d.value)!=null&&f.slug?(y(),V("section",Le,[r(ge,{info:d.value,color:"#02e4a5",slideActive:u.value},null,8,["info","slideActive"]),u.value==1?(y(),D(Fe,{key:0,infoEvent:d.value,color:"#02e4a5",onHandleInscription:l[0]||(l[0]=_=>u.value=2)},null,8,["infoEvent"])):x("",!0),u.value==2?(y(),D(je,{key:1})):x("",!0),r($e)])):x("",!0)]}),_:1}))]),_:1})]),_:1})]),_:1}))}},_t=P(Ue,[["__scopeId","data-v-74078314"]]);export{_t as default};
