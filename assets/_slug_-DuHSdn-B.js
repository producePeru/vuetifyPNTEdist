import{u as L}from"./usePageMeta-BfycWH1t.js";import{h as $}from"./httpRequest-D3KC4pOG.js";import{_ as A,F as O}from"./Finalizado-CJt2Rmlv.js";import{_ as I}from"./FormComponent-BZPh03dQ.js";import{u as G}from"./useFormOptions-BD_ZbAMu.js";import{r as c,L as H,i as V,u as F,k as U,H as Y,o as j,c as v,b as i,e as s,w as d,d as m,V as D,g as f,M as E,f as w,m as P,y as J,j as K,l as Q}from"./index-P-jQ0qFS.js";import"./VDialog-B3ZPEfjs.js";import{V as W}from"./VSnackbar-NHepT6j2.js";import{V as X}from"./VContainer-DYU1mdIc.js";import{a as Z,V as ee}from"./VRow-AYDEjf_T.js";import{V as te}from"./VCard-QWmGLyiY.js";import"./mp-logo-CPdgfx02.js";import"./es-B129D-85.js";import"./VAvatar-Cz1f--Gw.js";import"./index--ihU7o2z.js";import"./VForm-gMtnff3y.js";import"./VList-BBgsDsW7.js";const ae={class:"mp-form-link-sala"},se={class:"d-flex align-center"},oe={__name:"MujerProduceFormLinkSala",emits:["goLink"],setup(_,{emit:p}){const e=p,o=c(!1),r=H(),h=c(!1),x=V({}),n=F(),a=U(),b=c(!1);c(1);const S=V({});E("formState",S),E("loadingStates",x),E("loadingSubmit",b);const g=V([{type:"title",label:"Datos del Participante",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1}]);Y(h,l=>{r.global.name.value=l?"dark":"light"});const R=l=>{},T=async(l,t)=>{if(l.model==="typedocument_id"){const u=g.find(k=>k.model==="documentnumber");if(!u)return;const y={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},C=y[l.value]||y.default;u.max=C.max,l.value&&clearDni(),["name","lastname","middlename"].forEach(k=>{const N=g.find(B=>B.model===k);N&&(N.disabled=C.autolockNames)}),u.disabled=!1}if(l.model==="documentnumber"){const u=g.find(y=>y.model==="documentnumber");u&&(u.disabled=!1)}},M=async l=>{},q=async()=>{b.value=!0;const l={doc_number:S.documentnumber,slug:n.params.slug};try{const t=await $({url:"mp/sala-link-meet",method:"POST",data:l});t.status==401&&o("Esta capacitación es presencial, por lo que no dispone de enlace de sala virtual."),t.status==403&&(o.value=!0,setTimeout(()=>{a.push(`/mujer-produce/${n.params.slug}`)},2500)),t.status==200&&e("goLink",!0)}catch(t){console.log("Error: ",t)}finally{b.value=!1}},{loadTypeDocuments:z}=G(g);return j(async()=>{await z()}),(l,t)=>(i(),v("div",ae,[s(I,{colorForm:"#d41a75",fields:g,onSearchDataApi:M,onSubmit:q,onChange:T,onHandleClearSearch:R},null,8,["fields"]),s(W,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=u=>o.value=u),color:"#ff4d4f"},{default:d(()=>[m("div",se,[s(D,{class:"me-3"},{default:d(()=>t[1]||(t[1]=[f("mdi-alert-circle-outline")])),_:1,__:[1]}),t[2]||(t[2]=m("span",null," Parece que no te has registrado. Completa tu inscripción en el siguiente formulario. ",-1))])]),_:1},8,["modelValue"])]))}},le={class:"d-flex justify-center align-center"},re={class:"text-center pa-8",style:{"max-width":"420px",width:"100%"}},ne={__name:"Acceso",props:{detailEvent:{type:Object,default:()=>({})}},setup(_){return(p,e)=>{var o,r;return i(),v("div",le,[m("div",re,[s(D,{size:"64",color:"#d41a75",class:"mb-4"},{default:d(()=>e[0]||(e[0]=[f(" mdi-video-check-outline ")])),_:1,__:[0]}),e[2]||(e[2]=m("h2",{class:"text-h5 font-weight-semibold mb-2"}," Acceso habilitado ",-1)),e[3]||(e[3]=m("p",{class:"text-body-1 text-medium-emphasis mb-6"},[f(" Tu registro fue validado correctamente."),m("br"),f(" Ya puedes acceder a la sala virtual desde el siguiente enlace. ")],-1)),(o=_.detailEvent)!=null&&o.link?(i(),w(J,{key:0,color:"#d41a75",size:"large",rounded:"pill",class:"text-none font-weight-medium mb-3",block:"","prepend-icon":"mdi-video",href:(r=_.detailEvent)==null?void 0:r.link,target:"_blank"},{default:d(()=>e[1]||(e[1]=[f(" Ingresar a la sala virtual ")])),_:1,__:[1]},8,["href"])):P("",!0),e[4]||(e[4]=m("p",{class:"text-caption text-medium-emphasis"}," Recomendamos ingresar con unos minutos de anticipación. ",-1))])])}}},ie={key:0,class:"mp",style:{"min-height":"calc(100vh - 390px)"}},de={key:0},me={key:1,class:"text-center"},ue={key:1},$e={__name:"[slug]",setup(_){L("Mujer Produce | Registro","Formulario de registro para el Evento de Producción de Mujeres","mp.ico");const p=c(!0),e=F(),o=c(!0),r=c({}),h=n=>{n&&(p.value=!1)},x=async()=>{try{const n=e.params.slug,a=await $({url:`mp/info-event-public/${n}`,method:"GET"});a.status===200&&(r.value=(a==null?void 0:a.data)||{}),console.log("response",a)}catch(n){console.error("Error de red:",n)}finally{o.value=!1}};return j(async()=>{await x()}),(n,a)=>(i(),w(X,{class:"py-0",fluid:""},{default:d(()=>[s(Z,{align:"center",justify:"center"},{default:d(()=>[s(ee,{cols:"12",sm:"12",md:"10",lg:"8",xl:"6",class:"my-2"},{default:d(()=>[s(K,{"model-value":o.value,class:"align-center justify-center",persistent:"",scrim:""},{default:d(()=>[s(Q,{color:"#d41a75",size:"64",indeterminate:""})]),_:1},8,["model-value"]),o.value?P("",!0):(i(),w(te,{key:0,elevation:"8",rounded:"lg"},{default:d(()=>[s(A,{detailEvent:r.value},null,8,["detailEvent"]),r.value.finished?(i(),v("div",ue,[s(O)])):(i(),v("div",ie,[p.value?(i(),v("div",de,[a[1]||(a[1]=m("p",{class:"text-body-1 text-medium-emphasis mb-6"},[f(" Para ingresar a la sesión, primero debes registrar tu número de DNI."),m("br"),f(" Una vez validado, se habilitará el enlace de la sala virtual. ")],-1)),s(oe,{onRegistered:h,onGoLink:a[0]||(a[0]=b=>p.value=!1)})])):(i(),v("div",me,[s(ne,{detailEvent:r.value},null,8,["detailEvent"])]))]))]),_:1}))]),_:1})]),_:1})]),_:1}))}};export{$e as default};
