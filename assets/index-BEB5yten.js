import{_ as I}from"./mp-logo-CPdgfx02.js";import{u as O}from"./usePageMeta-zMl3s0mq.js";import{h as _}from"./httpRequest-D3KC4pOG.js";import{_ as E}from"./FormComponent-e6v1kZmq.js";import{u as $}from"./useFormOptions-BD_ZbAMu.js";import{L as z,r,i as g,u as R,k as H,H as L,o as G,c as p,b as u,m as b,d as l,e as a,M as v,f as U,w as i}from"./index-DMaMMhca.js";import"./VDialog-7lCwSEQ-.js";import{V as Z}from"./VContainer-68tcl0eq.js";import{a as V,V as w}from"./VRow-BkKfwfjD.js";import{V as J}from"./VCard-D3YP5q9o.js";import{V as K}from"./VAvatar-cHfdZKxR.js";import"./index-REPG1qtP.js";import"./VSnackbar-jputXAJ1.js";import"./VList-BWJlotLM.js";import"./VForm-CtPtkXXQ.js";const Q={key:0,class:"mp-form-consulting"},W={key:1,class:"mp-form-diagniostico"},X={key:2},Y={__name:"FormMujerProduceDiagnostico",setup(F){const x=z(),m=r(!1),P=g({});R();const M=H(),d=r(!1),T=r(1),t=g({}),c=r(1);v("formState",t),v("loadingStates",P),v("loadingSubmit",d);const n=g([{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"",label:"",model:"razonSocial"},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1}]),h=r([{type:"checkbox",label:'Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Nacional "Tu Empresa", según la Ley N.º 29733',model:"autorization",required:!0,md:12,rows:3}]);L(m,e=>{x.global.name.value=e?"dark":"light"});const S=e=>{const o=n.find(s=>s.model===e);T.value==1&&e=="ruc"&&(o.disabled=!o.disabled)},k=async(e,o)=>{if(e.model==="typedocument_id"){const s=n.find(y=>y.model==="documentnumber");if(!s)return;const f={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},C=f[e.value]||f.default;s.max=C.max,e.value,["name","lastname","middlename"].forEach(y=>{const N=n.find(B=>B.model===y);N&&(N.disabled=C.autolockNames)}),s.disabled=!1}if(e.model==="documentnumber"){const s=n.find(f=>f.model==="documentnumber");s&&(s.disabled=!1)}},j=async()=>{d.value=!0;const e={ruc:t.ruc,typedocument_id:t.typedocument_id,documentnumber:t.documentnumber};try{const o=await _({url:"mp/register-consulting",method:"POST",data:e});if(o.status==404)return M.push("/mujer-produce");o.status==200&&(console.log("Response: ",o),t.ruc=o.data.ruc,t.documentnumber=o.data.doc_number,Object.assign(t,o.data.questionnaire??{}),c.value=2)}catch(o){console.log("Error: ",o)}finally{d.value=!1}},q=async()=>{d.value=!0;const e=t;try{(await _({url:"mp/register-diagnostic-response",method:"POST",data:e})).status==200&&(c.value=3)}catch(o){console.log("Error: ",o)}finally{d.value=!1}},D=async()=>{try{const e=await _({url:"mp/question-diagnostic",method:"GET"});h.value=[...(e==null?void 0:e.data)||[],...h.value]}catch(e){console.error("Error de red:",e)}finally{}},{loadTypeDocuments:A}=$(n);return G(async()=>{await A(),t.typedocument_id=1,await D()}),(e,o)=>(u(),p("div",null,[c.value==1?(u(),p("div",Q,[o[0]||(o[0]=l("h3",{class:"mb-10",style:{color:"#d41a75"}}," Inicie el proceso de su diagnóstico. ",-1)),a(E,{colorForm:"#d41a75",fields:n,onSubmit:j,onChange:k,onHandleClearSearch:S,nameBtnSend:"EMPEZAR"},null,8,["fields"])])):b("",!0),c.value==2?(u(),p("div",W,[a(E,{colorForm:"#d41a75",fields:h.value,onSubmit:q,onChange:k,onHandleClearSearch:S},null,8,["fields"])])):b("",!0),c.value==3?(u(),p("div",X,o[1]||(o[1]=[l("h1",{class:"mb-8",style:{color:"#d41a75"}}," diagnóstico enviado. ",-1)]))):b("",!0)]))}},ee={class:"mp-header mp"},oe={style:{height:"250px",display:"flex","justify-content":"center","flex-direction":"column"}},te={class:"mp",style:{"min-height":"calc(100vh - 375px)"}},ge={__name:"index",setup(F){return O("Mujer Produce | Registro","Formulario de registro para el Evento de Producción de Mujeres","mp.ico"),R(),r(!0),r({}),(x,m)=>(u(),U(Z,{class:"py-0",fluid:""},{default:i(()=>[a(V,{align:"center",justify:"center"},{default:i(()=>[a(w,{cols:"12",sm:"12",md:"10",lg:"8",xl:"7",class:"my-2"},{default:i(()=>[a(J,{elevation:"8",rounded:"lg",class:"h-100"},{default:i(()=>[l("div",ee,[a(V,null,{default:i(()=>[a(w,null,{default:i(()=>[l("div",oe,[l("div",null,[a(K,{width:100,src:I}),m[0]||(m[0]=l("h1",{style:{"line-height":"1.3",color:"#fff"}},"DIAGNÓSTICO EMPRESARIAL",-1))])])]),_:1})]),_:1})]),l("div",te,[a(Y)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ge as default};
