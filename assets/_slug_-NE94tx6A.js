import{_ as P}from"./mp-logo-CPdgfx02.js";import{_ as U}from"./FormComponent-B6I2YB6j.js";import{u as H}from"./useFormOptions-DXP8M4Jp.js";import{h as I}from"./httpRequest-B4w4n6I1.js";import{ad as M,r as m,$ as g,Z as Y,a1 as G,w as L,o as Q,c as Z,b as R,i as a,Q as s,j as n,U as f,T as u,Y as k,z as h,P as J}from"./index-ChZKJD_u.js";import"./VDialog-CPiK-LqW.js";import{V as K}from"./VSnackbar-Dv-Icaox.js";import{V as W}from"./VContainer-100W_8-W.js";import{V as S,a as w}from"./VRow-BAsG0M7R.js";import{V as X}from"./VCard-CEN5IIu1.js";import{V as ee}from"./VImg-CR6JVBpM.js";import"./index-BQiIrLxg.js";import"./VForm-APAio7e8.js";import"./VList-6BQAQ_Ml.js";import"./VAvatar-cWgMBpOh.js";import"./ssrBoot-D8X6XDNA.js";const te={class:"mp-form-asistencia"},oe={class:"d-flex align-center"},le={class:"text-white m-0"},ae={__name:"AsistenciaMujerProduceForm",setup(C){const b=M(),t=m(!1),N=g({}),y=Y(),A=G(),p=m(!1),D=m(1),e=g({}),i=m({show:!1,message:"",color:"",icon:""});h("formState",e),h("loadingStates",N),h("loadingSubmit",p);const d=g([{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1}]);L(t,o=>{b.global.name.value=o?"dark":"light"});const F=o=>{const l=d.find(r=>r.model===o);D.value==1&&o=="ruc"&&(l.disabled=!l.disabled,$()),o=="documentnumber"&&v()},$=()=>{e.ruc=null,e.razonSocial=null,e.economicsector_id=null,e.rubro_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.obs_ruc=null},v=()=>{e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null,e.country_id=null,e.birthday=null,e.gender_id=null,e.sick=null,e.academicdegree_id=null,e.civil_status_id=null,e.num_soons=0,e.role_company_id=null,e.obs_dni=null,e.phone=null,e.email=null},j=async(o,l)=>{if(o.model==="typedocument_id"){const r=d.find(_=>_.model==="documentnumber");if(!r)return;const c={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},x=c[o.value]||c.default;r.max=x.max,o.value&&v(),["name","lastname","middlename"].forEach(_=>{const V=d.find(O=>O.model===_);V&&(V.disabled=x.autolockNames)}),r.disabled=!1}if(o.model==="documentnumber"){const r=d.find(c=>c.model==="documentnumber");r&&(r.disabled=!1)}},T=async o=>{if(o=="ruc")return q();if(o=="documentnumber")return B()},q=async()=>{},B=async()=>{},E=async()=>{p.value=!0;const o={ruc:e.ruc,doc_number:e.documentnumber,slug:y.params.slug,attendance:1};try{const l=await I({url:"mp/register-attendance",method:"POST",data:o});console.log("Response: ",l),l.status==200&&(e.documentnumber="",e.ruc="",i.value={show:!0,message:"Asistencia registrada correctamente.",color:"success",icon:"mdi-check-circle"}),l.status==409&&(i.value={show:!0,message:"Ya te has registrado.",color:"warning",icon:"mdi-alert-circle"}),l.status==404&&A.push({path:`/mujer-produce/${y.params.slug}`,query:{status:201,mensaje:"registrar-empresario",ruc:e.ruc}})}catch(l){console.log("Error: ",l)}finally{p.value=!1}},{loadTypeDocuments:z}=H(d);return Q(async()=>{await z(),e.typedocument_id=1}),(o,l)=>(R(),Z("div",te,[a(U,{colorForm:"#d41a75",fields:d,onSearchDataApi:T,onSubmit:E,onChange:j,onHandleClearSearch:F},null,8,["fields"]),a(K,{modelValue:i.value.show,"onUpdate:modelValue":l[0]||(l[0]=r=>i.value.show=r),color:i.value.color,timeout:"6000",location:"top right",rounded:"lg",elevation:"4",class:"d-flex align-center"},{default:s(()=>[n("div",oe,[a(f,{class:"mr-3",size:"28"},{default:s(()=>[u(k(i.value.icon),1)]),_:1}),n("h3",le,k(i.value.message),1)])]),_:1},8,["modelValue","color"])]))}},se={class:"mp-header mp"},ne={style:{"line-height":"2.2",color:"#fff"}},re={style:{"list-style":"none","padding-left":"0","font-size":"18px"}},ie={class:"mp"},we={__name:"[slug]",setup(C){return(b,t)=>(R(),J(W,{class:"py-0",fluid:""},{default:s(()=>[a(S,{align:"center",justify:"center"},{default:s(()=>[a(w,{cols:"12",sm:"12",md:"10",lg:"8",xl:"5",class:"my-2"},{default:s(()=>[a(X,{elevation:"8",rounded:"lg",style:{"min-height":"96vh"}},{default:s(()=>[n("div",se,[a(S,null,{default:s(()=>[a(w,null,{default:s(()=>[n("div",ne,[a(ee,{width:100,src:P}),t[6]||(t[6]=n("h1",{class:"title"}," Evento de Producción de Mujeres ",-1)),n("ul",re,[n("li",null,[a(f,null,{default:s(()=>t[0]||(t[0]=[u("mdi-map-marker")])),_:1,__:[0]}),t[1]||(t[1]=u(" LUGAR: casa 132 "))]),n("li",null,[a(f,{left:""},{default:s(()=>t[2]||(t[2]=[u("mdi-calendar")])),_:1,__:[2]}),t[3]||(t[3]=u(" FECHA: 18/12/2023 "))]),n("li",null,[a(f,{left:""},{default:s(()=>t[4]||(t[4]=[u("mdi-clock-time-four-outline")])),_:1,__:[4]}),t[5]||(t[5]=u(" HORARIO: 10:00 - 12:00 "))])])])]),_:1})]),_:1})]),n("div",ie,[t[7]||(t[7]=n("h1",{class:"mb-8"},"Asistencia",-1)),a(ae)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{we as default};
