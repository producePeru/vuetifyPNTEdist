import{r as d,f as P,o as f,b as p,a as o,w as r,c as $,U as j,t as M,e as g,V as A,X as W,Y as z,G as Z,_ as fe,R as B,g as ye,S as be,J as Ve,Q as $e,T as he,O as F,a1 as we,W as s,$ as w,a2 as H,a3 as K}from"./index-mEALsjXs.js";import{u as _e}from"./usePageMeta-DSRa_bz5.js";import{c as u,e as Ce,r as V,m as Ie,a as ke,u as Ae,V as Te,d as Y,b as X}from"./VTooltip-DoF-f42K.js";import{h as C,E as xe}from"./EventoCaducado-UPYa7fq4.js";import{_ as Ee,a as ee,V as ae,d as Me,b as Ne,c as Ue}from"./VDialog-DFY5w6Ch.js";import{V as m,a as J,b as T}from"./VAvatar-CJjqw-N6.js";import{F as Re}from"./Footer-Dms9m8vE.js";import{V as q}from"./VContainer-BejGVfT8.js";import{V as Q}from"./VSelect-bd2cXlNb.js";const Se="/assets/logo-tu-mercado-BAC65nv4.png",De={class:"title"},Be={style:{"line-height":"2"}},Fe={style:{"list-style":"none","padding-left":"0"}},qe={class:"px-8"},Pe=["innerHTML"],ze={__name:"EventoInformacion",props:{color:String,title:String,eventType:String,info:Object,modal:Boolean},setup(y){const I=y,x=d(!0);return(N,i)=>(f(),P(Z,null,[p("section",null,[o(T,{justify:"center",align:"center",class:"h-100"},{default:r(()=>[o(m,{cols:"auto"},{default:r(()=>[y.eventType=="sed"?(f(),$(J,{key:0,width:100,src:Ee})):j("",!0),y.eventType=="tumercado"?(f(),$(J,{key:1,width:100,src:Se})):j("",!0)]),_:1})]),_:1}),o(T,null,{default:r(()=>[o(m,{cols:"12",class:"text-center"},{default:r(()=>{var c;return[p("h1",De,M((c=y.info)==null?void 0:c.subTitle),1)]}),_:1}),o(m,null,{default:r(()=>{var c,k,h;return[p("div",Be,[i[5]||(i[5]=p("h4",null,"Información",-1)),p("ul",Fe,[p("li",null,[o(A,null,{default:r(()=>i[2]||(i[2]=[g("mdi-book-open-variant")])),_:1,__:[2]}),g(" TEMA DE CAPACITACIÓN: "+M((c=y.info)==null?void 0:c.schedule),1)]),p("li",null,[o(A,null,{default:r(()=>i[3]||(i[3]=[g("mdi-map-marker")])),_:1,__:[3]}),g(" LUGAR: "+M((k=y.info)==null?void 0:k.place),1)]),p("li",null,[o(A,{left:""},{default:r(()=>i[4]||(i[4]=[g("mdi-calendar")])),_:1,__:[4]}),g(" FECHA: "+M((h=y.info)==null?void 0:h.fecha),1)])])])]}),_:1})]),_:1})]),o(ae,{modelValue:I.modal,"onUpdate:modelValue":i[1]||(i[1]=c=>I.modal=c),"max-width":"500",persistent:""},{default:r(()=>[o(ee,{"prepend-icon":"mdi-alert-circle-outline",title:"Conoce los detalles para participar"},{actions:r(()=>[o(W),o(z,{onClick:i[0]||(i[0]=c=>x.value=!1),color:y.color,variant:"flat",style:{color:"#fff"}},{default:r(()=>i[6]||(i[6]=[g(" PARTICIPAR ")])),_:1,__:[6]},8,["color"])]),default:r(()=>{var c;return[p("div",qe,[p("p",{innerHTML:(c=y.info)==null?void 0:c.description},null,8,Pe)])]}),_:1})]),_:1},8,["modelValue"])],64))}},Oe={class:"pp03-background"},Ge={class:"container-sm"},Le={__name:"[slug]",setup(y){_e("Fortalece tu mercado","Formulario de Fortalece tu Mercado","fortalecetumercado.ico");const I="6LdKGzorAAAAADqxi2yn8x9mHfTchbXYK1y6KRUb",x=$e(),N=he(),i=d(!1),c=d(!1),k=d(null),h=d(!1),U=d(!1),O=d(!1),v=d("#8dbe26"),R=d(!1),S=d(!1),le=B({ruc:null,comercialName:null,socialReason:null,economicsector_id:null,comercialactivity_id:null,category_id:null,city_id:null,howKnowEvent_id:null,slug:null,typedocument_id:null,documentnumber:null,lastname:null,middlename:null,name:null,gender_id:null,sick:null,phone:null,email:null}),l=B({...le});function _(t,...a){let e=l[t]||"";a.forEach(b=>{switch(b){case"trim":e=e.trim();break;case"capitalize":e=e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e;break;case"uppercase":e=e.toUpperCase();break;case"lowercase":e=e.toLowerCase();break}}),l[t]=e}d(null);const oe=["facebook","instagram","web"],te=d([]);B({}),ye(()=>oe.filter(t=>!te.value.includes(t)));const D=new Date;new Date(D.getFullYear()-18,D.getMonth(),D.getDate()).toISOString().split("T")[0],d([]),d([]);const G=d([]),L=d([]);d([]),d([]),d([]);const re=async()=>{try{const t=await C({url:"select/type-documents",method:"GET"});G.value=t.data}catch(t){console.error("Error de red:",t)}},ne=async()=>{try{const t=await C({url:"select/genders",method:"GET"});L.value=t.data}catch(t){console.error("Error de red:",t)}},se=()=>{l.documentnumber=null},ie=async()=>{R.value=!0;try{const t=await C({url:`public/search-api-ruc/${l.ruc}`,method:"GET"});t.status==200&&(l.comercialName=t.data.comercialName,l.socialReason=t.data.socialReason,l.economicsector_id=t.data.economicsector_id,l.category_id=t.data.category_id,l.comercialactivity_id=t.data.comercialactivity_id,l.city_id=t.data.city_id)}catch(t){console.error("Error de red:",t)}finally{R.value=!1}},de=async()=>{S.value=!0;try{const t=await C({url:`public/search-api-dni/${l.documentnumber}`,method:"GET"});t.status==200&&(l.name=t.data.name,l.lastname=t.data.lastname,l.middlename=t.data.middlename,l.gender_id=t.data.gender_id,l.phone=t.data.phone?+t.data.phone:null,l.email=t.data.email)}catch(t){console.error("Error de red:",t)}finally{S.value=!1}},ue=async()=>{try{if(U.value=!0,await n.value.$validate(),n.value.$invalid){c.value=!0;return}const a={recaptcha_token:await window.grecaptcha.execute(I,{action:"form_submit"})};if((await C({url:"verify-captcha",method:"POST",data:a})).status==200){const b={typedocument_id:l.typedocument_id,documentnumber:l.documentnumber,name:l.name,lastname:l.lastname,middlename:l.middlename,gender_id:l.gender_id,email:l.email,phone:l.phone,ruc:l.ruc,comercialName:l.comercialName,comercialActivity:l.comercialActivity,mercado:l.mercado,slug:l.slug},E=await C({url:"public/attendance-present",method:"POST",data:b});if(E.status==200)return N.push(`/registrado/${x.params.slug}`);if(E.status==400)return i.value=!0}}catch(t){console.error("Error ejecutando reCAPTCHA:",t)}finally{U.value=!1}},me=async()=>{try{h.value=!0;const t=x.params.slug,a=2,e=await C({url:`public/data-attendance/${t}`,method:"GET"});if(e.status==400)return N.replace("/pagina-no-encontrada");if(e.status==500)return O.value=!0;const b=e.data,E={subTitle:b.title,place:b.address,fecha:b.fecha,schedule:b.hora};k.value=E,e.status==200&&(l.slug=b.slug,h.value=!1,await re(),await ne())}catch(t){console.error("Error de red:",t)}finally{h.value=!1}};be(async()=>{if(await me(),!window.grecaptcha){const t=document.createElement("script");t.src=`https://www.google.com/recaptcha/api.js?render=${I}`,t.async=!0,document.head.appendChild(t)}});const ce=u.withMessage("El número de RUC es incorrecto",u.regex(/^(10|15|20)\d{9}$/)),pe=u.withMessage("El número es incorrecto",u.regex(/^(9)\d{8}$/)),ge=u.withMessage("Corrige el número de documento",u.regex(/^\d+$/)),ve={ruc:{validRUC:ce},comercialName:{maxLength:u.withMessage("Número máximo de caracteres permitidos: 120",ke(120))},comercialActivity:{required:u.withMessage("Ingresar nombres",V)},mercado:{required:u.withMessage("Ingresar nombres",V)},typedocument_id:{required:u.withMessage("Seleccionar un tipo",V)},documentnumber:{required:u.withMessage("Ingresar número de documento",V),minLength:u.withMessage("Completa el número de identidad",Ie(8)),validDni:ge},lastname:{required:u.withMessage("Ingresar apellido paterno",V)},middlename:{required:u.withMessage("Ingresar apellido materno",V)},name:{required:u.withMessage("Ingresar nombres",V)},gender_id:{required:u.withMessage("Seleccionar género",V)},phone:{required:u.withMessage("Ingresar número de celular",V),validPhone:pe},email:{email:u.withMessage("Correo electrónico inválido",Ce)}},n=Ae(ve,l);return(t,a)=>(f(),P("section",Oe,[p("div",Ge,[o(Ve,{"model-value":h.value,class:"align-center justify-center",persistent:"",scrim:""},{default:r(()=>[o(F,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),O.value?(f(),$(q,{key:0,class:"pp03-container"},{default:r(()=>[o(xe)]),_:1})):(f(),P(Z,{key:1},[h.value?(f(),$(q,{key:0,class:"pp03-container",style:{"min-height":"74.5vh"}})):(f(),$(q,{key:1,class:"pp03-container"},{default:r(()=>[o(ze,{color:v.value,info:k.value,title:"FORTALECE TU MERCADO",eventType:"tumercado",modal:!1},null,8,["color","info"]),p("form",{onSubmit:we(ue,["prevent"])},[a[25]||(a[25]=p("h4",{class:"form-title mt-4 mb-6"},"Datos Empresario",-1)),o(T,null,{default:r(()=>[o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(Q,{color:v.value,modelValue:l.typedocument_id,"onUpdate:modelValue":[a[0]||(a[0]=e=>l.typedocument_id=e),se],"error-messages":s(n).typedocument_id.$errors.map(e=>e.$message),items:G.value,label:"Tipo de documento","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:s(n).typedocument_id.$touch},null,8,["color","modelValue","error-messages","items","onChange"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.documentnumber,"onUpdate:modelValue":a[1]||(a[1]=e=>l.documentnumber=e),disabled:s(n).typedocument_id.$invalid,counter:l.typedocument_id==1?8:10,maxlength:l.typedocument_id==1?8:10,"error-messages":s(n).documentnumber.$errors.map(e=>e.$message),label:"Número de documento",density:"comfortable",variant:"outlined",onInput:s(n).documentnumber.$touch},{"append-inner":r(()=>[o(Y,{text:"Click para buscar",location:"top"},{activator:r(({props:e})=>[S.value?(f(),$(F,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):H((f(),$(A,{key:1,class:"me-2 input-search",onClick:de},{default:r(()=>a[22]||(a[22]=[g(" mdi-magnify ")])),_:1,__:[22]},512)),[[K,!s(n).documentnumber.$invalid]])]),_:1})]),_:1},8,["color","modelValue","disabled","counter","maxlength","error-messages","onInput"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.name,"onUpdate:modelValue":a[2]||(a[2]=e=>l.name=e),disabled:s(n).documentnumber.$invalid,"error-messages":s(n).name.$errors.map(e=>e.$message),label:"Nombres",density:"comfortable",variant:"outlined",onInput:s(n).name.$touch,onBlur:a[3]||(a[3]=e=>_("name","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.lastname,"onUpdate:modelValue":a[4]||(a[4]=e=>l.lastname=e),disabled:s(n).documentnumber.$invalid,"error-messages":s(n).lastname.$errors.map(e=>e.$message),label:"Apellido Paterno",density:"comfortable",variant:"outlined",onInput:s(n).lastname.$touch,onBlur:a[5]||(a[5]=e=>_("lastname","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.middlename,"onUpdate:modelValue":a[6]||(a[6]=e=>l.middlename=e),disabled:s(n).documentnumber.$invalid,"error-messages":s(n).middlename.$errors.map(e=>e.$message),label:"Apellido Materno",density:"comfortable",variant:"outlined",onInput:s(n).middlename.$touch,onBlur:a[7]||(a[7]=e=>_("middlename","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(Q,{color:v.value,modelValue:l.gender_id,"onUpdate:modelValue":a[8]||(a[8]=e=>l.gender_id=e),disabled:s(n).documentnumber.$invalid,"error-messages":s(n).gender_id.$errors.map(e=>e.$message),items:L.value,label:"Género","item-title":"label","item-value":"value",density:"comfortable",variant:"outlined",onChange:s(n).gender_id.$touch},null,8,["color","modelValue","disabled","error-messages","items","onChange"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(X,{"control-variant":"hidden",counter:9,color:v.value,modelValue:l.phone,"onUpdate:modelValue":a[9]||(a[9]=e=>l.phone=e),disabled:s(n).documentnumber.$invalid,maxlength:"9","error-messages":s(n).phone.$errors.map(e=>e.$message),label:"Número de celular",density:"comfortable",variant:"outlined",onInput:s(n).phone.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.email,"onUpdate:modelValue":a[10]||(a[10]=e=>l.email=e),disabled:s(n).documentnumber.$invalid,"error-messages":s(n).email.$errors.map(e=>e.$message),label:"Correo electrónico",onBlur:a[11]||(a[11]=e=>_("email","trim")),density:"comfortable",variant:"outlined",onInput:s(n).email.$touch},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),a[26]||(a[26]=p("h4",{class:"form-title mt-6 mb-6"},"Datos de la Empresa",-1)),o(T,null,{default:r(()=>[o(m,{cols:"12",md:"6",class:"py-1"},{default:r(()=>[o(X,{"control-variant":"hidden",color:v.value,modelValue:l.ruc,"onUpdate:modelValue":a[12]||(a[12]=e=>l.ruc=e),counter:11,maxlength:"11","error-messages":s(n).ruc.$errors.map(e=>e.$message),label:"Número de RUC",density:"comfortable",variant:"outlined",onInput:s(n).ruc.$touch},{"append-inner":r(()=>[o(Y,{text:"Click para buscar",location:"top"},{activator:r(({props:e})=>[R.value?(f(),$(F,{key:0,indeterminate:"",color:"primary",size:"20",class:"me-2"})):H((f(),$(A,{key:1,class:"me-2 input-search",onClick:ie},{default:r(()=>a[23]||(a[23]=[g(" mdi-magnify ")])),_:1,__:[23]},512)),[[K,!s(n).ruc.$invalid]])]),_:1})]),_:1},8,["color","modelValue","error-messages","onInput"])]),_:1}),o(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.comercialName,"onUpdate:modelValue":a[13]||(a[13]=e=>l.comercialName=e),disabled:s(n).ruc.$invalid,"error-messages":s(n).comercialName.$errors.map(e=>e.$message),label:"Nombre comercial",density:"comfortable",variant:"outlined",onInput:s(n).comercialName.$touch,onBlur:a[14]||(a[14]=e=>_("comercialName","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.comercialActivity,"onUpdate:modelValue":a[15]||(a[15]=e=>l.comercialActivity=e),disabled:s(n).ruc.$invalid,"error-messages":s(n).comercialActivity.$errors.map(e=>e.$message),label:"Rubro o Actividad de la empresa",density:"comfortable",variant:"outlined",onInput:s(n).comercialActivity.$touch,onBlur:a[16]||(a[16]=e=>_("comercialActivity","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1}),o(m,{cols:" 12",md:"6",class:"py-1"},{default:r(()=>[o(w,{color:v.value,modelValue:l.mercado,"onUpdate:modelValue":a[17]||(a[17]=e=>l.mercado=e),disabled:s(n).ruc.$invalid,"error-messages":s(n).mercado.$errors.map(e=>e.$message),label:"Mercado al que pertenece",density:"comfortable",variant:"outlined",onInput:s(n).mercado.$touch,onBlur:a[18]||(a[18]=e=>_("mercado","trim","capitalize"))},null,8,["color","modelValue","disabled","error-messages","onInput"])]),_:1})]),_:1}),o(T,null,{default:r(()=>[o(m,{class:"text-center"},{default:r(()=>[o(z,{type:"submit",class:"form-button",onClick:s(n).$validate,loading:U.value,size:"large"},{default:r(()=>a[24]||(a[24]=[g(" PARTICIPAR ")])),_:1,__:[24]},8,["onClick","loading"])]),_:1})]),_:1})],32)]),_:1}))],64))]),o(Re),o(Te,{modelValue:c.value,"onUpdate:modelValue":a[19]||(a[19]=e=>c.value=e),color:"red",timeout:"4000",location:"top center",rounded:"lg",elevation:"24"},{default:r(()=>a[27]||(a[27]=[g(" Por favor, completa todos los campos obligatorios correctamente. ")])),_:1,__:[27]},8,["modelValue"]),o(ae,{modelValue:i.value,"onUpdate:modelValue":a[21]||(a[21]=e=>i.value=e),"max-width":"400"},{default:r(()=>[o(ee,null,{default:r(()=>[o(Me,{class:"text-h6"},{default:r(()=>a[28]||(a[28]=[g("Atención")])),_:1,__:[28]}),o(Ne,null,{default:r(()=>a[29]||(a[29]=[g("Ya estás registrado en este evento.")])),_:1,__:[29]}),o(Ue,null,{default:r(()=>[o(W),o(z,{color:"primary",onClick:a[20]||(a[20]=e=>i.value=!1)},{default:r(()=>a[30]||(a[30]=[g("Aceptar")])),_:1,__:[30]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},aa=fe(Le,[["__scopeId","data-v-f6efd8c3"]]);export{aa as default};
