import{_ as Q}from"./mp-logo-CPdgfx02.js";import{_ as Z}from"./FormComponent-B6I2YB6j.js";import{u as J}from"./useFormOptions-DXP8M4Jp.js";import{h as m}from"./httpRequest-B4w4n6I1.js";import{ad as K,r as h,$ as g,Z as W,a1 as X,w as ee,o as ie,c as te,b as R,i as d,z as v,P as oe,Q as n,j as s,T as u,U as q}from"./index-ChZKJD_u.js";import{d as k}from"./VDialog-CPiK-LqW.js";import{V as ae}from"./VContainer-100W_8-W.js";import{V as C,a as E}from"./VRow-BAsG0M7R.js";import{V as le}from"./VCard-CEN5IIu1.js";import{V as de}from"./VImg-CR6JVBpM.js";import"./index-BQiIrLxg.js";import"./VSnackbar-Dv-Icaox.js";import"./VList-6BQAQ_Ml.js";import"./VAvatar-cWgMBpOh.js";import"./ssrBoot-D8X6XDNA.js";import"./VForm-APAio7e8.js";const re={class:"mp-form"},ne={__name:"MujerProduceForm",setup(N){const S=K(),a=h(!1),f=g({}),p=W();X();const b=h(!1),D=h(1),e=g({num_soons:0,obs_ruc:null,obs_dni:null,ruc:p.query.ruc||null});v("formState",e),v("loadingStates",f),v("loadingSubmit",b);const r=g([{type:"title",label:"Datos de la Empresa",md:12},{type:"search",label:"Número de RUC",model:"ruc",required:!0,max:11,disabled:!1},{type:"text",label:"Razón Social",model:"razonSocial",required:!0,disabled:!0},{type:"select",label:"Sector Económico",model:"economicsector_id",required:!0,options:[],disabled:!1},{type:"select",label:"Rubro",model:"rubro_id",required:!0,options:[],disabled:!1},{type:"select",label:"Actividad Comercial",model:"comercialactivity_id",required:!0,options:[],disabled:!1},{type:"select",label:"Región",model:"city_id",required:!0,options:[],disabled:!1},{type:"select",label:"Provincia",model:"province_id",required:!0,options:[],disabled:!1},{type:"select",label:"Distrito",model:"district_id",required:!0,options:[],disabled:!1},{type:"title",label:"Datos del Participante",md:12},{type:"select",label:"Tipo de documento",model:"typedocument_id",required:!0,options:[]},{type:"search",label:"Número de Documento",model:"documentnumber",required:!0,max:8,disabled:!1},{type:"text",label:"Apellido Paterno",model:"lastname",required:!0,disabled:!0},{type:"text",label:"Apellido Materno",model:"middlename",required:!0,disabled:!0},{type:"text",label:"Nombres",model:"name",required:!0,disabled:!0},{type:"select",label:"País de nacimiento",model:"country_id",required:!0,options:[]},{type:"date",label:"Fecha de nacimiento",model:"birthday",required:!0},{type:"select",label:"Género",model:"gender_id",required:!0,options:[]},{type:"select",label:"¿Tiene alguna discapacidad?",model:"sick",required:!0,options:[{label:"SI",value:"si"},{label:"NO",value:"no"}]},{type:"select",label:"Nivel educativo",model:"academicdegree_id",required:!0,options:[]},{type:"select",label:"Estado civil",model:"civil_status_id",required:!0,options:[]},{type:"number",label:"Cantidad de hijos",model:"num_soons",required:!0,max:3,minLength:0},{type:"number",label:"Número de celular",model:"phone",required:!0,max:9,minLength:9},{type:"email",label:"Correo electrónico",model:"email",required:!0},{type:"select",label:"Cargo en la empresa",model:"role_company_id",required:!0,options:[]},{type:"checkbox",label:'Autorizo la participación y el uso de mis datos personales e imagen para fines institucionales del Programa Nacional "Tu Empresa", según la Ley N.º 29733',model:"autorization",required:!0,md:12,rows:3}]);ee(a,t=>{S.global.name.value=t?"dark":"light"});const T=t=>{const i=r.find(o=>o.model===t);D.value==1&&t=="ruc"&&(i.disabled=!i.disabled,V()),t=="documentnumber"&&w()},V=()=>{e.ruc=null,e.razonSocial=null,e.economicsector_id=null,e.rubro_id=null,e.comercialactivity_id=null,e.city_id=null,e.province_id=null,e.district_id=null,e.obs_ruc=null},w=()=>{e.typedocument_id=null,e.documentnumber=null,e.name=null,e.lastname=null,e.middlename=null,e.country_id=null,e.birthday=null,e.gender_id=null,e.sick=null,e.academicdegree_id=null,e.civil_status_id=null,e.num_soons=0,e.role_company_id=null,e.obs_dni=null,e.phone=null,e.email=null},P=async(t,i)=>{if(t.model=="rubro_id"){e.comercialactivity_id=null;const o=await m({url:`select/activity-by-rubro/${t.value}`,method:"GET"}),l=r.find(c=>c.model==="comercialactivity_id");l.options=o.data}if(t.model=="city_id"){e.province_id=null,e.district_id=null;const o=`select/provinces/${t.value}`;_(o,"province_id")}if(t.model=="province_id"){e.district_id=null;const o=`select/districts/${t.value}`;_(o,"district_id")}if(t.model==="typedocument_id"){const o=r.find(y=>y.model==="documentnumber");if(!o)return;const l={1:{max:8,autolockNames:!0},2:{max:9,autolockNames:!1},3:{max:12,autolockNames:!1},default:{max:9,autolockNames:!1}},c=l[t.value]||l.default;o.max=c.max,t.value&&w(),["name","lastname","middlename"].forEach(y=>{const x=r.find(U=>U.model===y);x&&(x.disabled=c.autolockNames)}),o.disabled=!1}if(t.model==="documentnumber"){const o=r.find(l=>l.model==="documentnumber");o&&(o.disabled=!1)}},$=async t=>{if(t=="ruc")return A();if(t=="documentnumber")return z()},A=async()=>{try{const t=await m({url:`mp/ruc-number/${e.ruc}`,method:"POST"});if(t.status==409&&["razonSocial"].forEach(i=>{const o=r.find(l=>l.model===i);o&&(o.disabled=!1),e.obs_ruc=1}),t.status==200){const{data:i}=t;e.razonSocial=i.social_reason,e.economicsector_id=i.economic_sector_id,e.rubro_id=i.rubro_id,await _(`select/activity-by-rubro/${i.rubro_id}`,"comercialactivity_id"),e.comercialactivity_id=i.comercial_activity_id,e.city_id=i.city_id,await _(`select/provinces/${i.city_id}`,"province_id"),e.province_id=i.province_id,await _(`select/districts/${i.province_id}`,"district_id"),e.district_id=i.district_id}f.ruc=!1}catch(t){console.log("Error: ",t)}},z=async()=>{try{const t=await m({url:`mp/dni-number/${e.documentnumber}`,method:"POST"});if(t.status==409&&["documentnumber","name","lastname","middlename"].forEach(i=>{const o=r.find(l=>l.model===i);o&&(o.disabled=!1),e.obs_dni=1}),t.status==201){const{data:i}=t;e.lastname=i.last_name,e.middlename=i.middle_name,e.name=i.names}if(t.status==200){const{data:i}=t;e.name=i.names,e.lastname=i.last_name,e.middlename=i.middle_name,e.gender_id=i.gender_id,e.sick=i.sick,e.academicdegree_id=i.academicdegree_id,e.civil_status_id=i.civil_status_id,e.num_soons=i.num_soons,e.birthday=k(i.date_of_birth).format("DD/MM/YYYY"),e.phone=i.phone,e.email=i.email,e.role_company_id=i.role_company_id,e.country_id=i.country_id}f.documentnumber=!1}catch(t){console.log("Error: ",t)}},F=async()=>{b.value=!0;const t={ruc:e.ruc,social_reason:e.razonSocial,economic_sector_id:e.economicsector_id,rubro_id:e.rubro_id,comercial_activity_id:e.comercialactivity_id,city_id:e.city_id,province_id:e.province_id,district_id:e.district_id,t_doc_id:e.typedocument_id,doc_number:e.documentnumber,country_id:e.country_id,date_of_birth:k(e.birthday).format("YYYY-MM-DD"),names:e.name,last_name:e.lastname,middle_name:e.middlename,civil_status_id:e.civil_status_id,num_soons:e.num_soons,gender_id:e.gender_id,sick:e.sick,academicdegree_id:e.academicdegree_id,phone:e.phone,email:e.email,role_company_id:e.role_company_id,obs_ruc:e.obs_ruc,obs_dni:e.obs_dni,slug:p.params.slug};try{const i=await m({url:"mp/register-participant",method:"POST",data:t});if(console.log("Response: ",i),i.status==200&&p.query.ruc){const o={ruc:e.ruc,doc_number:e.documentnumber,slug:p.params.slug,attendance:1},l=await m({url:"mp/register-attendance",method:"POST",data:o});console.log("Response2: ",l.message)}}catch(i){console.log("Error: ",i)}finally{b.value=!1}},_=async(t,i)=>{try{const o=await m({url:t,method:"GET"}),l=r.find(c=>c.model===i);l&&o.data&&(l.options=o.data)}catch(o){console.error("Error de red:",o)}},{loadSectorEconomico:M,loadRubros:O,loadCountries:Y,loadCity:j,loadTypeDocuments:G,loadGenders:B,loadCivilStatus:I,loadAcademicDegree:L,loadRoleCompany:H}=J(r);return ie(async()=>{await M(),await O(),await j(),await G(),await B(),await I(),await Y(),await L(),await H(),e.country_id=155}),(t,i)=>(R(),te("div",re,[d(Z,{colorForm:"#d41a75",fields:r,onSearchDataApi:$,onSubmit:F,onChange:P,onHandleClearSearch:T},null,8,["fields"])]))}},se={class:"mp-header mp"},ce={style:{"line-height":"2.2",color:"#fff"}},me={style:{"list-style":"none","padding-left":"0","font-size":"18px"}},ue={class:"mp"},Ne={__name:"[slug]",setup(N){return(S,a)=>(R(),oe(ae,{class:"py-0",fluid:""},{default:n(()=>[d(C,{align:"center",justify:"center"},{default:n(()=>[d(E,{cols:"12",sm:"12",md:"10",lg:"8",xl:"6",class:"my-2"},{default:n(()=>[d(le,{elevation:"8",rounded:"lg"},{default:n(()=>[s("div",se,[d(C,null,{default:n(()=>[d(E,null,{default:n(()=>[s("div",ce,[d(de,{width:100,src:Q}),a[6]||(a[6]=s("h1",{class:"title"}," Evento de Producción de Mujeres ",-1)),s("ul",me,[s("li",null,[d(q,null,{default:n(()=>a[0]||(a[0]=[u("mdi-map-marker")])),_:1,__:[0]}),a[1]||(a[1]=u(" LUGAR: casa 132 "))]),s("li",null,[d(q,{left:""},{default:n(()=>a[2]||(a[2]=[u("mdi-calendar")])),_:1,__:[2]}),a[3]||(a[3]=u(" FECHA: 18/12/2023 "))]),s("li",null,[d(q,{left:""},{default:n(()=>a[4]||(a[4]=[u("mdi-clock-time-four-outline")])),_:1,__:[4]}),a[5]||(a[5]=u(" HORARIO: 10:00 - 12:00 "))])])])]),_:1})]),_:1})]),s("div",ue,[d(ne)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ne as default};
